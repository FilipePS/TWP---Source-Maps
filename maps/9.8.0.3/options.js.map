{"version":3,"file":"../../options/options.js","names":["fetch","then","response","text","responseText","window","scrollTo","document","getElementById","innerHTML","textContent","twpI18n","getMessage","replace","chrome","runtime","getManifest","name","version","navigator","language","$","value","style","display","onchange","e","target","querySelector","bind","twpConfig","onReady","updateUiMessages","sessionStorage","getItem","translateDocument","temporaryUiLanguage","removeItem","platformInfo","isMobile","any","createElement","head","appendChild","pageAction","sideBarIsVisible","onclick","classList","toggle","hashchange","hash","location","divs","forEach","element","querySelectorAll","a","remove","add","insertBefore","firstChild","addEventListener","fillLanguageList","select","langs","twpLang","getLanguageList","langsSorted","i","push","sort","b","localeCompare","option","updateDarkMode","get","matchMedia","matches","enableDarkMode","disableDarkMode","set","setItem","reload","fixUILanguageCode","targetLanguage","setTargetLanguage","targetLanguageTextTranslation","targetLanguages","indexOf","createNodeToNeverTranslateLangsList","langCode","langName","li","setAttribute","close","preventDefault","removeLangFromNeverTranslate","neverTranslateLangs","codeToLanguage","addLangToNeverTranslate","createNodeToAlwaysTranslateLangsList","removeLangFromAlwaysTranslate","alwaysTranslateLangs","addLangToAlwaysTranslate","createNodeToLangsToTranslateWhenHoveringList","removeLangFromTranslateWhenHovering","langsToTranslateWhenHovering","addLangToTranslateWhenHovering","createNodeToAlwaysTranslateSitesList","hostname","removeSiteFromAlwaysTranslate","alwaysTranslateSites","prompt","addSiteToAlwaysTranslate","createNodeToNeverTranslateSitesList","removeSiteFromNeverTranslate","neverTranslateSites","addSiteToNeverTranslate","createcustomDictionary","keyWord","customValue","removeKeyWordFromcustomDictionary","customDictionary","Map","entries","String","length","trim","toLowerCase","addKeyWordTocustomDictionary","createNodeToSitesToTranslateWhenHoveringList","removeSiteFromTranslateWhenHovering","sitesToTranslateWhenHovering","addSiteToTranslateWhenHovering","oninput","permissions","request","granted","enableOrDisableTranslateSelectedAdvancedOptions","input","removeAttribute","checked","escapeHtml","unsafe","tabsCreate","defaultShortcuts","Object","keys","commands","info","suggested_key","default","addHotkey","hotkeyname","description","error","removeKey","resetKey","setError","errorname","getKeyString","result","ctrlKey","altKey","shiftKey","code","match","setShortcut","keystring","hotkeys","browser","update","shortcut","onkeychange","Key","key","blur","onkeydown","onkeyup","onfocus","onblur","getAll","results","updateServiceSelector","enabledServices","svName","servicesInfo","selector","svInfo","enabledCount","_svInfo","includes","pageTranslationServices","sendMessage","action","serviceNames","filter","newServiceName","checkedLastError","confirm","configJSON","export","encodeURIComponent","Date","toISOString","body","click","removeChild","reader","FileReader","onload","import","alert","console","readAsText","files","restoreToDefault","libre","url","apiKey","URL","Error","customServices","index","findIndex","cs","splice","find","testDeepLFreeApiKey","Promise","resolve","xhttp","XMLHttpRequest","open","responseType","setRequestHeader","send","deepl_freeapi","JSON","stringify","top"],"sources":["options.js"],"sourcesContent":["\"use strict\";\r\n\r\nfetch(\"./release-notes/en.html\")\r\n  .then((response) => response.text())\r\n  .then((responseText) => {\r\n    window.scrollTo(0, 0);\r\n    document.getElementById(\"release_notes\").innerHTML = responseText;\r\n    document.getElementById(\"msgHasBeenUpdated\").textContent =\r\n      twpI18n.getMessage(\"msgHasBeenUpdated\");\r\n    document.getElementById(\"msgHasBeenUpdated\").innerHTML = document\r\n      .getElementById(\"msgHasBeenUpdated\")\r\n      .textContent.replace(\r\n        \"#EXTENSION_NAME#\",\r\n        \"<b>\" + chrome.runtime.getManifest().name + \"</b>\"\r\n      )\r\n      .replace(\r\n        \"#EXTENSION_VERSION#\",\r\n        \"<b>\" + chrome.runtime.getManifest().version + \"</b>\"\r\n      );\r\n    document.getElementById(\"donationText\").textContent =\r\n      twpI18n.getMessage(\"donationText\");\r\n\r\n    // donation options\r\n    if (navigator.language === \"pt-BR\") {\r\n      $(\"#_currency\").value = \"BRL\";\r\n      $(\"#_donateInUSD\").style.display = \"none\";\r\n    } else {\r\n      $(\"#_currency\").value = \"USD\";\r\n      $(\"#_donateInBRL\").style.display = \"none\";\r\n    }\r\n\r\n    $(\"#_currency\").onchange = (e) => {\r\n      if (e.target.value === \"BRL\") {\r\n        $(\"#_donateInUSD\").style.display = \"none\";\r\n        $(\"#_donateInBRL\").style.display = \"block\";\r\n      } else {\r\n        $(\"#_donateInUSD\").style.display = \"block\";\r\n        $(\"#_donateInBRL\").style.display = \"none\";\r\n      }\r\n    };\r\n  });\r\n\r\nvar $ = document.querySelector.bind(document);\r\n\r\ntwpConfig\r\n  .onReady()\r\n  .then(() =>\r\n    twpI18n.updateUiMessages(sessionStorage.getItem(\"temporaryUiLanguage\"))\r\n  )\r\n  .then(() => {\r\n    twpI18n.translateDocument();\r\n    document.querySelector(\"[data-i18n='msgDefaultLanguage']\").textContent =\r\n      twpI18n.getMessage(\"msgDefaultLanguage\") + \" - Default language\";\r\n\r\n    const temporaryUiLanguage = sessionStorage.getItem(\"temporaryUiLanguage\");\r\n    sessionStorage.removeItem(\"temporaryUiLanguage\");\r\n\r\n    if (platformInfo.isMobile.any) {\r\n      let style = document.createElement(\"style\");\r\n      style.textContent = \".desktopOnly {display: none !important}\";\r\n      document.head.appendChild(style);\r\n    }\r\n\r\n    if (!chrome.pageAction) {\r\n      let style = document.createElement(\"style\");\r\n      style.textContent = \".firefox-only {display: none !important}\";\r\n      document.head.appendChild(style);\r\n    }\r\n\r\n    let sideBarIsVisible = false;\r\n    $(\"#btnOpenMenu\").onclick = (e) => {\r\n      $(\"#menuContainer\").classList.toggle(\"change\");\r\n\r\n      if (sideBarIsVisible) {\r\n        $(\"#sideBar\").style.display = \"none\";\r\n        sideBarIsVisible = false;\r\n      } else {\r\n        $(\"#sideBar\").style.display = \"block\";\r\n        sideBarIsVisible = true;\r\n      }\r\n    };\r\n\r\n    function hashchange() {\r\n      const hash = location.hash || \"#languages\";\r\n      const divs = [\r\n        $(\"#languages\"),\r\n        $(\"#sites\"),\r\n        $(\"#translations\"),\r\n        $(\"#style\"),\r\n        $(\"#hotkeys\"),\r\n        $(\"#privacy\"),\r\n        $(\"#storage\"),\r\n        $(\"#others\"),\r\n        $(\"#experimental\"),\r\n        $(\"#donation\"),\r\n        $(\"#release_notes\"),\r\n      ];\r\n      divs.forEach((element) => {\r\n        element.style.display = \"none\";\r\n      });\r\n\r\n      document.querySelectorAll(\"nav a\").forEach((a) => {\r\n        a.classList.remove(\"w3-light-grey\");\r\n      });\r\n\r\n      $(hash).style.display = \"block\";\r\n      $('a[href=\"' + hash + '\"]').classList.add(\"w3-light-grey\");\r\n\r\n      let text;\r\n      if (hash === \"#donation\") {\r\n        text = twpI18n.getMessage(\"lblMakeDonation\");\r\n      } else if (hash === \"#release_notes\") {\r\n        text = twpI18n.getMessage(\"lblReleaseNotes\");\r\n      } else {\r\n        text = twpI18n.getMessage(\"lblSettings\");\r\n      }\r\n      $(\"#itemSelectedName\").textContent = text;\r\n\r\n      if (sideBarIsVisible) {\r\n        $(\"#menuContainer\").classList.toggle(\"change\");\r\n        $(\"#sideBar\").style.display = \"none\";\r\n        sideBarIsVisible = false;\r\n      }\r\n\r\n      if (hash === \"#release_notes\") {\r\n        $(\"#btnPatreon\").style.display = \"none\";\r\n      } else {\r\n        $(\"#btnPatreon\").style.display = \"block\";\r\n      }\r\n\r\n      if (hash === \"#translations\") {\r\n        $(\"#translations\").insertBefore(\r\n          $(\"#selectServiceContainer\"),\r\n          $(\"#translations\").firstChild\r\n        );\r\n      } else if (hash === \"#privacy\") {\r\n        $(\"#privacy\").insertBefore(\r\n          $(\"#selectServiceContainer\"),\r\n          $(\"#privacy\").firstChild\r\n        );\r\n      }\r\n    }\r\n    hashchange();\r\n    window.addEventListener(\"hashchange\", hashchange);\r\n\r\n    function fillLanguageList(select) {\r\n      let langs = twpLang.getLanguageList();\r\n\r\n      const langsSorted = [];\r\n\r\n      for (const i in langs) {\r\n        langsSorted.push([i, langs[i]]);\r\n      }\r\n\r\n      langsSorted.sort(function (a, b) {\r\n        return a[1].localeCompare(b[1]);\r\n      });\r\n\r\n      langsSorted.forEach((value) => {\r\n        const option = document.createElement(\"option\");\r\n        option.value = value[0];\r\n        option.textContent = value[1];\r\n        select.appendChild(option);\r\n      });\r\n    }\r\n\r\n    fillLanguageList($(\"#selectTargetLanguage\"));\r\n    fillLanguageList($(\"#selectTargetLanguageForText\"));\r\n\r\n    fillLanguageList($(\"#favoriteLanguage1\"));\r\n    fillLanguageList($(\"#favoriteLanguage2\"));\r\n    fillLanguageList($(\"#favoriteLanguage3\"));\r\n\r\n    fillLanguageList($(\"#addToNeverTranslateLangs\"));\r\n    fillLanguageList($(\"#addToAlwaysTranslateLangs\"));\r\n    fillLanguageList($(\"#addLangToTranslateWhenHovering\"));\r\n\r\n    function updateDarkMode() {\r\n      switch (twpConfig.get(\"darkMode\")) {\r\n        case \"auto\":\r\n          if (matchMedia(\"(prefers-color-scheme: dark)\").matches) {\r\n            enableDarkMode();\r\n          } else {\r\n            disableDarkMode();\r\n          }\r\n          break;\r\n        case \"yes\":\r\n          enableDarkMode();\r\n          break;\r\n        case \"no\":\r\n          disableDarkMode();\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    updateDarkMode();\r\n\r\n    // target languages\r\n    $(\"#selectUiLanguage\").value =\r\n      temporaryUiLanguage || twpConfig.get(\"uiLanguage\");\r\n    $(\"#selectUiLanguage\").onchange = (e) => {\r\n      if (e.target.value === \"default\") {\r\n        twpConfig.set(\"uiLanguage\", \"default\");\r\n      } else {\r\n        sessionStorage.setItem(\"temporaryUiLanguage\", e.target.value);\r\n      }\r\n      location.reload();\r\n    };\r\n    $(\"#btnApplyUiLanguage\").onclick = () => {\r\n      if (temporaryUiLanguage) {\r\n        twpConfig.set(\r\n          \"uiLanguage\",\r\n          temporaryUiLanguage === \"default\"\r\n            ? \"default\"\r\n            : twpLang.fixUILanguageCode(temporaryUiLanguage)\r\n        );\r\n        location.reload();\r\n      }\r\n    };\r\n\r\n    const targetLanguage = twpConfig.get(\"targetLanguage\");\r\n    $(\"#selectTargetLanguage\").value = targetLanguage;\r\n    $(\"#selectTargetLanguage\").onchange = (e) => {\r\n      twpConfig.setTargetLanguage(e.target.value);\r\n      location.reload();\r\n    };\r\n\r\n    const targetLanguageTextTranslation = twpConfig.get(\r\n      \"targetLanguageTextTranslation\"\r\n    );\r\n    $(\"#selectTargetLanguageForText\").value = targetLanguageTextTranslation;\r\n    $(\"#selectTargetLanguageForText\").onchange = (e) => {\r\n      twpConfig.setTargetLanguage(e.target.value, true);\r\n      twpConfig.setTargetLanguage(targetLanguage, false);\r\n      location.reload();\r\n    };\r\n\r\n    const targetLanguages = twpConfig.get(\"targetLanguages\");\r\n\r\n    $(\"#favoriteLanguage1\").value = targetLanguages[0];\r\n    $(\"#favoriteLanguage2\").value = targetLanguages[1];\r\n    $(\"#favoriteLanguage3\").value = targetLanguages[2];\r\n\r\n    $(\"#favoriteLanguage1\").onchange = (e) => {\r\n      targetLanguages[0] = e.target.value;\r\n      twpConfig.set(\"targetLanguages\", targetLanguages);\r\n      if (targetLanguages.indexOf(twpConfig.get(\"targetLanguage\")) == -1) {\r\n        twpConfig.set(\"targetLanguage\", targetLanguages[0]);\r\n      }\r\n      if (\r\n        targetLanguages.indexOf(\r\n          twpConfig.get(\"targetLanguageTextTranslation\")\r\n        ) == -1\r\n      ) {\r\n        twpConfig.set(\"targetLanguageTextTranslation\", targetLanguages[0]);\r\n      }\r\n      location.reload();\r\n    };\r\n\r\n    $(\"#favoriteLanguage2\").onchange = (e) => {\r\n      targetLanguages[1] = e.target.value;\r\n      twpConfig.set(\"targetLanguages\", targetLanguages);\r\n      if (targetLanguages.indexOf(twpConfig.get(\"targetLanguage\")) == -1) {\r\n        twpConfig.set(\"targetLanguage\", targetLanguages[0]);\r\n      }\r\n      if (\r\n        targetLanguages.indexOf(\r\n          twpConfig.get(\"targetLanguageTextTranslation\")\r\n        ) == -1\r\n      ) {\r\n        twpConfig.set(\"targetLanguageTextTranslation\", targetLanguages[0]);\r\n      }\r\n      location.reload();\r\n    };\r\n\r\n    $(\"#favoriteLanguage3\").onchange = (e) => {\r\n      targetLanguages[2] = e.target.value;\r\n      twpConfig.set(\"targetLanguages\", targetLanguages);\r\n      if (targetLanguages.indexOf(twpConfig.get(\"targetLanguage\")) == -1) {\r\n        twpConfig.set(\"targetLanguage\", targetLanguages[0]);\r\n      }\r\n      if (\r\n        targetLanguages.indexOf(\r\n          twpConfig.get(\"targetLanguageTextTranslation\")\r\n        ) == -1\r\n      ) {\r\n        twpConfig.set(\"targetLanguageTextTranslation\", targetLanguages[0]);\r\n      }\r\n      location.reload();\r\n    };\r\n\r\n    // Never translate these languages\r\n\r\n    function createNodeToNeverTranslateLangsList(langCode, langName) {\r\n      const li = document.createElement(\"li\");\r\n      li.setAttribute(\"class\", \"w3-display-container\");\r\n      li.value = langCode;\r\n      li.textContent = langName;\r\n\r\n      const close = document.createElement(\"span\");\r\n      close.setAttribute(\"class\", \"w3-button w3-transparent w3-display-right\");\r\n      close.innerHTML = \"&times;\";\r\n\r\n      close.onclick = (e) => {\r\n        e.preventDefault();\r\n\r\n        twpConfig.removeLangFromNeverTranslate(langCode);\r\n        li.remove();\r\n      };\r\n\r\n      li.appendChild(close);\r\n\r\n      return li;\r\n    }\r\n\r\n    const neverTranslateLangs = twpConfig.get(\"neverTranslateLangs\");\r\n    neverTranslateLangs.sort((a, b) => a.localeCompare(b));\r\n    neverTranslateLangs.forEach((langCode) => {\r\n      const langName = twpLang.codeToLanguage(langCode);\r\n      const li = createNodeToNeverTranslateLangsList(langCode, langName);\r\n      $(\"#neverTranslateLangs\").appendChild(li);\r\n    });\r\n\r\n    $(\"#addToNeverTranslateLangs\").onchange = (e) => {\r\n      const langCode = e.target.value;\r\n      const langName = twpLang.codeToLanguage(langCode);\r\n      const li = createNodeToNeverTranslateLangsList(langCode, langName);\r\n      $(\"#neverTranslateLangs\").appendChild(li);\r\n\r\n      twpConfig.addLangToNeverTranslate(langCode);\r\n    };\r\n\r\n    // Always translate these languages\r\n\r\n    function createNodeToAlwaysTranslateLangsList(langCode, langName) {\r\n      const li = document.createElement(\"li\");\r\n      li.setAttribute(\"class\", \"w3-display-container\");\r\n      li.value = langCode;\r\n      li.textContent = langName;\r\n\r\n      const close = document.createElement(\"span\");\r\n      close.setAttribute(\"class\", \"w3-button w3-transparent w3-display-right\");\r\n      close.innerHTML = \"&times;\";\r\n\r\n      close.onclick = (e) => {\r\n        e.preventDefault();\r\n\r\n        twpConfig.removeLangFromAlwaysTranslate(langCode);\r\n        li.remove();\r\n      };\r\n\r\n      li.appendChild(close);\r\n\r\n      return li;\r\n    }\r\n\r\n    const alwaysTranslateLangs = twpConfig.get(\"alwaysTranslateLangs\");\r\n    alwaysTranslateLangs.sort((a, b) => a.localeCompare(b));\r\n    alwaysTranslateLangs.forEach((langCode) => {\r\n      const langName = twpLang.codeToLanguage(langCode);\r\n      const li = createNodeToAlwaysTranslateLangsList(langCode, langName);\r\n      $(\"#alwaysTranslateLangs\").appendChild(li);\r\n    });\r\n\r\n    $(\"#addToAlwaysTranslateLangs\").onchange = (e) => {\r\n      const langCode = e.target.value;\r\n      const langName = twpLang.codeToLanguage(langCode);\r\n      const li = createNodeToAlwaysTranslateLangsList(langCode, langName);\r\n      $(\"#alwaysTranslateLangs\").appendChild(li);\r\n\r\n      twpConfig.addLangToAlwaysTranslate(langCode);\r\n    };\r\n\r\n    // langsToTranslateWhenHovering\r\n\r\n    function createNodeToLangsToTranslateWhenHoveringList(langCode, langName) {\r\n      const li = document.createElement(\"li\");\r\n      li.setAttribute(\"class\", \"w3-display-container\");\r\n      li.value = langCode;\r\n      li.textContent = langName;\r\n\r\n      const close = document.createElement(\"span\");\r\n      close.setAttribute(\"class\", \"w3-button w3-transparent w3-display-right\");\r\n      close.innerHTML = \"&times;\";\r\n\r\n      close.onclick = (e) => {\r\n        e.preventDefault();\r\n\r\n        twpConfig.removeLangFromTranslateWhenHovering(langCode);\r\n        li.remove();\r\n      };\r\n\r\n      li.appendChild(close);\r\n\r\n      return li;\r\n    }\r\n\r\n    const langsToTranslateWhenHovering = twpConfig.get(\r\n      \"langsToTranslateWhenHovering\"\r\n    );\r\n    langsToTranslateWhenHovering.sort((a, b) => a.localeCompare(b));\r\n    langsToTranslateWhenHovering.forEach((langCode) => {\r\n      const langName = twpLang.codeToLanguage(langCode);\r\n      const li = createNodeToLangsToTranslateWhenHoveringList(\r\n        langCode,\r\n        langName\r\n      );\r\n      $(\"#langsToTranslateWhenHovering\").appendChild(li);\r\n    });\r\n\r\n    $(\"#addLangToTranslateWhenHovering\").onchange = (e) => {\r\n      const langCode = e.target.value;\r\n      const langName = twpLang.codeToLanguage(langCode);\r\n      const li = createNodeToLangsToTranslateWhenHoveringList(\r\n        langCode,\r\n        langName\r\n      );\r\n      $(\"#langsToTranslateWhenHovering\").appendChild(li);\r\n\r\n      twpConfig.addLangToTranslateWhenHovering(langCode);\r\n    };\r\n\r\n    // Always translate these Sites\r\n\r\n    function createNodeToAlwaysTranslateSitesList(hostname) {\r\n      const li = document.createElement(\"li\");\r\n      li.setAttribute(\"class\", \"w3-display-container\");\r\n      li.value = hostname;\r\n      li.textContent = hostname;\r\n\r\n      const close = document.createElement(\"span\");\r\n      close.setAttribute(\"class\", \"w3-button w3-transparent w3-display-right\");\r\n      close.innerHTML = \"&times;\";\r\n\r\n      close.onclick = (e) => {\r\n        e.preventDefault();\r\n\r\n        twpConfig.removeSiteFromAlwaysTranslate(hostname);\r\n        li.remove();\r\n      };\r\n\r\n      li.appendChild(close);\r\n\r\n      return li;\r\n    }\r\n\r\n    const alwaysTranslateSites = twpConfig.get(\"alwaysTranslateSites\");\r\n    alwaysTranslateSites.sort((a, b) => a.localeCompare(b));\r\n    alwaysTranslateSites.forEach((hostname) => {\r\n      const li = createNodeToAlwaysTranslateSitesList(hostname);\r\n      $(\"#alwaysTranslateSites\").appendChild(li);\r\n    });\r\n\r\n    $(\"#addToAlwaysTranslateSites\").onclick = (e) => {\r\n      const hostname = prompt(\"Enter the site hostname\", \"www.site.com\");\r\n      if (!hostname) return;\r\n\r\n      const li = createNodeToAlwaysTranslateSitesList(hostname);\r\n      $(\"#alwaysTranslateSites\").appendChild(li);\r\n\r\n      twpConfig.addSiteToAlwaysTranslate(hostname);\r\n    };\r\n\r\n    // Never translate these Sites\r\n\r\n    function createNodeToNeverTranslateSitesList(hostname) {\r\n      const li = document.createElement(\"li\");\r\n      li.setAttribute(\"class\", \"w3-display-container\");\r\n      li.value = hostname;\r\n      li.textContent = hostname;\r\n\r\n      const close = document.createElement(\"span\");\r\n      close.setAttribute(\"class\", \"w3-button w3-transparent w3-display-right\");\r\n      close.innerHTML = \"&times;\";\r\n\r\n      close.onclick = (e) => {\r\n        e.preventDefault();\r\n\r\n        twpConfig.removeSiteFromNeverTranslate(hostname);\r\n        li.remove();\r\n      };\r\n\r\n      li.appendChild(close);\r\n\r\n      return li;\r\n    }\r\n\r\n    const neverTranslateSites = twpConfig.get(\"neverTranslateSites\");\r\n    neverTranslateSites.sort((a, b) => a.localeCompare(b));\r\n    neverTranslateSites.forEach((hostname) => {\r\n      const li = createNodeToNeverTranslateSitesList(hostname);\r\n      $(\"#neverTranslateSites\").appendChild(li);\r\n    });\r\n\r\n    $(\"#addToNeverTranslateSites\").onclick = (e) => {\r\n      const hostname = prompt(\"Enter the site hostname\", \"www.site.com\");\r\n      if (!hostname) return;\r\n\r\n      const li = createNodeToNeverTranslateSitesList(hostname);\r\n      $(\"#neverTranslateSites\").appendChild(li);\r\n\r\n      twpConfig.addSiteToNeverTranslate(hostname);\r\n    };\r\n\r\n    function createcustomDictionary(keyWord, customValue) {\r\n      const li = document.createElement(\"li\");\r\n      li.setAttribute(\"class\", \"w3-display-container\");\r\n      li.value = keyWord;\r\n      if (customValue !== \"\") {\r\n        li.textContent = keyWord + \" ------------------- \" + customValue;\r\n      } else {\r\n        li.textContent = keyWord;\r\n      }\r\n      const close = document.createElement(\"span\");\r\n      close.setAttribute(\"class\", \"w3-button w3-transparent w3-display-right\");\r\n      close.innerHTML = \"&times;\";\r\n\r\n      close.onclick = (e) => {\r\n        e.preventDefault();\r\n        twpConfig.removeKeyWordFromcustomDictionary(keyWord);\r\n        li.remove();\r\n      };\r\n      li.appendChild(close);\r\n      return li;\r\n    }\r\n\r\n    let customDictionary = twpConfig.get(\"customDictionary\");\r\n    customDictionary = new Map(\r\n      [...customDictionary.entries()].sort((a, b) =>\r\n        String(a[0]).localeCompare(String(b[0]))\r\n      )\r\n    );\r\n    customDictionary.forEach(function (customValue, keyWord) {\r\n      const li = createcustomDictionary(keyWord, customValue);\r\n      $(\"#customDictionary\").appendChild(li);\r\n    });\r\n\r\n    $(\"#addToCustomDictionary\").onclick = (e) => {\r\n      let keyWord = prompt(\"Enter the keyWord, Minimum two letters \", \"\");\r\n      if (!keyWord || keyWord.length < 2) return;\r\n      keyWord = keyWord.trim().toLowerCase();\r\n      let customValue = prompt(\r\n        \"(Optional)\\nYou can enter a value to replace it , or fill in nothing.\",\r\n        \"\"\r\n      );\r\n      if (!customValue) customValue = \"\";\r\n      customValue = customValue.trim();\r\n      const li = createcustomDictionary(keyWord, customValue);\r\n      $(\"#customDictionary\").appendChild(li);\r\n      twpConfig.addKeyWordTocustomDictionary(keyWord, customValue);\r\n    };\r\n\r\n    // sitesToTranslateWhenHovering\r\n\r\n    function createNodeToSitesToTranslateWhenHoveringList(hostname) {\r\n      const li = document.createElement(\"li\");\r\n      li.setAttribute(\"class\", \"w3-display-container\");\r\n      li.value = hostname;\r\n      li.textContent = hostname;\r\n\r\n      const close = document.createElement(\"span\");\r\n      close.setAttribute(\"class\", \"w3-button w3-transparent w3-display-right\");\r\n      close.innerHTML = \"&times;\";\r\n\r\n      close.onclick = (e) => {\r\n        e.preventDefault();\r\n\r\n        twpConfig.removeSiteFromTranslateWhenHovering(hostname);\r\n        li.remove();\r\n      };\r\n\r\n      li.appendChild(close);\r\n\r\n      return li;\r\n    }\r\n\r\n    const sitesToTranslateWhenHovering = twpConfig.get(\r\n      \"sitesToTranslateWhenHovering\"\r\n    );\r\n    sitesToTranslateWhenHovering.sort((a, b) => a.localeCompare(b));\r\n    sitesToTranslateWhenHovering.forEach((hostname) => {\r\n      const li = createNodeToSitesToTranslateWhenHoveringList(hostname);\r\n      $(\"#sitesToTranslateWhenHovering\").appendChild(li);\r\n    });\r\n\r\n    $(\"#addSiteToTranslateWhenHovering\").onclick = (e) => {\r\n      const hostname = prompt(\"Enter the site hostname\", \"www.site.com\");\r\n      if (!hostname) return;\r\n\r\n      const li = createNodeToSitesToTranslateWhenHoveringList(hostname);\r\n      $(\"#sitesToTranslateWhenHovering\").appendChild(li);\r\n\r\n      twpConfig.addSiteToTranslateWhenHovering(hostname);\r\n    };\r\n\r\n    // translations options\r\n    $(\"#pageTranslatorService\").onchange = (e) => {\r\n      twpConfig.set(\"pageTranslatorService\", e.target.value);\r\n    };\r\n    $(\"#pageTranslatorService\").value = twpConfig.get(\"pageTranslatorService\");\r\n\r\n    $(\"#textTranslatorService\").onchange = (e) => {\r\n      twpConfig.set(\"textTranslatorService\", e.target.value);\r\n    };\r\n    $(\"#textTranslatorService\").value = twpConfig.get(\"textTranslatorService\");\r\n\r\n    $(\"#ttsSpeed\").oninput = (e) => {\r\n      twpConfig.set(\"ttsSpeed\", e.target.value);\r\n      $(\"#displayTtsSpeed\").textContent = e.target.value;\r\n    };\r\n    $(\"#ttsSpeed\").value = twpConfig.get(\"ttsSpeed\");\r\n    $(\"#displayTtsSpeed\").textContent = twpConfig.get(\"ttsSpeed\");\r\n\r\n    $(\"#showOriginalTextWhenHovering\").onchange = (e) => {\r\n      twpConfig.set(\"showOriginalTextWhenHovering\", e.target.value);\r\n    };\r\n    $(\"#showOriginalTextWhenHovering\").value = twpConfig.get(\r\n      \"showOriginalTextWhenHovering\"\r\n    );\r\n\r\n    $(\"#translateTag_pre\").onchange = (e) => {\r\n      twpConfig.set(\"translateTag_pre\", e.target.value);\r\n    };\r\n    $(\"#translateTag_pre\").value = twpConfig.get(\"translateTag_pre\");\r\n\r\n    $(\"#dontSortResults\").onchange = (e) => {\r\n      twpConfig.set(\"dontSortResults\", e.target.value);\r\n    };\r\n    $(\"#dontSortResults\").value = twpConfig.get(\"dontSortResults\");\r\n\r\n    $(\"#translateDynamicallyCreatedContent\").onchange = (e) => {\r\n      twpConfig.set(\"translateDynamicallyCreatedContent\", e.target.value);\r\n    };\r\n    $(\"#translateDynamicallyCreatedContent\").value = twpConfig.get(\r\n      \"translateDynamicallyCreatedContent\"\r\n    );\r\n\r\n    $(\"#autoTranslateWhenClickingALink\").onchange = (e) => {\r\n      if (e.target.value == \"yes\") {\r\n        chrome.permissions.request(\r\n          {\r\n            permissions: [\"webNavigation\"],\r\n          },\r\n          (granted) => {\r\n            if (granted) {\r\n              twpConfig.set(\"autoTranslateWhenClickingALink\", \"yes\");\r\n            } else {\r\n              twpConfig.set(\"autoTranslateWhenClickingALink\", \"no\");\r\n              e.target.value = \"no\";\r\n            }\r\n          }\r\n        );\r\n      } else {\r\n        twpConfig.set(\"autoTranslateWhenClickingALink\", \"no\");\r\n        chrome.permissions.remove({\r\n          permissions: [\"webNavigation\"],\r\n        });\r\n      }\r\n    };\r\n    $(\"#autoTranslateWhenClickingALink\").value = twpConfig.get(\r\n      \"autoTranslateWhenClickingALink\"\r\n    );\r\n\r\n    function enableOrDisableTranslateSelectedAdvancedOptions(value) {\r\n      if (value === \"no\") {\r\n        document\r\n          .querySelectorAll(\"#translateSelectedAdvancedOptions input\")\r\n          .forEach((input) => {\r\n            input.setAttribute(\"disabled\", \"\");\r\n          });\r\n      } else {\r\n        document\r\n          .querySelectorAll(\"#translateSelectedAdvancedOptions input\")\r\n          .forEach((input) => {\r\n            input.removeAttribute(\"disabled\");\r\n          });\r\n      }\r\n    }\r\n\r\n    $(\"#showTranslateSelectedButton\").onchange = (e) => {\r\n      twpConfig.set(\"showTranslateSelectedButton\", e.target.value);\r\n      enableOrDisableTranslateSelectedAdvancedOptions(e.target.value);\r\n    };\r\n    $(\"#showTranslateSelectedButton\").value = twpConfig.get(\r\n      \"showTranslateSelectedButton\"\r\n    );\r\n    enableOrDisableTranslateSelectedAdvancedOptions(\r\n      twpConfig.get(\"showTranslateSelectedButton\")\r\n    );\r\n\r\n    $(\"#dontShowIfPageLangIsTargetLang\").onchange = (e) => {\r\n      twpConfig.set(\r\n        \"dontShowIfPageLangIsTargetLang\",\r\n        e.target.checked ? \"yes\" : \"no\"\r\n      );\r\n    };\r\n    $(\"#dontShowIfPageLangIsTargetLang\").checked =\r\n      twpConfig.get(\"dontShowIfPageLangIsTargetLang\") === \"yes\" ? true : false;\r\n\r\n    $(\"#dontShowIfPageLangIsUnknown\").onchange = (e) => {\r\n      twpConfig.set(\r\n        \"dontShowIfPageLangIsUnknown\",\r\n        e.target.checked ? \"yes\" : \"no\"\r\n      );\r\n    };\r\n    $(\"#dontShowIfPageLangIsUnknown\").checked =\r\n      twpConfig.get(\"dontShowIfPageLangIsUnknown\") === \"yes\" ? true : false;\r\n\r\n    $(\"#dontShowIfSelectedTextIsTargetLang\").onchange = (e) => {\r\n      twpConfig.set(\r\n        \"dontShowIfSelectedTextIsTargetLang\",\r\n        e.target.checked ? \"yes\" : \"no\"\r\n      );\r\n    };\r\n    $(\"#dontShowIfSelectedTextIsTargetLang\").checked =\r\n      twpConfig.get(\"dontShowIfSelectedTextIsTargetLang\") === \"yes\"\r\n        ? true\r\n        : false;\r\n\r\n    $(\"#dontShowIfSelectedTextIsUnknown\").onchange = (e) => {\r\n      twpConfig.set(\r\n        \"dontShowIfSelectedTextIsUnknown\",\r\n        e.target.checked ? \"yes\" : \"no\"\r\n      );\r\n    };\r\n    $(\"#dontShowIfSelectedTextIsUnknown\").checked =\r\n      twpConfig.get(\"dontShowIfSelectedTextIsUnknown\") === \"yes\" ? true : false;\r\n\r\n    // style options\r\n    $(\"#useOldPopup\").onchange = (e) => {\r\n      twpConfig.set(\"useOldPopup\", e.target.value);\r\n      updateDarkMode();\r\n    };\r\n    $(\"#useOldPopup\").value = twpConfig.get(\"useOldPopup\");\r\n\r\n    $(\"#darkMode\").onchange = (e) => {\r\n      twpConfig.set(\"darkMode\", e.target.value);\r\n      updateDarkMode();\r\n    };\r\n    $(\"#darkMode\").value = twpConfig.get(\"darkMode\");\r\n\r\n    $(\"#popupBlueWhenSiteIsTranslated\").onchange = (e) => {\r\n      twpConfig.set(\"popupBlueWhenSiteIsTranslated\", e.target.value);\r\n    };\r\n    $(\"#popupBlueWhenSiteIsTranslated\").value = twpConfig.get(\r\n      \"popupBlueWhenSiteIsTranslated\"\r\n    );\r\n\r\n    // hotkeys options\r\n    function escapeHtml(unsafe) {\r\n      return unsafe\r\n        .replace(/&/g, \"&amp;\")\r\n        .replace(/</g, \"&lt;\")\r\n        .replace(/>/g, \"&gt;\")\r\n        .replace(/\"/g, \"&quot;\")\r\n        .replace(/'/g, \"&#039;\");\r\n    }\r\n    $('[data-i18n=\"lblTranslateSelectedWhenPressTwice\"]').innerHTML = $(\r\n      '[data-i18n=\"lblTranslateSelectedWhenPressTwice\"]'\r\n    ).innerHTML.replace(\"[Ctrl]\", \"<kbd>Ctrl</kbd>\");\r\n    $('[data-i18n=\"lblTranslateTextOverMouseWhenPressTwice\"]').innerHTML = $(\r\n      '[data-i18n=\"lblTranslateTextOverMouseWhenPressTwice\"]'\r\n    ).innerHTML.replace(\"[Ctrl]\", \"<kbd>Ctrl</kbd>\");\r\n\r\n    $(\"#openNativeShortcutManager\").onclick = (e) => {\r\n      tabsCreate(\"chrome://extensions/shortcuts\");\r\n    };\r\n\r\n    $(\"#translateSelectedWhenPressTwice\").onclick = (e) => {\r\n      twpConfig.set(\r\n        \"translateSelectedWhenPressTwice\",\r\n        e.target.checked ? \"yes\" : \"no\"\r\n      );\r\n    };\r\n    $(\"#translateSelectedWhenPressTwice\").checked =\r\n      twpConfig.get(\"translateSelectedWhenPressTwice\") === \"yes\";\r\n\r\n    $(\"#translateTextOverMouseWhenPressTwice\").onclick = (e) => {\r\n      twpConfig.set(\r\n        \"translateTextOverMouseWhenPressTwice\",\r\n        e.target.checked ? \"yes\" : \"no\"\r\n      );\r\n    };\r\n    $(\"#translateTextOverMouseWhenPressTwice\").checked =\r\n      twpConfig.get(\"translateTextOverMouseWhenPressTwice\") === \"yes\";\r\n\r\n    const defaultShortcuts = {};\r\n    for (const name of Object.keys(\r\n      chrome.runtime.getManifest().commands || {}\r\n    )) {\r\n      const info = chrome.runtime.getManifest().commands[name];\r\n      if (info.suggested_key && info.suggested_key.default) {\r\n        defaultShortcuts[name] = info.suggested_key.default;\r\n      } else {\r\n        defaultShortcuts[name] = \"\";\r\n      }\r\n    }\r\n\r\n    function addHotkey(hotkeyname, description) {\r\n      if (hotkeyname === \"_execute_browser_action\" && !description) {\r\n        description = \"Enable the extension\";\r\n      }\r\n\r\n      function escapeHtml(unsafe) {\r\n        return unsafe\r\n          .replace(/&/g, \"&amp;\")\r\n          .replace(/</g, \"&lt;\")\r\n          .replace(/>/g, \"&gt;\")\r\n          .replace(/\"/g, \"&quot;\")\r\n          .replace(/'/g, \"&#039;\");\r\n      }\r\n      description = escapeHtml(description);\r\n\r\n      const li = document.createElement(\"li\");\r\n      li.classList.add(\"shortcut-row\");\r\n      li.setAttribute(\"id\", hotkeyname);\r\n      li.innerHTML = `\r\n        <div>${description}</div>\r\n        <div class=\"shortcut-input-options\">\r\n            <div style=\"position: relative;\">\r\n                <input name=\"input\" class=\"w3-input w3-border shortcut-input\" type=\"text\" readonly placeholder=\"Enter a shortcut\" data-i18n-placeholder=\"enterShortcut\">\r\n                <p name=\"error\" class=\"shortcut-error\" style=\"position: absolute;\"></p>\r\n            </div>\r\n            <div class=\"w3-hover-light-grey shortcut-button\" name=\"removeKey\"><i class=\"gg-trash\"></i></div>\r\n            <div class=\"w3-hover-light-grey shortcut-button\" name=\"resetKey\"><i class=\"gg-sync\"></i></div>\r\n        </div>  \r\n        `;\r\n      $(\"#KeyboardShortcuts\").appendChild(li);\r\n\r\n      const input = li.querySelector(`[name=\"input\"]`);\r\n      const error = li.querySelector(`[name=\"error\"]`);\r\n      const removeKey = li.querySelector(`[name=\"removeKey\"]`);\r\n      const resetKey = li.querySelector(`[name=\"resetKey\"]`);\r\n\r\n      input.value = twpConfig.get(\"hotkeys\")[hotkeyname];\r\n      if (input.value) {\r\n        resetKey.style.display = \"none\";\r\n      } else {\r\n        removeKey.style.display = \"none\";\r\n      }\r\n\r\n      function setError(errorname) {\r\n        const text = twpI18n.getMessage(\"hotkeyError_\" + errorname);\r\n        switch (errorname) {\r\n          case \"ctrlOrAlt\":\r\n            error.textContent = text ? text : \"Include Ctrl or Alt\";\r\n            break;\r\n          case \"letter\":\r\n            error.textContent = text ? text : \"Type a letter\";\r\n            break;\r\n          case \"invalid\":\r\n            error.textContent = text ? text : \"Invalid combination\";\r\n            break;\r\n          default:\r\n            error.textContent = \"\";\r\n            break;\r\n        }\r\n      }\r\n\r\n      function getKeyString(e) {\r\n        let result = \"\";\r\n        if (e.ctrlKey) {\r\n          result += \"Ctrl+\";\r\n        }\r\n        if (e.altKey) {\r\n          result += \"Alt+\";\r\n        }\r\n        if (e.shiftKey) {\r\n          result += \"Shift+\";\r\n        }\r\n        if (e.code.match(/Key([A-Z])/)) {\r\n          result += e.code.match(/Key([A-Z])/)[1];\r\n        } else if (e.code.match(/Digit([0-9])/)) {\r\n          result += e.code.match(/Digit([0-9])/)[1];\r\n        }\r\n\r\n        return result;\r\n      }\r\n\r\n      function setShortcut(name, keystring) {\r\n        const hotkeys = twpConfig.get(\"hotkeys\");\r\n        hotkeys[hotkeyname] = keystring;\r\n        twpConfig.set(\"hotkeys\", hotkeys);\r\n        browser.commands.update({\r\n          name: name,\r\n          shortcut: keystring,\r\n        });\r\n      }\r\n\r\n      function onkeychange(e) {\r\n        input.value = getKeyString(e);\r\n\r\n        if (e.Key == \"Tab\") {\r\n          return;\r\n        }\r\n        if (e.key == \"Escape\") {\r\n          input.blur();\r\n          return;\r\n        }\r\n        if (e.key == \"Backspace\" || e.key == \"Delete\") {\r\n          setShortcut(hotkeyname, getKeyString(e));\r\n          input.blur();\r\n          return;\r\n        }\r\n        if (!e.ctrlKey && !e.altKey) {\r\n          setError(\"ctrlOrAlt\");\r\n          return;\r\n        }\r\n        if (e.ctrlKey && e.altKey && e.shiftKey) {\r\n          setError(\"invalid\");\r\n          return;\r\n        }\r\n        e.preventDefault();\r\n        if (!e.code.match(/Key([A-Z])/) && !e.code.match(/Digit([0-9])/)) {\r\n          setError(\"letter\");\r\n          return;\r\n        }\r\n\r\n        setShortcut(hotkeyname, getKeyString(e));\r\n        input.blur();\r\n\r\n        setError(\"none\");\r\n      }\r\n\r\n      input.onkeydown = (e) => onkeychange(e);\r\n      input.onkeyup = (e) => onkeychange(e);\r\n\r\n      input.onfocus = (e) => {\r\n        input.value = \"\";\r\n        setError(\"\");\r\n      };\r\n\r\n      input.onblur = (e) => {\r\n        input.value = twpConfig.get(\"hotkeys\")[hotkeyname];\r\n        setError(\"\");\r\n      };\r\n\r\n      removeKey.onclick = (e) => {\r\n        input.value = \"\";\r\n        setShortcut(hotkeyname, \"\");\r\n\r\n        removeKey.style.display = \"none\";\r\n        resetKey.style.display = \"block\";\r\n      };\r\n\r\n      resetKey.onclick = (e) => {\r\n        input.value = defaultShortcuts[hotkeyname];\r\n        setShortcut(hotkeyname, defaultShortcuts[hotkeyname]);\r\n\r\n        removeKey.style.display = \"block\";\r\n        resetKey.style.display = \"none\";\r\n      };\r\n\r\n      //*\r\n      if (typeof browser === \"undefined\") {\r\n        input.setAttribute(\"disabled\", \"\");\r\n        resetKey.style.display = \"none\";\r\n        removeKey.style.display = \"none\";\r\n      } else {\r\n        $(\"#openNativeShortcutManager\").style.display = \"none\";\r\n      }\r\n      // */\r\n    }\r\n\r\n    if (typeof chrome.commands !== \"undefined\") {\r\n      chrome.commands.getAll((results) => {\r\n        for (const result of results) {\r\n          addHotkey(result.name, result.description);\r\n        }\r\n      });\r\n    }\r\n\r\n    // privacy options\r\n    $(\"#useAlternativeService\").oninput = (e) => {\r\n      twpConfig.set(\"useAlternativeService\", e.target.value);\r\n    };\r\n    $(\"#useAlternativeService\").value = twpConfig.get(\"useAlternativeService\");\r\n\r\n    {\r\n      if (platformInfo.isMobile.any) {\r\n        $(\"#btnEnableDeepL\").setAttribute(\"disabled\", \"\");\r\n      }\r\n\r\n      const updateServiceSelector = (enabledServices) => {\r\n        document\r\n          .querySelectorAll(\"#pageTranslatorService option\")\r\n          .forEach((option) => option.setAttribute(\"hidden\", \"\"));\r\n        document\r\n          .querySelectorAll(\"#textTranslatorService option\")\r\n          .forEach((option) => option.setAttribute(\"hidden\", \"\"));\r\n        enabledServices.forEach((svName) => {\r\n          let option;\r\n          option = $(`#pageTranslatorService option[value=\"${svName}\"]`);\r\n          if (option) {\r\n            option.removeAttribute(\"hidden\");\r\n          }\r\n          option = $(`#textTranslatorService option[value=\"${svName}\"]`);\r\n          if (option) {\r\n            option.removeAttribute(\"hidden\");\r\n          }\r\n        });\r\n      };\r\n\r\n      const servicesInfo = [\r\n        { selector: \"#btnEnableGoogle\", svName: \"google\" },\r\n        { selector: \"#btnEnableBing\", svName: \"bing\" },\r\n        { selector: \"#btnEnableYandex\", svName: \"yandex\" },\r\n        { selector: \"#btnEnableDeepL\", svName: \"deepl\" },\r\n      ];\r\n\r\n      servicesInfo.forEach((svInfo) => {\r\n        $(svInfo.selector).oninput = (e) => {\r\n          const enabledServices = [];\r\n          let enabledCount = 0;\r\n          servicesInfo.forEach((_svInfo) => {\r\n            if ($(_svInfo.selector).checked) {\r\n              enabledCount++;\r\n            }\r\n          });\r\n          if (\r\n            enabledCount === 0 ||\r\n            (enabledCount === 1 && $(\"#btnEnableDeepL\").checked)\r\n          ) {\r\n            if (e.target === $(\"#btnEnableGoogle\")) {\r\n              $(\"#btnEnableBing\").checked = true;\r\n            } else {\r\n              $(\"#btnEnableGoogle\").checked = true;\r\n            }\r\n          }\r\n          servicesInfo.forEach((_svInfo) => {\r\n            if ($(_svInfo.selector).checked) {\r\n              enabledServices.push(_svInfo.svName);\r\n            }\r\n          });\r\n\r\n          if (\r\n            !enabledServices.includes(twpConfig.get(\"textTranslatorService\"))\r\n          ) {\r\n            twpConfig.set(\"textTranslatorService\", enabledServices[0]);\r\n          }\r\n          if (\r\n            !enabledServices.includes(twpConfig.get(\"pageTranslatorService\"))\r\n          ) {\r\n            twpConfig.set(\"pageTranslatorService\", enabledServices[0]);\r\n          }\r\n\r\n          const pageTranslationServices = [\"google\", \"bing\", \"yandex\"];\r\n          chrome.runtime.sendMessage(\r\n            {\r\n              action: \"restorePagesWithServiceNames\",\r\n              serviceNames: pageTranslationServices.filter(\r\n                (svName) => !enabledServices.includes(svName)\r\n              ),\r\n              newServiceName: twpConfig.get(\"pageTranslatorService\"),\r\n            },\r\n            checkedLastError\r\n          );\r\n\r\n          twpConfig.set(\"enabledServices\", enabledServices);\r\n\r\n          $(\"#pageTranslatorService\").value = twpConfig.get(\r\n            \"pageTranslatorService\"\r\n          );\r\n          $(\"#textTranslatorService\").value = twpConfig.get(\r\n            \"textTranslatorService\"\r\n          );\r\n          updateServiceSelector(enabledServices);\r\n        };\r\n        $(svInfo.selector).checked =\r\n          twpConfig.get(\"enabledServices\").indexOf(svInfo.svName) === -1\r\n            ? false\r\n            : true;\r\n\r\n        updateServiceSelector(twpConfig.get(\"enabledServices\"));\r\n      });\r\n    }\r\n\r\n    // storage options\r\n    $(\"#deleteTranslationCache\").onclick = (e) => {\r\n      if (confirm(twpI18n.getMessage(\"doYouWantToDeleteTranslationCache\"))) {\r\n        chrome.runtime.sendMessage(\r\n          {\r\n            action: \"deleteTranslationCache\",\r\n            reload: true,\r\n          },\r\n          checkedLastError\r\n        );\r\n      }\r\n    };\r\n\r\n    $(\"#enableDiskCache\").oninput = (e) => {\r\n      twpConfig.set(\"enableDiskCache\", $(\"#enableDiskCache\").value);\r\n    };\r\n    $(\"#enableDiskCache\").value = twpConfig.get(\"enableDiskCache\");\r\n\r\n    $(\"#backupToFile\").onclick = (e) => {\r\n      const configJSON = twpConfig.export();\r\n\r\n      const element = document.createElement(\"a\");\r\n      element.setAttribute(\r\n        \"href\",\r\n        \"data:text/plain;charset=utf-8,\" + encodeURIComponent(configJSON)\r\n      );\r\n      element.setAttribute(\r\n        \"download\",\r\n        \"twp-backup_\" +\r\n          new Date()\r\n            .toISOString()\r\n            .replace(/T/, \"_\")\r\n            .replace(/\\..+/, \"\")\r\n            .replace(/\\:/g, \".\") +\r\n          \".txt\"\r\n      );\r\n\r\n      element.style.display = \"none\";\r\n      document.body.appendChild(element);\r\n\r\n      element.click();\r\n\r\n      document.body.removeChild(element);\r\n    };\r\n    $(\"#restoreFromFile\").onclick = (e) => {\r\n      const element = document.createElement(\"input\");\r\n      element.setAttribute(\"type\", \"file\");\r\n      element.setAttribute(\"accept\", \"text/plain\");\r\n\r\n      element.style.display = \"none\";\r\n      document.body.appendChild(element);\r\n\r\n      element.oninput = (e) => {\r\n        const input = e.target;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = function () {\r\n          try {\r\n            if (confirm(twpI18n.getMessage(\"doYouWantOverwriteAllSettings\"))) {\r\n              twpConfig.import(reader.result);\r\n            }\r\n          } catch (e) {\r\n            alert(twpI18n.getMessage(\"fileIsCorrupted\"));\r\n            console.error(e);\r\n          }\r\n        };\r\n\r\n        reader.readAsText(input.files[0]);\r\n      };\r\n\r\n      element.click();\r\n\r\n      document.body.removeChild(element);\r\n    };\r\n    $(\"#resetToDefault\").onclick = (e) => {\r\n      if (confirm(twpI18n.getMessage(\"doYouWantRestoreSettings\"))) {\r\n        twpConfig.restoreToDefault();\r\n      }\r\n    };\r\n\r\n    // others options\r\n    $(\"#showReleaseNotes\").onchange = (e) => {\r\n      twpConfig.set(\"showReleaseNotes\", e.target.value);\r\n    };\r\n    $(\"#showReleaseNotes\").value = twpConfig.get(\"showReleaseNotes\");\r\n\r\n    $(\"#showPopupMobile\").onchange = (e) => {\r\n      twpConfig.set(\"showPopupMobile\", e.target.value);\r\n    };\r\n    $(\"#showPopupMobile\").value = twpConfig.get(\"showPopupMobile\");\r\n\r\n    $(\"#showTranslatePageContextMenu\").onchange = (e) => {\r\n      twpConfig.set(\"showTranslatePageContextMenu\", e.target.value);\r\n    };\r\n    $(\"#showTranslatePageContextMenu\").value = twpConfig.get(\r\n      \"showTranslatePageContextMenu\"\r\n    );\r\n\r\n    $(\"#showTranslateSelectedContextMenu\").onchange = (e) => {\r\n      twpConfig.set(\"showTranslateSelectedContextMenu\", e.target.value);\r\n    };\r\n    $(\"#showTranslateSelectedContextMenu\").value = twpConfig.get(\r\n      \"showTranslateSelectedContextMenu\"\r\n    );\r\n\r\n    $(\"#showButtonInTheAddressBar\").onchange = (e) => {\r\n      twpConfig.set(\"showButtonInTheAddressBar\", e.target.value);\r\n    };\r\n    $(\"#showButtonInTheAddressBar\").value = twpConfig.get(\r\n      \"showButtonInTheAddressBar\"\r\n    );\r\n\r\n    $(\"#translateClickingOnce\").onchange = (e) => {\r\n      twpConfig.set(\"translateClickingOnce\", e.target.value);\r\n    };\r\n    $(\"#translateClickingOnce\").value = twpConfig.get(\"translateClickingOnce\");\r\n\r\n    $(\"#btnCalculateStorage\").style.display = \"inline-block\";\r\n    $(\"#storageUsed\").style.display = \"none\";\r\n    $(\"#btnCalculateStorage\").onclick = (e) => {\r\n      $(\"#btnCalculateStorage\").style.display = \"none\";\r\n\r\n      chrome.runtime.sendMessage(\r\n        {\r\n          action: \"getCacheSize\",\r\n        },\r\n        (result) => {\r\n          checkedLastError();\r\n\r\n          $(\"#storageUsed\").textContent = result;\r\n          $(\"#storageUsed\").style.display = \"inline-block\";\r\n        }\r\n      );\r\n    };\r\n\r\n    // experimental options\r\n    $(\"#addLibre\").onclick = () => {\r\n      const libre = {\r\n        name: \"libre\",\r\n        url: $(\"#libreURL\").value,\r\n        apiKey: $(\"#libreKEY\").value,\r\n      };\r\n      try {\r\n        new URL(libre.url);\r\n        if (libre.apiKey.length < 10) {\r\n          throw new Error(\"Provides an API Key\");\r\n        }\r\n\r\n        const customServices = twpConfig.get(\"customServices\");\r\n\r\n        const index = customServices.findIndex((cs) => cs.name === \"libre\");\r\n        if (index !== -1) {\r\n          customServices.splice(index, 1);\r\n        }\r\n\r\n        customServices.push(libre);\r\n        twpConfig.set(\"customServices\", customServices);\r\n        chrome.runtime.sendMessage({ action: \"createLibreService\", libre });\r\n      } catch (e) {\r\n        alert(e);\r\n      }\r\n    };\r\n\r\n    $(\"#removeLibre\").onclick = () => {\r\n      const customServices = twpConfig.get(\"customServices\");\r\n      const index = customServices.findIndex((cs) => cs.name === \"libre\");\r\n\r\n      if (index !== -1) {\r\n        customServices.splice(index, 1);\r\n        twpConfig.set(\"customServices\", customServices);\r\n        chrome.runtime.sendMessage(\r\n          { action: \"removeLibreService\" },\r\n          checkedLastError\r\n        );\r\n      }\r\n\r\n      if (twpConfig.get(\"textTranslatorService\") === \"libre\") {\r\n        twpConfig.set(\r\n          \"textTranslatorService\",\r\n          twpConfig.get(\"pageTranslatorService\")\r\n        );\r\n      }\r\n\r\n      $(\"#libreURL\").value = \"\";\r\n      $(\"#libreKEY\").value = \"\";\r\n    };\r\n\r\n    const libre = twpConfig\r\n      .get(\"customServices\")\r\n      .find((cs) => cs.name === \"libre\");\r\n    if (libre) {\r\n      $(\"#libreURL\").value = libre.url;\r\n      $(\"#libreKEY\").value = libre.apiKey;\r\n    }\r\n\r\n    async function testDeepLFreeApiKey(apiKey) {\r\n      return await new Promise((resolve) => {\r\n        const xhttp = new XMLHttpRequest();\r\n        xhttp.open(\"GET\", \"https://api-free.deepl.com/v2/usage\");\r\n        xhttp.responseType = \"json\";\r\n        xhttp.setRequestHeader(\"Authorization\", \"DeepL-Auth-Key \" + apiKey);\r\n        xhttp.onload = () => {\r\n          resolve(xhttp.response);\r\n        };\r\n        xhttp.send();\r\n      });\r\n    }\r\n\r\n    $(\"#addDeepL\").onclick = async () => {\r\n      const deepl_freeapi = {\r\n        name: \"deepl_freeapi\",\r\n        apiKey: $(\"#deeplKEY\").value,\r\n      };\r\n      try {\r\n        const response = await testDeepLFreeApiKey(deepl_freeapi.apiKey);\r\n        $(\"#deeplApiResponse\").textContent = JSON.stringify(response);\r\n        if (response) {\r\n          const customServices = twpConfig.get(\"customServices\");\r\n\r\n          const index = customServices.findIndex(\r\n            (cs) => cs.name === \"deepl_freeapi\"\r\n          );\r\n          if (index !== -1) {\r\n            customServices.splice(index, 1);\r\n          }\r\n\r\n          customServices.push(deepl_freeapi);\r\n          twpConfig.set(\"customServices\", customServices);\r\n          chrome.runtime.sendMessage({\r\n            action: \"createDeeplFreeApiService\",\r\n            deepl_freeapi,\r\n          });\r\n        } else {\r\n          alert(\"Invalid API key\");\r\n        }\r\n      } catch (e) {\r\n        alert(e);\r\n      }\r\n    };\r\n\r\n    $(\"#removeDeepL\").onclick = () => {\r\n      const customServices = twpConfig.get(\"customServices\");\r\n      const index = customServices.findIndex(\r\n        (cs) => cs.name === \"deepl_freeapi\"\r\n      );\r\n      if (index !== -1) {\r\n        customServices.splice(index, 1);\r\n        twpConfig.set(\"customServices\", customServices);\r\n        chrome.runtime.sendMessage(\r\n          { action: \"removeDeeplFreeApiService\" },\r\n          checkedLastError\r\n        );\r\n      }\r\n      $(\"#deeplKEY\").value = \"\";\r\n      $(\"#deeplApiResponse\").textContent = \"\";\r\n    };\r\n\r\n    const deepl_freeapi = twpConfig\r\n      .get(\"customServices\")\r\n      .find((cs) => cs.name === \"deepl_freeapi\");\r\n    if (deepl_freeapi) {\r\n      $(\"#deeplKEY\").value = deepl_freeapi.apiKey;\r\n      testDeepLFreeApiKey(deepl_freeapi.apiKey).then((response) => {\r\n        $(\"#deeplApiResponse\").textContent = JSON.stringify(response);\r\n      });\r\n    }\r\n\r\n    // donation options\r\n    if (navigator.language === \"pt-BR\") {\r\n      $(\"#currency\").value = \"BRL\";\r\n      $(\"#donateInUSD\").style.display = \"none\";\r\n    } else {\r\n      $(\"#currency\").value = \"USD\";\r\n      $(\"#donateInBRL\").style.display = \"none\";\r\n    }\r\n\r\n    $(\"#currency\").onchange = (e) => {\r\n      if (e.target.value === \"BRL\") {\r\n        $(\"#donateInUSD\").style.display = \"none\";\r\n        $(\"#donateInBRL\").style.display = \"block\";\r\n      } else {\r\n        $(\"#donateInUSD\").style.display = \"block\";\r\n        $(\"#donateInBRL\").style.display = \"none\";\r\n      }\r\n    };\r\n  });\r\n\r\nwindow.scrollTo({\r\n  top: 0,\r\n});\r\n"],"mappings":"AAAA,YAAY;;AAEZA,KAAK,CAAC,yBAAyB,CAAC,CAC7BC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,YAAY,IAAK;EACtBC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EACrBC,QAAQ,CAACC,cAAc,CAAC,eAAe,CAAC,CAACC,SAAS,GAAGL,YAAY;EACjEG,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC,CAACE,WAAW,GACtDC,OAAO,CAACC,UAAU,CAAC,mBAAmB,CAAC;EACzCL,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC,CAACC,SAAS,GAAGF,QAAQ,CAC9DC,cAAc,CAAC,mBAAmB,CAAC,CACnCE,WAAW,CAACG,OAAO,CAClB,kBAAkB,EAClB,KAAK,GAAGC,MAAM,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC,CAACC,IAAI,GAAG,MAC9C,CAAC,CACAJ,OAAO,CACN,qBAAqB,EACrB,KAAK,GAAGC,MAAM,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC,CAACE,OAAO,GAAG,MACjD,CAAC;EACHX,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC,CAACE,WAAW,GACjDC,OAAO,CAACC,UAAU,CAAC,cAAc,CAAC;;EAEpC;EACA,IAAIO,SAAS,CAACC,QAAQ,KAAK,OAAO,EAAE;IAClCC,CAAC,CAAC,YAAY,CAAC,CAACC,KAAK,GAAG,KAAK;IAC7BD,CAAC,CAAC,eAAe,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;EAC3C,CAAC,MAAM;IACLH,CAAC,CAAC,YAAY,CAAC,CAACC,KAAK,GAAG,KAAK;IAC7BD,CAAC,CAAC,eAAe,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;EAC3C;EAEAH,CAAC,CAAC,YAAY,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAChC,IAAIA,CAAC,CAACC,MAAM,CAACL,KAAK,KAAK,KAAK,EAAE;MAC5BD,CAAC,CAAC,eAAe,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;MACzCH,CAAC,CAAC,eAAe,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,OAAO;IAC5C,CAAC,MAAM;MACLH,CAAC,CAAC,eAAe,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,OAAO;MAC1CH,CAAC,CAAC,eAAe,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;IAC3C;EACF,CAAC;AACH,CAAC,CAAC;AAEJ,IAAIH,CAAC,GAAGd,QAAQ,CAACqB,aAAa,CAACC,IAAI,CAACtB,QAAQ,CAAC;AAE7CuB,SAAS,CACNC,OAAO,CAAC,CAAC,CACT9B,IAAI,CAAC,MACJU,OAAO,CAACqB,gBAAgB,CAACC,cAAc,CAACC,OAAO,CAAC,qBAAqB,CAAC,CACxE,CAAC,CACAjC,IAAI,CAAC,MAAM;EACVU,OAAO,CAACwB,iBAAiB,CAAC,CAAC;EAC3B5B,QAAQ,CAACqB,aAAa,CAAC,kCAAkC,CAAC,CAAClB,WAAW,GACpEC,OAAO,CAACC,UAAU,CAAC,oBAAoB,CAAC,GAAG,qBAAqB;EAElE,MAAMwB,mBAAmB,GAAGH,cAAc,CAACC,OAAO,CAAC,qBAAqB,CAAC;EACzED,cAAc,CAACI,UAAU,CAAC,qBAAqB,CAAC;EAEhD,IAAIC,YAAY,CAACC,QAAQ,CAACC,GAAG,EAAE;IAC7B,IAAIjB,KAAK,GAAGhB,QAAQ,CAACkC,aAAa,CAAC,OAAO,CAAC;IAC3ClB,KAAK,CAACb,WAAW,GAAG,yCAAyC;IAC7DH,QAAQ,CAACmC,IAAI,CAACC,WAAW,CAACpB,KAAK,CAAC;EAClC;EAEA,IAAI,CAACT,MAAM,CAAC8B,UAAU,EAAE;IACtB,IAAIrB,KAAK,GAAGhB,QAAQ,CAACkC,aAAa,CAAC,OAAO,CAAC;IAC3ClB,KAAK,CAACb,WAAW,GAAG,0CAA0C;IAC9DH,QAAQ,CAACmC,IAAI,CAACC,WAAW,CAACpB,KAAK,CAAC;EAClC;EAEA,IAAIsB,gBAAgB,GAAG,KAAK;EAC5BxB,CAAC,CAAC,cAAc,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IACjCL,CAAC,CAAC,gBAAgB,CAAC,CAAC0B,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;IAE9C,IAAIH,gBAAgB,EAAE;MACpBxB,CAAC,CAAC,UAAU,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;MACpCqB,gBAAgB,GAAG,KAAK;IAC1B,CAAC,MAAM;MACLxB,CAAC,CAAC,UAAU,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,OAAO;MACrCqB,gBAAgB,GAAG,IAAI;IACzB;EACF,CAAC;EAED,SAASI,UAAUA,CAAA,EAAG;IACpB,MAAMC,IAAI,GAAGC,QAAQ,CAACD,IAAI,IAAI,YAAY;IAC1C,MAAME,IAAI,GAAG,CACX/B,CAAC,CAAC,YAAY,CAAC,EACfA,CAAC,CAAC,QAAQ,CAAC,EACXA,CAAC,CAAC,eAAe,CAAC,EAClBA,CAAC,CAAC,QAAQ,CAAC,EACXA,CAAC,CAAC,UAAU,CAAC,EACbA,CAAC,CAAC,UAAU,CAAC,EACbA,CAAC,CAAC,UAAU,CAAC,EACbA,CAAC,CAAC,SAAS,CAAC,EACZA,CAAC,CAAC,eAAe,CAAC,EAClBA,CAAC,CAAC,WAAW,CAAC,EACdA,CAAC,CAAC,gBAAgB,CAAC,CACpB;IACD+B,IAAI,CAACC,OAAO,CAAEC,OAAO,IAAK;MACxBA,OAAO,CAAC/B,KAAK,CAACC,OAAO,GAAG,MAAM;IAChC,CAAC,CAAC;IAEFjB,QAAQ,CAACgD,gBAAgB,CAAC,OAAO,CAAC,CAACF,OAAO,CAAEG,CAAC,IAAK;MAChDA,CAAC,CAACT,SAAS,CAACU,MAAM,CAAC,eAAe,CAAC;IACrC,CAAC,CAAC;IAEFpC,CAAC,CAAC6B,IAAI,CAAC,CAAC3B,KAAK,CAACC,OAAO,GAAG,OAAO;IAC/BH,CAAC,CAAC,UAAU,GAAG6B,IAAI,GAAG,IAAI,CAAC,CAACH,SAAS,CAACW,GAAG,CAAC,eAAe,CAAC;IAE1D,IAAIvD,IAAI;IACR,IAAI+C,IAAI,KAAK,WAAW,EAAE;MACxB/C,IAAI,GAAGQ,OAAO,CAACC,UAAU,CAAC,iBAAiB,CAAC;IAC9C,CAAC,MAAM,IAAIsC,IAAI,KAAK,gBAAgB,EAAE;MACpC/C,IAAI,GAAGQ,OAAO,CAACC,UAAU,CAAC,iBAAiB,CAAC;IAC9C,CAAC,MAAM;MACLT,IAAI,GAAGQ,OAAO,CAACC,UAAU,CAAC,aAAa,CAAC;IAC1C;IACAS,CAAC,CAAC,mBAAmB,CAAC,CAACX,WAAW,GAAGP,IAAI;IAEzC,IAAI0C,gBAAgB,EAAE;MACpBxB,CAAC,CAAC,gBAAgB,CAAC,CAAC0B,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;MAC9C3B,CAAC,CAAC,UAAU,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;MACpCqB,gBAAgB,GAAG,KAAK;IAC1B;IAEA,IAAIK,IAAI,KAAK,gBAAgB,EAAE;MAC7B7B,CAAC,CAAC,aAAa,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;IACzC,CAAC,MAAM;MACLH,CAAC,CAAC,aAAa,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,OAAO;IAC1C;IAEA,IAAI0B,IAAI,KAAK,eAAe,EAAE;MAC5B7B,CAAC,CAAC,eAAe,CAAC,CAACsC,YAAY,CAC7BtC,CAAC,CAAC,yBAAyB,CAAC,EAC5BA,CAAC,CAAC,eAAe,CAAC,CAACuC,UACrB,CAAC;IACH,CAAC,MAAM,IAAIV,IAAI,KAAK,UAAU,EAAE;MAC9B7B,CAAC,CAAC,UAAU,CAAC,CAACsC,YAAY,CACxBtC,CAAC,CAAC,yBAAyB,CAAC,EAC5BA,CAAC,CAAC,UAAU,CAAC,CAACuC,UAChB,CAAC;IACH;EACF;EACAX,UAAU,CAAC,CAAC;EACZ5C,MAAM,CAACwD,gBAAgB,CAAC,YAAY,EAAEZ,UAAU,CAAC;EAEjD,SAASa,gBAAgBA,CAACC,MAAM,EAAE;IAChC,IAAIC,KAAK,GAAGC,OAAO,CAACC,eAAe,CAAC,CAAC;IAErC,MAAMC,WAAW,GAAG,EAAE;IAEtB,KAAK,MAAMC,CAAC,IAAIJ,KAAK,EAAE;MACrBG,WAAW,CAACE,IAAI,CAAC,CAACD,CAAC,EAAEJ,KAAK,CAACI,CAAC,CAAC,CAAC,CAAC;IACjC;IAEAD,WAAW,CAACG,IAAI,CAAC,UAAUd,CAAC,EAAEe,CAAC,EAAE;MAC/B,OAAOf,CAAC,CAAC,CAAC,CAAC,CAACgB,aAAa,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC,CAAC;IAEFJ,WAAW,CAACd,OAAO,CAAE/B,KAAK,IAAK;MAC7B,MAAMmD,MAAM,GAAGlE,QAAQ,CAACkC,aAAa,CAAC,QAAQ,CAAC;MAC/CgC,MAAM,CAACnD,KAAK,GAAGA,KAAK,CAAC,CAAC,CAAC;MACvBmD,MAAM,CAAC/D,WAAW,GAAGY,KAAK,CAAC,CAAC,CAAC;MAC7ByC,MAAM,CAACpB,WAAW,CAAC8B,MAAM,CAAC;IAC5B,CAAC,CAAC;EACJ;EAEAX,gBAAgB,CAACzC,CAAC,CAAC,uBAAuB,CAAC,CAAC;EAC5CyC,gBAAgB,CAACzC,CAAC,CAAC,8BAA8B,CAAC,CAAC;EAEnDyC,gBAAgB,CAACzC,CAAC,CAAC,oBAAoB,CAAC,CAAC;EACzCyC,gBAAgB,CAACzC,CAAC,CAAC,oBAAoB,CAAC,CAAC;EACzCyC,gBAAgB,CAACzC,CAAC,CAAC,oBAAoB,CAAC,CAAC;EAEzCyC,gBAAgB,CAACzC,CAAC,CAAC,2BAA2B,CAAC,CAAC;EAChDyC,gBAAgB,CAACzC,CAAC,CAAC,4BAA4B,CAAC,CAAC;EACjDyC,gBAAgB,CAACzC,CAAC,CAAC,iCAAiC,CAAC,CAAC;EAEtD,SAASqD,cAAcA,CAAA,EAAG;IACxB,QAAQ5C,SAAS,CAAC6C,GAAG,CAAC,UAAU,CAAC;MAC/B,KAAK,MAAM;QACT,IAAIC,UAAU,CAAC,8BAA8B,CAAC,CAACC,OAAO,EAAE;UACtDC,cAAc,CAAC,CAAC;QAClB,CAAC,MAAM;UACLC,eAAe,CAAC,CAAC;QACnB;QACA;MACF,KAAK,KAAK;QACRD,cAAc,CAAC,CAAC;QAChB;MACF,KAAK,IAAI;QACPC,eAAe,CAAC,CAAC;QACjB;MACF;QACE;IACJ;EACF;EACAL,cAAc,CAAC,CAAC;;EAEhB;EACArD,CAAC,CAAC,mBAAmB,CAAC,CAACC,KAAK,GAC1Bc,mBAAmB,IAAIN,SAAS,CAAC6C,GAAG,CAAC,YAAY,CAAC;EACpDtD,CAAC,CAAC,mBAAmB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACvC,IAAIA,CAAC,CAACC,MAAM,CAACL,KAAK,KAAK,SAAS,EAAE;MAChCQ,SAAS,CAACkD,GAAG,CAAC,YAAY,EAAE,SAAS,CAAC;IACxC,CAAC,MAAM;MACL/C,cAAc,CAACgD,OAAO,CAAC,qBAAqB,EAAEvD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;IAC/D;IACA6B,QAAQ,CAAC+B,MAAM,CAAC,CAAC;EACnB,CAAC;EACD7D,CAAC,CAAC,qBAAqB,CAAC,CAACyB,OAAO,GAAG,MAAM;IACvC,IAAIV,mBAAmB,EAAE;MACvBN,SAAS,CAACkD,GAAG,CACX,YAAY,EACZ5C,mBAAmB,KAAK,SAAS,GAC7B,SAAS,GACT6B,OAAO,CAACkB,iBAAiB,CAAC/C,mBAAmB,CACnD,CAAC;MACDe,QAAQ,CAAC+B,MAAM,CAAC,CAAC;IACnB;EACF,CAAC;EAED,MAAME,cAAc,GAAGtD,SAAS,CAAC6C,GAAG,CAAC,gBAAgB,CAAC;EACtDtD,CAAC,CAAC,uBAAuB,CAAC,CAACC,KAAK,GAAG8D,cAAc;EACjD/D,CAAC,CAAC,uBAAuB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAC3CI,SAAS,CAACuD,iBAAiB,CAAC3D,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;IAC3C6B,QAAQ,CAAC+B,MAAM,CAAC,CAAC;EACnB,CAAC;EAED,MAAMI,6BAA6B,GAAGxD,SAAS,CAAC6C,GAAG,CACjD,+BACF,CAAC;EACDtD,CAAC,CAAC,8BAA8B,CAAC,CAACC,KAAK,GAAGgE,6BAA6B;EACvEjE,CAAC,CAAC,8BAA8B,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAClDI,SAAS,CAACuD,iBAAiB,CAAC3D,CAAC,CAACC,MAAM,CAACL,KAAK,EAAE,IAAI,CAAC;IACjDQ,SAAS,CAACuD,iBAAiB,CAACD,cAAc,EAAE,KAAK,CAAC;IAClDjC,QAAQ,CAAC+B,MAAM,CAAC,CAAC;EACnB,CAAC;EAED,MAAMK,eAAe,GAAGzD,SAAS,CAAC6C,GAAG,CAAC,iBAAiB,CAAC;EAExDtD,CAAC,CAAC,oBAAoB,CAAC,CAACC,KAAK,GAAGiE,eAAe,CAAC,CAAC,CAAC;EAClDlE,CAAC,CAAC,oBAAoB,CAAC,CAACC,KAAK,GAAGiE,eAAe,CAAC,CAAC,CAAC;EAClDlE,CAAC,CAAC,oBAAoB,CAAC,CAACC,KAAK,GAAGiE,eAAe,CAAC,CAAC,CAAC;EAElDlE,CAAC,CAAC,oBAAoB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACxC6D,eAAe,CAAC,CAAC,CAAC,GAAG7D,CAAC,CAACC,MAAM,CAACL,KAAK;IACnCQ,SAAS,CAACkD,GAAG,CAAC,iBAAiB,EAAEO,eAAe,CAAC;IACjD,IAAIA,eAAe,CAACC,OAAO,CAAC1D,SAAS,CAAC6C,GAAG,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;MAClE7C,SAAS,CAACkD,GAAG,CAAC,gBAAgB,EAAEO,eAAe,CAAC,CAAC,CAAC,CAAC;IACrD;IACA,IACEA,eAAe,CAACC,OAAO,CACrB1D,SAAS,CAAC6C,GAAG,CAAC,+BAA+B,CAC/C,CAAC,IAAI,CAAC,CAAC,EACP;MACA7C,SAAS,CAACkD,GAAG,CAAC,+BAA+B,EAAEO,eAAe,CAAC,CAAC,CAAC,CAAC;IACpE;IACApC,QAAQ,CAAC+B,MAAM,CAAC,CAAC;EACnB,CAAC;EAED7D,CAAC,CAAC,oBAAoB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACxC6D,eAAe,CAAC,CAAC,CAAC,GAAG7D,CAAC,CAACC,MAAM,CAACL,KAAK;IACnCQ,SAAS,CAACkD,GAAG,CAAC,iBAAiB,EAAEO,eAAe,CAAC;IACjD,IAAIA,eAAe,CAACC,OAAO,CAAC1D,SAAS,CAAC6C,GAAG,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;MAClE7C,SAAS,CAACkD,GAAG,CAAC,gBAAgB,EAAEO,eAAe,CAAC,CAAC,CAAC,CAAC;IACrD;IACA,IACEA,eAAe,CAACC,OAAO,CACrB1D,SAAS,CAAC6C,GAAG,CAAC,+BAA+B,CAC/C,CAAC,IAAI,CAAC,CAAC,EACP;MACA7C,SAAS,CAACkD,GAAG,CAAC,+BAA+B,EAAEO,eAAe,CAAC,CAAC,CAAC,CAAC;IACpE;IACApC,QAAQ,CAAC+B,MAAM,CAAC,CAAC;EACnB,CAAC;EAED7D,CAAC,CAAC,oBAAoB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACxC6D,eAAe,CAAC,CAAC,CAAC,GAAG7D,CAAC,CAACC,MAAM,CAACL,KAAK;IACnCQ,SAAS,CAACkD,GAAG,CAAC,iBAAiB,EAAEO,eAAe,CAAC;IACjD,IAAIA,eAAe,CAACC,OAAO,CAAC1D,SAAS,CAAC6C,GAAG,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;MAClE7C,SAAS,CAACkD,GAAG,CAAC,gBAAgB,EAAEO,eAAe,CAAC,CAAC,CAAC,CAAC;IACrD;IACA,IACEA,eAAe,CAACC,OAAO,CACrB1D,SAAS,CAAC6C,GAAG,CAAC,+BAA+B,CAC/C,CAAC,IAAI,CAAC,CAAC,EACP;MACA7C,SAAS,CAACkD,GAAG,CAAC,+BAA+B,EAAEO,eAAe,CAAC,CAAC,CAAC,CAAC;IACpE;IACApC,QAAQ,CAAC+B,MAAM,CAAC,CAAC;EACnB,CAAC;;EAED;;EAEA,SAASO,mCAAmCA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;IAC/D,MAAMC,EAAE,GAAGrF,QAAQ,CAACkC,aAAa,CAAC,IAAI,CAAC;IACvCmD,EAAE,CAACC,YAAY,CAAC,OAAO,EAAE,sBAAsB,CAAC;IAChDD,EAAE,CAACtE,KAAK,GAAGoE,QAAQ;IACnBE,EAAE,CAAClF,WAAW,GAAGiF,QAAQ;IAEzB,MAAMG,KAAK,GAAGvF,QAAQ,CAACkC,aAAa,CAAC,MAAM,CAAC;IAC5CqD,KAAK,CAACD,YAAY,CAAC,OAAO,EAAE,2CAA2C,CAAC;IACxEC,KAAK,CAACrF,SAAS,GAAG,SAAS;IAE3BqF,KAAK,CAAChD,OAAO,GAAIpB,CAAC,IAAK;MACrBA,CAAC,CAACqE,cAAc,CAAC,CAAC;MAElBjE,SAAS,CAACkE,4BAA4B,CAACN,QAAQ,CAAC;MAChDE,EAAE,CAACnC,MAAM,CAAC,CAAC;IACb,CAAC;IAEDmC,EAAE,CAACjD,WAAW,CAACmD,KAAK,CAAC;IAErB,OAAOF,EAAE;EACX;EAEA,MAAMK,mBAAmB,GAAGnE,SAAS,CAAC6C,GAAG,CAAC,qBAAqB,CAAC;EAChEsB,mBAAmB,CAAC3B,IAAI,CAAC,CAACd,CAAC,EAAEe,CAAC,KAAKf,CAAC,CAACgB,aAAa,CAACD,CAAC,CAAC,CAAC;EACtD0B,mBAAmB,CAAC5C,OAAO,CAAEqC,QAAQ,IAAK;IACxC,MAAMC,QAAQ,GAAG1B,OAAO,CAACiC,cAAc,CAACR,QAAQ,CAAC;IACjD,MAAME,EAAE,GAAGH,mCAAmC,CAACC,QAAQ,EAAEC,QAAQ,CAAC;IAClEtE,CAAC,CAAC,sBAAsB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;EAC3C,CAAC,CAAC;EAEFvE,CAAC,CAAC,2BAA2B,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAC/C,MAAMgE,QAAQ,GAAGhE,CAAC,CAACC,MAAM,CAACL,KAAK;IAC/B,MAAMqE,QAAQ,GAAG1B,OAAO,CAACiC,cAAc,CAACR,QAAQ,CAAC;IACjD,MAAME,EAAE,GAAGH,mCAAmC,CAACC,QAAQ,EAAEC,QAAQ,CAAC;IAClEtE,CAAC,CAAC,sBAAsB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;IAEzC9D,SAAS,CAACqE,uBAAuB,CAACT,QAAQ,CAAC;EAC7C,CAAC;;EAED;;EAEA,SAASU,oCAAoCA,CAACV,QAAQ,EAAEC,QAAQ,EAAE;IAChE,MAAMC,EAAE,GAAGrF,QAAQ,CAACkC,aAAa,CAAC,IAAI,CAAC;IACvCmD,EAAE,CAACC,YAAY,CAAC,OAAO,EAAE,sBAAsB,CAAC;IAChDD,EAAE,CAACtE,KAAK,GAAGoE,QAAQ;IACnBE,EAAE,CAAClF,WAAW,GAAGiF,QAAQ;IAEzB,MAAMG,KAAK,GAAGvF,QAAQ,CAACkC,aAAa,CAAC,MAAM,CAAC;IAC5CqD,KAAK,CAACD,YAAY,CAAC,OAAO,EAAE,2CAA2C,CAAC;IACxEC,KAAK,CAACrF,SAAS,GAAG,SAAS;IAE3BqF,KAAK,CAAChD,OAAO,GAAIpB,CAAC,IAAK;MACrBA,CAAC,CAACqE,cAAc,CAAC,CAAC;MAElBjE,SAAS,CAACuE,6BAA6B,CAACX,QAAQ,CAAC;MACjDE,EAAE,CAACnC,MAAM,CAAC,CAAC;IACb,CAAC;IAEDmC,EAAE,CAACjD,WAAW,CAACmD,KAAK,CAAC;IAErB,OAAOF,EAAE;EACX;EAEA,MAAMU,oBAAoB,GAAGxE,SAAS,CAAC6C,GAAG,CAAC,sBAAsB,CAAC;EAClE2B,oBAAoB,CAAChC,IAAI,CAAC,CAACd,CAAC,EAAEe,CAAC,KAAKf,CAAC,CAACgB,aAAa,CAACD,CAAC,CAAC,CAAC;EACvD+B,oBAAoB,CAACjD,OAAO,CAAEqC,QAAQ,IAAK;IACzC,MAAMC,QAAQ,GAAG1B,OAAO,CAACiC,cAAc,CAACR,QAAQ,CAAC;IACjD,MAAME,EAAE,GAAGQ,oCAAoC,CAACV,QAAQ,EAAEC,QAAQ,CAAC;IACnEtE,CAAC,CAAC,uBAAuB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;EAC5C,CAAC,CAAC;EAEFvE,CAAC,CAAC,4BAA4B,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAChD,MAAMgE,QAAQ,GAAGhE,CAAC,CAACC,MAAM,CAACL,KAAK;IAC/B,MAAMqE,QAAQ,GAAG1B,OAAO,CAACiC,cAAc,CAACR,QAAQ,CAAC;IACjD,MAAME,EAAE,GAAGQ,oCAAoC,CAACV,QAAQ,EAAEC,QAAQ,CAAC;IACnEtE,CAAC,CAAC,uBAAuB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;IAE1C9D,SAAS,CAACyE,wBAAwB,CAACb,QAAQ,CAAC;EAC9C,CAAC;;EAED;;EAEA,SAASc,4CAA4CA,CAACd,QAAQ,EAAEC,QAAQ,EAAE;IACxE,MAAMC,EAAE,GAAGrF,QAAQ,CAACkC,aAAa,CAAC,IAAI,CAAC;IACvCmD,EAAE,CAACC,YAAY,CAAC,OAAO,EAAE,sBAAsB,CAAC;IAChDD,EAAE,CAACtE,KAAK,GAAGoE,QAAQ;IACnBE,EAAE,CAAClF,WAAW,GAAGiF,QAAQ;IAEzB,MAAMG,KAAK,GAAGvF,QAAQ,CAACkC,aAAa,CAAC,MAAM,CAAC;IAC5CqD,KAAK,CAACD,YAAY,CAAC,OAAO,EAAE,2CAA2C,CAAC;IACxEC,KAAK,CAACrF,SAAS,GAAG,SAAS;IAE3BqF,KAAK,CAAChD,OAAO,GAAIpB,CAAC,IAAK;MACrBA,CAAC,CAACqE,cAAc,CAAC,CAAC;MAElBjE,SAAS,CAAC2E,mCAAmC,CAACf,QAAQ,CAAC;MACvDE,EAAE,CAACnC,MAAM,CAAC,CAAC;IACb,CAAC;IAEDmC,EAAE,CAACjD,WAAW,CAACmD,KAAK,CAAC;IAErB,OAAOF,EAAE;EACX;EAEA,MAAMc,4BAA4B,GAAG5E,SAAS,CAAC6C,GAAG,CAChD,8BACF,CAAC;EACD+B,4BAA4B,CAACpC,IAAI,CAAC,CAACd,CAAC,EAAEe,CAAC,KAAKf,CAAC,CAACgB,aAAa,CAACD,CAAC,CAAC,CAAC;EAC/DmC,4BAA4B,CAACrD,OAAO,CAAEqC,QAAQ,IAAK;IACjD,MAAMC,QAAQ,GAAG1B,OAAO,CAACiC,cAAc,CAACR,QAAQ,CAAC;IACjD,MAAME,EAAE,GAAGY,4CAA4C,CACrDd,QAAQ,EACRC,QACF,CAAC;IACDtE,CAAC,CAAC,+BAA+B,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;EACpD,CAAC,CAAC;EAEFvE,CAAC,CAAC,iCAAiC,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACrD,MAAMgE,QAAQ,GAAGhE,CAAC,CAACC,MAAM,CAACL,KAAK;IAC/B,MAAMqE,QAAQ,GAAG1B,OAAO,CAACiC,cAAc,CAACR,QAAQ,CAAC;IACjD,MAAME,EAAE,GAAGY,4CAA4C,CACrDd,QAAQ,EACRC,QACF,CAAC;IACDtE,CAAC,CAAC,+BAA+B,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;IAElD9D,SAAS,CAAC6E,8BAA8B,CAACjB,QAAQ,CAAC;EACpD,CAAC;;EAED;;EAEA,SAASkB,oCAAoCA,CAACC,QAAQ,EAAE;IACtD,MAAMjB,EAAE,GAAGrF,QAAQ,CAACkC,aAAa,CAAC,IAAI,CAAC;IACvCmD,EAAE,CAACC,YAAY,CAAC,OAAO,EAAE,sBAAsB,CAAC;IAChDD,EAAE,CAACtE,KAAK,GAAGuF,QAAQ;IACnBjB,EAAE,CAAClF,WAAW,GAAGmG,QAAQ;IAEzB,MAAMf,KAAK,GAAGvF,QAAQ,CAACkC,aAAa,CAAC,MAAM,CAAC;IAC5CqD,KAAK,CAACD,YAAY,CAAC,OAAO,EAAE,2CAA2C,CAAC;IACxEC,KAAK,CAACrF,SAAS,GAAG,SAAS;IAE3BqF,KAAK,CAAChD,OAAO,GAAIpB,CAAC,IAAK;MACrBA,CAAC,CAACqE,cAAc,CAAC,CAAC;MAElBjE,SAAS,CAACgF,6BAA6B,CAACD,QAAQ,CAAC;MACjDjB,EAAE,CAACnC,MAAM,CAAC,CAAC;IACb,CAAC;IAEDmC,EAAE,CAACjD,WAAW,CAACmD,KAAK,CAAC;IAErB,OAAOF,EAAE;EACX;EAEA,MAAMmB,oBAAoB,GAAGjF,SAAS,CAAC6C,GAAG,CAAC,sBAAsB,CAAC;EAClEoC,oBAAoB,CAACzC,IAAI,CAAC,CAACd,CAAC,EAAEe,CAAC,KAAKf,CAAC,CAACgB,aAAa,CAACD,CAAC,CAAC,CAAC;EACvDwC,oBAAoB,CAAC1D,OAAO,CAAEwD,QAAQ,IAAK;IACzC,MAAMjB,EAAE,GAAGgB,oCAAoC,CAACC,QAAQ,CAAC;IACzDxF,CAAC,CAAC,uBAAuB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;EAC5C,CAAC,CAAC;EAEFvE,CAAC,CAAC,4BAA4B,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IAC/C,MAAMmF,QAAQ,GAAGG,MAAM,CAAC,yBAAyB,EAAE,cAAc,CAAC;IAClE,IAAI,CAACH,QAAQ,EAAE;IAEf,MAAMjB,EAAE,GAAGgB,oCAAoC,CAACC,QAAQ,CAAC;IACzDxF,CAAC,CAAC,uBAAuB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;IAE1C9D,SAAS,CAACmF,wBAAwB,CAACJ,QAAQ,CAAC;EAC9C,CAAC;;EAED;;EAEA,SAASK,mCAAmCA,CAACL,QAAQ,EAAE;IACrD,MAAMjB,EAAE,GAAGrF,QAAQ,CAACkC,aAAa,CAAC,IAAI,CAAC;IACvCmD,EAAE,CAACC,YAAY,CAAC,OAAO,EAAE,sBAAsB,CAAC;IAChDD,EAAE,CAACtE,KAAK,GAAGuF,QAAQ;IACnBjB,EAAE,CAAClF,WAAW,GAAGmG,QAAQ;IAEzB,MAAMf,KAAK,GAAGvF,QAAQ,CAACkC,aAAa,CAAC,MAAM,CAAC;IAC5CqD,KAAK,CAACD,YAAY,CAAC,OAAO,EAAE,2CAA2C,CAAC;IACxEC,KAAK,CAACrF,SAAS,GAAG,SAAS;IAE3BqF,KAAK,CAAChD,OAAO,GAAIpB,CAAC,IAAK;MACrBA,CAAC,CAACqE,cAAc,CAAC,CAAC;MAElBjE,SAAS,CAACqF,4BAA4B,CAACN,QAAQ,CAAC;MAChDjB,EAAE,CAACnC,MAAM,CAAC,CAAC;IACb,CAAC;IAEDmC,EAAE,CAACjD,WAAW,CAACmD,KAAK,CAAC;IAErB,OAAOF,EAAE;EACX;EAEA,MAAMwB,mBAAmB,GAAGtF,SAAS,CAAC6C,GAAG,CAAC,qBAAqB,CAAC;EAChEyC,mBAAmB,CAAC9C,IAAI,CAAC,CAACd,CAAC,EAAEe,CAAC,KAAKf,CAAC,CAACgB,aAAa,CAACD,CAAC,CAAC,CAAC;EACtD6C,mBAAmB,CAAC/D,OAAO,CAAEwD,QAAQ,IAAK;IACxC,MAAMjB,EAAE,GAAGsB,mCAAmC,CAACL,QAAQ,CAAC;IACxDxF,CAAC,CAAC,sBAAsB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;EAC3C,CAAC,CAAC;EAEFvE,CAAC,CAAC,2BAA2B,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IAC9C,MAAMmF,QAAQ,GAAGG,MAAM,CAAC,yBAAyB,EAAE,cAAc,CAAC;IAClE,IAAI,CAACH,QAAQ,EAAE;IAEf,MAAMjB,EAAE,GAAGsB,mCAAmC,CAACL,QAAQ,CAAC;IACxDxF,CAAC,CAAC,sBAAsB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;IAEzC9D,SAAS,CAACuF,uBAAuB,CAACR,QAAQ,CAAC;EAC7C,CAAC;EAED,SAASS,sBAAsBA,CAACC,OAAO,EAAEC,WAAW,EAAE;IACpD,MAAM5B,EAAE,GAAGrF,QAAQ,CAACkC,aAAa,CAAC,IAAI,CAAC;IACvCmD,EAAE,CAACC,YAAY,CAAC,OAAO,EAAE,sBAAsB,CAAC;IAChDD,EAAE,CAACtE,KAAK,GAAGiG,OAAO;IAClB,IAAIC,WAAW,KAAK,EAAE,EAAE;MACtB5B,EAAE,CAAClF,WAAW,GAAG6G,OAAO,GAAG,uBAAuB,GAAGC,WAAW;IAClE,CAAC,MAAM;MACL5B,EAAE,CAAClF,WAAW,GAAG6G,OAAO;IAC1B;IACA,MAAMzB,KAAK,GAAGvF,QAAQ,CAACkC,aAAa,CAAC,MAAM,CAAC;IAC5CqD,KAAK,CAACD,YAAY,CAAC,OAAO,EAAE,2CAA2C,CAAC;IACxEC,KAAK,CAACrF,SAAS,GAAG,SAAS;IAE3BqF,KAAK,CAAChD,OAAO,GAAIpB,CAAC,IAAK;MACrBA,CAAC,CAACqE,cAAc,CAAC,CAAC;MAClBjE,SAAS,CAAC2F,iCAAiC,CAACF,OAAO,CAAC;MACpD3B,EAAE,CAACnC,MAAM,CAAC,CAAC;IACb,CAAC;IACDmC,EAAE,CAACjD,WAAW,CAACmD,KAAK,CAAC;IACrB,OAAOF,EAAE;EACX;EAEA,IAAI8B,gBAAgB,GAAG5F,SAAS,CAAC6C,GAAG,CAAC,kBAAkB,CAAC;EACxD+C,gBAAgB,GAAG,IAAIC,GAAG,CACxB,CAAC,GAAGD,gBAAgB,CAACE,OAAO,CAAC,CAAC,CAAC,CAACtD,IAAI,CAAC,CAACd,CAAC,EAAEe,CAAC,KACxCsD,MAAM,CAACrE,CAAC,CAAC,CAAC,CAAC,CAAC,CAACgB,aAAa,CAACqD,MAAM,CAACtD,CAAC,CAAC,CAAC,CAAC,CAAC,CACzC,CACF,CAAC;EACDmD,gBAAgB,CAACrE,OAAO,CAAC,UAAUmE,WAAW,EAAED,OAAO,EAAE;IACvD,MAAM3B,EAAE,GAAG0B,sBAAsB,CAACC,OAAO,EAAEC,WAAW,CAAC;IACvDnG,CAAC,CAAC,mBAAmB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;EACxC,CAAC,CAAC;EAEFvE,CAAC,CAAC,wBAAwB,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IAC3C,IAAI6F,OAAO,GAAGP,MAAM,CAAC,yCAAyC,EAAE,EAAE,CAAC;IACnE,IAAI,CAACO,OAAO,IAAIA,OAAO,CAACO,MAAM,GAAG,CAAC,EAAE;IACpCP,OAAO,GAAGA,OAAO,CAACQ,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IACtC,IAAIR,WAAW,GAAGR,MAAM,CACtB,uEAAuE,EACvE,EACF,CAAC;IACD,IAAI,CAACQ,WAAW,EAAEA,WAAW,GAAG,EAAE;IAClCA,WAAW,GAAGA,WAAW,CAACO,IAAI,CAAC,CAAC;IAChC,MAAMnC,EAAE,GAAG0B,sBAAsB,CAACC,OAAO,EAAEC,WAAW,CAAC;IACvDnG,CAAC,CAAC,mBAAmB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;IACtC9D,SAAS,CAACmG,4BAA4B,CAACV,OAAO,EAAEC,WAAW,CAAC;EAC9D,CAAC;;EAED;;EAEA,SAASU,4CAA4CA,CAACrB,QAAQ,EAAE;IAC9D,MAAMjB,EAAE,GAAGrF,QAAQ,CAACkC,aAAa,CAAC,IAAI,CAAC;IACvCmD,EAAE,CAACC,YAAY,CAAC,OAAO,EAAE,sBAAsB,CAAC;IAChDD,EAAE,CAACtE,KAAK,GAAGuF,QAAQ;IACnBjB,EAAE,CAAClF,WAAW,GAAGmG,QAAQ;IAEzB,MAAMf,KAAK,GAAGvF,QAAQ,CAACkC,aAAa,CAAC,MAAM,CAAC;IAC5CqD,KAAK,CAACD,YAAY,CAAC,OAAO,EAAE,2CAA2C,CAAC;IACxEC,KAAK,CAACrF,SAAS,GAAG,SAAS;IAE3BqF,KAAK,CAAChD,OAAO,GAAIpB,CAAC,IAAK;MACrBA,CAAC,CAACqE,cAAc,CAAC,CAAC;MAElBjE,SAAS,CAACqG,mCAAmC,CAACtB,QAAQ,CAAC;MACvDjB,EAAE,CAACnC,MAAM,CAAC,CAAC;IACb,CAAC;IAEDmC,EAAE,CAACjD,WAAW,CAACmD,KAAK,CAAC;IAErB,OAAOF,EAAE;EACX;EAEA,MAAMwC,4BAA4B,GAAGtG,SAAS,CAAC6C,GAAG,CAChD,8BACF,CAAC;EACDyD,4BAA4B,CAAC9D,IAAI,CAAC,CAACd,CAAC,EAAEe,CAAC,KAAKf,CAAC,CAACgB,aAAa,CAACD,CAAC,CAAC,CAAC;EAC/D6D,4BAA4B,CAAC/E,OAAO,CAAEwD,QAAQ,IAAK;IACjD,MAAMjB,EAAE,GAAGsC,4CAA4C,CAACrB,QAAQ,CAAC;IACjExF,CAAC,CAAC,+BAA+B,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;EACpD,CAAC,CAAC;EAEFvE,CAAC,CAAC,iCAAiC,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IACpD,MAAMmF,QAAQ,GAAGG,MAAM,CAAC,yBAAyB,EAAE,cAAc,CAAC;IAClE,IAAI,CAACH,QAAQ,EAAE;IAEf,MAAMjB,EAAE,GAAGsC,4CAA4C,CAACrB,QAAQ,CAAC;IACjExF,CAAC,CAAC,+BAA+B,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;IAElD9D,SAAS,CAACuG,8BAA8B,CAACxB,QAAQ,CAAC;EACpD,CAAC;;EAED;EACAxF,CAAC,CAAC,wBAAwB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAC5CI,SAAS,CAACkD,GAAG,CAAC,uBAAuB,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EACxD,CAAC;EACDD,CAAC,CAAC,wBAAwB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,uBAAuB,CAAC;EAE1EtD,CAAC,CAAC,wBAAwB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAC5CI,SAAS,CAACkD,GAAG,CAAC,uBAAuB,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EACxD,CAAC;EACDD,CAAC,CAAC,wBAAwB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,uBAAuB,CAAC;EAE1EtD,CAAC,CAAC,WAAW,CAAC,CAACiH,OAAO,GAAI5G,CAAC,IAAK;IAC9BI,SAAS,CAACkD,GAAG,CAAC,UAAU,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;IACzCD,CAAC,CAAC,kBAAkB,CAAC,CAACX,WAAW,GAAGgB,CAAC,CAACC,MAAM,CAACL,KAAK;EACpD,CAAC;EACDD,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,UAAU,CAAC;EAChDtD,CAAC,CAAC,kBAAkB,CAAC,CAACX,WAAW,GAAGoB,SAAS,CAAC6C,GAAG,CAAC,UAAU,CAAC;EAE7DtD,CAAC,CAAC,+BAA+B,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACnDI,SAAS,CAACkD,GAAG,CAAC,8BAA8B,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EAC/D,CAAC;EACDD,CAAC,CAAC,+BAA+B,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CACtD,8BACF,CAAC;EAEDtD,CAAC,CAAC,mBAAmB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACvCI,SAAS,CAACkD,GAAG,CAAC,kBAAkB,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EACnD,CAAC;EACDD,CAAC,CAAC,mBAAmB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,kBAAkB,CAAC;EAEhEtD,CAAC,CAAC,kBAAkB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACtCI,SAAS,CAACkD,GAAG,CAAC,iBAAiB,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EAClD,CAAC;EACDD,CAAC,CAAC,kBAAkB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,iBAAiB,CAAC;EAE9DtD,CAAC,CAAC,qCAAqC,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACzDI,SAAS,CAACkD,GAAG,CAAC,oCAAoC,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EACrE,CAAC;EACDD,CAAC,CAAC,qCAAqC,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAC5D,oCACF,CAAC;EAEDtD,CAAC,CAAC,iCAAiC,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACrD,IAAIA,CAAC,CAACC,MAAM,CAACL,KAAK,IAAI,KAAK,EAAE;MAC3BR,MAAM,CAACyH,WAAW,CAACC,OAAO,CACxB;QACED,WAAW,EAAE,CAAC,eAAe;MAC/B,CAAC,EACAE,OAAO,IAAK;QACX,IAAIA,OAAO,EAAE;UACX3G,SAAS,CAACkD,GAAG,CAAC,gCAAgC,EAAE,KAAK,CAAC;QACxD,CAAC,MAAM;UACLlD,SAAS,CAACkD,GAAG,CAAC,gCAAgC,EAAE,IAAI,CAAC;UACrDtD,CAAC,CAACC,MAAM,CAACL,KAAK,GAAG,IAAI;QACvB;MACF,CACF,CAAC;IACH,CAAC,MAAM;MACLQ,SAAS,CAACkD,GAAG,CAAC,gCAAgC,EAAE,IAAI,CAAC;MACrDlE,MAAM,CAACyH,WAAW,CAAC9E,MAAM,CAAC;QACxB8E,WAAW,EAAE,CAAC,eAAe;MAC/B,CAAC,CAAC;IACJ;EACF,CAAC;EACDlH,CAAC,CAAC,iCAAiC,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CACxD,gCACF,CAAC;EAED,SAAS+D,+CAA+CA,CAACpH,KAAK,EAAE;IAC9D,IAAIA,KAAK,KAAK,IAAI,EAAE;MAClBf,QAAQ,CACLgD,gBAAgB,CAAC,yCAAyC,CAAC,CAC3DF,OAAO,CAAEsF,KAAK,IAAK;QAClBA,KAAK,CAAC9C,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;MACpC,CAAC,CAAC;IACN,CAAC,MAAM;MACLtF,QAAQ,CACLgD,gBAAgB,CAAC,yCAAyC,CAAC,CAC3DF,OAAO,CAAEsF,KAAK,IAAK;QAClBA,KAAK,CAACC,eAAe,CAAC,UAAU,CAAC;MACnC,CAAC,CAAC;IACN;EACF;EAEAvH,CAAC,CAAC,8BAA8B,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAClDI,SAAS,CAACkD,GAAG,CAAC,6BAA6B,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;IAC5DoH,+CAA+C,CAAChH,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EACjE,CAAC;EACDD,CAAC,CAAC,8BAA8B,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CACrD,6BACF,CAAC;EACD+D,+CAA+C,CAC7C5G,SAAS,CAAC6C,GAAG,CAAC,6BAA6B,CAC7C,CAAC;EAEDtD,CAAC,CAAC,iCAAiC,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACrDI,SAAS,CAACkD,GAAG,CACX,gCAAgC,EAChCtD,CAAC,CAACC,MAAM,CAACkH,OAAO,GAAG,KAAK,GAAG,IAC7B,CAAC;EACH,CAAC;EACDxH,CAAC,CAAC,iCAAiC,CAAC,CAACwH,OAAO,GAC1C/G,SAAS,CAAC6C,GAAG,CAAC,gCAAgC,CAAC,KAAK,KAAK,GAAG,IAAI,GAAG,KAAK;EAE1EtD,CAAC,CAAC,8BAA8B,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAClDI,SAAS,CAACkD,GAAG,CACX,6BAA6B,EAC7BtD,CAAC,CAACC,MAAM,CAACkH,OAAO,GAAG,KAAK,GAAG,IAC7B,CAAC;EACH,CAAC;EACDxH,CAAC,CAAC,8BAA8B,CAAC,CAACwH,OAAO,GACvC/G,SAAS,CAAC6C,GAAG,CAAC,6BAA6B,CAAC,KAAK,KAAK,GAAG,IAAI,GAAG,KAAK;EAEvEtD,CAAC,CAAC,qCAAqC,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACzDI,SAAS,CAACkD,GAAG,CACX,oCAAoC,EACpCtD,CAAC,CAACC,MAAM,CAACkH,OAAO,GAAG,KAAK,GAAG,IAC7B,CAAC;EACH,CAAC;EACDxH,CAAC,CAAC,qCAAqC,CAAC,CAACwH,OAAO,GAC9C/G,SAAS,CAAC6C,GAAG,CAAC,oCAAoC,CAAC,KAAK,KAAK,GACzD,IAAI,GACJ,KAAK;EAEXtD,CAAC,CAAC,kCAAkC,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACtDI,SAAS,CAACkD,GAAG,CACX,iCAAiC,EACjCtD,CAAC,CAACC,MAAM,CAACkH,OAAO,GAAG,KAAK,GAAG,IAC7B,CAAC;EACH,CAAC;EACDxH,CAAC,CAAC,kCAAkC,CAAC,CAACwH,OAAO,GAC3C/G,SAAS,CAAC6C,GAAG,CAAC,iCAAiC,CAAC,KAAK,KAAK,GAAG,IAAI,GAAG,KAAK;;EAE3E;EACAtD,CAAC,CAAC,cAAc,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAClCI,SAAS,CAACkD,GAAG,CAAC,aAAa,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;IAC5CoD,cAAc,CAAC,CAAC;EAClB,CAAC;EACDrD,CAAC,CAAC,cAAc,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,aAAa,CAAC;EAEtDtD,CAAC,CAAC,WAAW,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAC/BI,SAAS,CAACkD,GAAG,CAAC,UAAU,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;IACzCoD,cAAc,CAAC,CAAC;EAClB,CAAC;EACDrD,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,UAAU,CAAC;EAEhDtD,CAAC,CAAC,gCAAgC,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACpDI,SAAS,CAACkD,GAAG,CAAC,+BAA+B,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EAChE,CAAC;EACDD,CAAC,CAAC,gCAAgC,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CACvD,+BACF,CAAC;;EAED;EACA,SAASmE,UAAUA,CAACC,MAAM,EAAE;IAC1B,OAAOA,MAAM,CACVlI,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CACtBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CACvBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC;EAC5B;EACAQ,CAAC,CAAC,kDAAkD,CAAC,CAACZ,SAAS,GAAGY,CAAC,CACjE,kDACF,CAAC,CAACZ,SAAS,CAACI,OAAO,CAAC,QAAQ,EAAE,iBAAiB,CAAC;EAChDQ,CAAC,CAAC,uDAAuD,CAAC,CAACZ,SAAS,GAAGY,CAAC,CACtE,uDACF,CAAC,CAACZ,SAAS,CAACI,OAAO,CAAC,QAAQ,EAAE,iBAAiB,CAAC;EAEhDQ,CAAC,CAAC,4BAA4B,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IAC/CsH,UAAU,CAAC,+BAA+B,CAAC;EAC7C,CAAC;EAED3H,CAAC,CAAC,kCAAkC,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IACrDI,SAAS,CAACkD,GAAG,CACX,iCAAiC,EACjCtD,CAAC,CAACC,MAAM,CAACkH,OAAO,GAAG,KAAK,GAAG,IAC7B,CAAC;EACH,CAAC;EACDxH,CAAC,CAAC,kCAAkC,CAAC,CAACwH,OAAO,GAC3C/G,SAAS,CAAC6C,GAAG,CAAC,iCAAiC,CAAC,KAAK,KAAK;EAE5DtD,CAAC,CAAC,uCAAuC,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IAC1DI,SAAS,CAACkD,GAAG,CACX,sCAAsC,EACtCtD,CAAC,CAACC,MAAM,CAACkH,OAAO,GAAG,KAAK,GAAG,IAC7B,CAAC;EACH,CAAC;EACDxH,CAAC,CAAC,uCAAuC,CAAC,CAACwH,OAAO,GAChD/G,SAAS,CAAC6C,GAAG,CAAC,sCAAsC,CAAC,KAAK,KAAK;EAEjE,MAAMsE,gBAAgB,GAAG,CAAC,CAAC;EAC3B,KAAK,MAAMhI,IAAI,IAAIiI,MAAM,CAACC,IAAI,CAC5BrI,MAAM,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC,CAACoI,QAAQ,IAAI,CAAC,CAC5C,CAAC,EAAE;IACD,MAAMC,IAAI,GAAGvI,MAAM,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC,CAACoI,QAAQ,CAACnI,IAAI,CAAC;IACxD,IAAIoI,IAAI,CAACC,aAAa,IAAID,IAAI,CAACC,aAAa,CAACC,OAAO,EAAE;MACpDN,gBAAgB,CAAChI,IAAI,CAAC,GAAGoI,IAAI,CAACC,aAAa,CAACC,OAAO;IACrD,CAAC,MAAM;MACLN,gBAAgB,CAAChI,IAAI,CAAC,GAAG,EAAE;IAC7B;EACF;EAEA,SAASuI,SAASA,CAACC,UAAU,EAAEC,WAAW,EAAE;IAC1C,IAAID,UAAU,KAAK,yBAAyB,IAAI,CAACC,WAAW,EAAE;MAC5DA,WAAW,GAAG,sBAAsB;IACtC;IAEA,SAASZ,UAAUA,CAACC,MAAM,EAAE;MAC1B,OAAOA,MAAM,CACVlI,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CACtBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CACvBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC;IAC5B;IACA6I,WAAW,GAAGZ,UAAU,CAACY,WAAW,CAAC;IAErC,MAAM9D,EAAE,GAAGrF,QAAQ,CAACkC,aAAa,CAAC,IAAI,CAAC;IACvCmD,EAAE,CAAC7C,SAAS,CAACW,GAAG,CAAC,cAAc,CAAC;IAChCkC,EAAE,CAACC,YAAY,CAAC,IAAI,EAAE4D,UAAU,CAAC;IACjC7D,EAAE,CAACnF,SAAS,GAAI;AACtB,eAAeiJ,WAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;IACHrI,CAAC,CAAC,oBAAoB,CAAC,CAACsB,WAAW,CAACiD,EAAE,CAAC;IAEvC,MAAM+C,KAAK,GAAG/C,EAAE,CAAChE,aAAa,CAAE,gBAAe,CAAC;IAChD,MAAM+H,KAAK,GAAG/D,EAAE,CAAChE,aAAa,CAAE,gBAAe,CAAC;IAChD,MAAMgI,SAAS,GAAGhE,EAAE,CAAChE,aAAa,CAAE,oBAAmB,CAAC;IACxD,MAAMiI,QAAQ,GAAGjE,EAAE,CAAChE,aAAa,CAAE,mBAAkB,CAAC;IAEtD+G,KAAK,CAACrH,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,SAAS,CAAC,CAAC8E,UAAU,CAAC;IAClD,IAAId,KAAK,CAACrH,KAAK,EAAE;MACfuI,QAAQ,CAACtI,KAAK,CAACC,OAAO,GAAG,MAAM;IACjC,CAAC,MAAM;MACLoI,SAAS,CAACrI,KAAK,CAACC,OAAO,GAAG,MAAM;IAClC;IAEA,SAASsI,QAAQA,CAACC,SAAS,EAAE;MAC3B,MAAM5J,IAAI,GAAGQ,OAAO,CAACC,UAAU,CAAC,cAAc,GAAGmJ,SAAS,CAAC;MAC3D,QAAQA,SAAS;QACf,KAAK,WAAW;UACdJ,KAAK,CAACjJ,WAAW,GAAGP,IAAI,GAAGA,IAAI,GAAG,qBAAqB;UACvD;QACF,KAAK,QAAQ;UACXwJ,KAAK,CAACjJ,WAAW,GAAGP,IAAI,GAAGA,IAAI,GAAG,eAAe;UACjD;QACF,KAAK,SAAS;UACZwJ,KAAK,CAACjJ,WAAW,GAAGP,IAAI,GAAGA,IAAI,GAAG,qBAAqB;UACvD;QACF;UACEwJ,KAAK,CAACjJ,WAAW,GAAG,EAAE;UACtB;MACJ;IACF;IAEA,SAASsJ,YAAYA,CAACtI,CAAC,EAAE;MACvB,IAAIuI,MAAM,GAAG,EAAE;MACf,IAAIvI,CAAC,CAACwI,OAAO,EAAE;QACbD,MAAM,IAAI,OAAO;MACnB;MACA,IAAIvI,CAAC,CAACyI,MAAM,EAAE;QACZF,MAAM,IAAI,MAAM;MAClB;MACA,IAAIvI,CAAC,CAAC0I,QAAQ,EAAE;QACdH,MAAM,IAAI,QAAQ;MACpB;MACA,IAAIvI,CAAC,CAAC2I,IAAI,CAACC,KAAK,CAAC,YAAY,CAAC,EAAE;QAC9BL,MAAM,IAAIvI,CAAC,CAAC2I,IAAI,CAACC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;MACzC,CAAC,MAAM,IAAI5I,CAAC,CAAC2I,IAAI,CAACC,KAAK,CAAC,cAAc,CAAC,EAAE;QACvCL,MAAM,IAAIvI,CAAC,CAAC2I,IAAI,CAACC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;MAC3C;MAEA,OAAOL,MAAM;IACf;IAEA,SAASM,WAAWA,CAACtJ,IAAI,EAAEuJ,SAAS,EAAE;MACpC,MAAMC,OAAO,GAAG3I,SAAS,CAAC6C,GAAG,CAAC,SAAS,CAAC;MACxC8F,OAAO,CAAChB,UAAU,CAAC,GAAGe,SAAS;MAC/B1I,SAAS,CAACkD,GAAG,CAAC,SAAS,EAAEyF,OAAO,CAAC;MACjCC,OAAO,CAACtB,QAAQ,CAACuB,MAAM,CAAC;QACtB1J,IAAI,EAAEA,IAAI;QACV2J,QAAQ,EAAEJ;MACZ,CAAC,CAAC;IACJ;IAEA,SAASK,WAAWA,CAACnJ,CAAC,EAAE;MACtBiH,KAAK,CAACrH,KAAK,GAAG0I,YAAY,CAACtI,CAAC,CAAC;MAE7B,IAAIA,CAAC,CAACoJ,GAAG,IAAI,KAAK,EAAE;QAClB;MACF;MACA,IAAIpJ,CAAC,CAACqJ,GAAG,IAAI,QAAQ,EAAE;QACrBpC,KAAK,CAACqC,IAAI,CAAC,CAAC;QACZ;MACF;MACA,IAAItJ,CAAC,CAACqJ,GAAG,IAAI,WAAW,IAAIrJ,CAAC,CAACqJ,GAAG,IAAI,QAAQ,EAAE;QAC7CR,WAAW,CAACd,UAAU,EAAEO,YAAY,CAACtI,CAAC,CAAC,CAAC;QACxCiH,KAAK,CAACqC,IAAI,CAAC,CAAC;QACZ;MACF;MACA,IAAI,CAACtJ,CAAC,CAACwI,OAAO,IAAI,CAACxI,CAAC,CAACyI,MAAM,EAAE;QAC3BL,QAAQ,CAAC,WAAW,CAAC;QACrB;MACF;MACA,IAAIpI,CAAC,CAACwI,OAAO,IAAIxI,CAAC,CAACyI,MAAM,IAAIzI,CAAC,CAAC0I,QAAQ,EAAE;QACvCN,QAAQ,CAAC,SAAS,CAAC;QACnB;MACF;MACApI,CAAC,CAACqE,cAAc,CAAC,CAAC;MAClB,IAAI,CAACrE,CAAC,CAAC2I,IAAI,CAACC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC5I,CAAC,CAAC2I,IAAI,CAACC,KAAK,CAAC,cAAc,CAAC,EAAE;QAChER,QAAQ,CAAC,QAAQ,CAAC;QAClB;MACF;MAEAS,WAAW,CAACd,UAAU,EAAEO,YAAY,CAACtI,CAAC,CAAC,CAAC;MACxCiH,KAAK,CAACqC,IAAI,CAAC,CAAC;MAEZlB,QAAQ,CAAC,MAAM,CAAC;IAClB;IAEAnB,KAAK,CAACsC,SAAS,GAAIvJ,CAAC,IAAKmJ,WAAW,CAACnJ,CAAC,CAAC;IACvCiH,KAAK,CAACuC,OAAO,GAAIxJ,CAAC,IAAKmJ,WAAW,CAACnJ,CAAC,CAAC;IAErCiH,KAAK,CAACwC,OAAO,GAAIzJ,CAAC,IAAK;MACrBiH,KAAK,CAACrH,KAAK,GAAG,EAAE;MAChBwI,QAAQ,CAAC,EAAE,CAAC;IACd,CAAC;IAEDnB,KAAK,CAACyC,MAAM,GAAI1J,CAAC,IAAK;MACpBiH,KAAK,CAACrH,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,SAAS,CAAC,CAAC8E,UAAU,CAAC;MAClDK,QAAQ,CAAC,EAAE,CAAC;IACd,CAAC;IAEDF,SAAS,CAAC9G,OAAO,GAAIpB,CAAC,IAAK;MACzBiH,KAAK,CAACrH,KAAK,GAAG,EAAE;MAChBiJ,WAAW,CAACd,UAAU,EAAE,EAAE,CAAC;MAE3BG,SAAS,CAACrI,KAAK,CAACC,OAAO,GAAG,MAAM;MAChCqI,QAAQ,CAACtI,KAAK,CAACC,OAAO,GAAG,OAAO;IAClC,CAAC;IAEDqI,QAAQ,CAAC/G,OAAO,GAAIpB,CAAC,IAAK;MACxBiH,KAAK,CAACrH,KAAK,GAAG2H,gBAAgB,CAACQ,UAAU,CAAC;MAC1Cc,WAAW,CAACd,UAAU,EAAER,gBAAgB,CAACQ,UAAU,CAAC,CAAC;MAErDG,SAAS,CAACrI,KAAK,CAACC,OAAO,GAAG,OAAO;MACjCqI,QAAQ,CAACtI,KAAK,CAACC,OAAO,GAAG,MAAM;IACjC,CAAC;;IAED;IACA,IAAI,OAAOkJ,OAAO,KAAK,WAAW,EAAE;MAClC/B,KAAK,CAAC9C,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;MAClCgE,QAAQ,CAACtI,KAAK,CAACC,OAAO,GAAG,MAAM;MAC/BoI,SAAS,CAACrI,KAAK,CAACC,OAAO,GAAG,MAAM;IAClC,CAAC,MAAM;MACLH,CAAC,CAAC,4BAA4B,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;IACxD;IACA;EACF;;EAEA,IAAI,OAAOV,MAAM,CAACsI,QAAQ,KAAK,WAAW,EAAE;IAC1CtI,MAAM,CAACsI,QAAQ,CAACiC,MAAM,CAAEC,OAAO,IAAK;MAClC,KAAK,MAAMrB,MAAM,IAAIqB,OAAO,EAAE;QAC5B9B,SAAS,CAACS,MAAM,CAAChJ,IAAI,EAAEgJ,MAAM,CAACP,WAAW,CAAC;MAC5C;IACF,CAAC,CAAC;EACJ;;EAEA;EACArI,CAAC,CAAC,wBAAwB,CAAC,CAACiH,OAAO,GAAI5G,CAAC,IAAK;IAC3CI,SAAS,CAACkD,GAAG,CAAC,uBAAuB,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EACxD,CAAC;EACDD,CAAC,CAAC,wBAAwB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,uBAAuB,CAAC;EAE1E;IACE,IAAIrC,YAAY,CAACC,QAAQ,CAACC,GAAG,EAAE;MAC7BnB,CAAC,CAAC,iBAAiB,CAAC,CAACwE,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;IACnD;IAEA,MAAM0F,qBAAqB,GAAIC,eAAe,IAAK;MACjDjL,QAAQ,CACLgD,gBAAgB,CAAC,+BAA+B,CAAC,CACjDF,OAAO,CAAEoB,MAAM,IAAKA,MAAM,CAACoB,YAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;MACzDtF,QAAQ,CACLgD,gBAAgB,CAAC,+BAA+B,CAAC,CACjDF,OAAO,CAAEoB,MAAM,IAAKA,MAAM,CAACoB,YAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;MACzD2F,eAAe,CAACnI,OAAO,CAAEoI,MAAM,IAAK;QAClC,IAAIhH,MAAM;QACVA,MAAM,GAAGpD,CAAC,CAAE,wCAAuCoK,MAAO,IAAG,CAAC;QAC9D,IAAIhH,MAAM,EAAE;UACVA,MAAM,CAACmE,eAAe,CAAC,QAAQ,CAAC;QAClC;QACAnE,MAAM,GAAGpD,CAAC,CAAE,wCAAuCoK,MAAO,IAAG,CAAC;QAC9D,IAAIhH,MAAM,EAAE;UACVA,MAAM,CAACmE,eAAe,CAAC,QAAQ,CAAC;QAClC;MACF,CAAC,CAAC;IACJ,CAAC;IAED,MAAM8C,YAAY,GAAG,CACnB;MAAEC,QAAQ,EAAE,kBAAkB;MAAEF,MAAM,EAAE;IAAS,CAAC,EAClD;MAAEE,QAAQ,EAAE,gBAAgB;MAAEF,MAAM,EAAE;IAAO,CAAC,EAC9C;MAAEE,QAAQ,EAAE,kBAAkB;MAAEF,MAAM,EAAE;IAAS,CAAC,EAClD;MAAEE,QAAQ,EAAE,iBAAiB;MAAEF,MAAM,EAAE;IAAQ,CAAC,CACjD;IAEDC,YAAY,CAACrI,OAAO,CAAEuI,MAAM,IAAK;MAC/BvK,CAAC,CAACuK,MAAM,CAACD,QAAQ,CAAC,CAACrD,OAAO,GAAI5G,CAAC,IAAK;QAClC,MAAM8J,eAAe,GAAG,EAAE;QAC1B,IAAIK,YAAY,GAAG,CAAC;QACpBH,YAAY,CAACrI,OAAO,CAAEyI,OAAO,IAAK;UAChC,IAAIzK,CAAC,CAACyK,OAAO,CAACH,QAAQ,CAAC,CAAC9C,OAAO,EAAE;YAC/BgD,YAAY,EAAE;UAChB;QACF,CAAC,CAAC;QACF,IACEA,YAAY,KAAK,CAAC,IACjBA,YAAY,KAAK,CAAC,IAAIxK,CAAC,CAAC,iBAAiB,CAAC,CAACwH,OAAQ,EACpD;UACA,IAAInH,CAAC,CAACC,MAAM,KAAKN,CAAC,CAAC,kBAAkB,CAAC,EAAE;YACtCA,CAAC,CAAC,gBAAgB,CAAC,CAACwH,OAAO,GAAG,IAAI;UACpC,CAAC,MAAM;YACLxH,CAAC,CAAC,kBAAkB,CAAC,CAACwH,OAAO,GAAG,IAAI;UACtC;QACF;QACA6C,YAAY,CAACrI,OAAO,CAAEyI,OAAO,IAAK;UAChC,IAAIzK,CAAC,CAACyK,OAAO,CAACH,QAAQ,CAAC,CAAC9C,OAAO,EAAE;YAC/B2C,eAAe,CAACnH,IAAI,CAACyH,OAAO,CAACL,MAAM,CAAC;UACtC;QACF,CAAC,CAAC;QAEF,IACE,CAACD,eAAe,CAACO,QAAQ,CAACjK,SAAS,CAAC6C,GAAG,CAAC,uBAAuB,CAAC,CAAC,EACjE;UACA7C,SAAS,CAACkD,GAAG,CAAC,uBAAuB,EAAEwG,eAAe,CAAC,CAAC,CAAC,CAAC;QAC5D;QACA,IACE,CAACA,eAAe,CAACO,QAAQ,CAACjK,SAAS,CAAC6C,GAAG,CAAC,uBAAuB,CAAC,CAAC,EACjE;UACA7C,SAAS,CAACkD,GAAG,CAAC,uBAAuB,EAAEwG,eAAe,CAAC,CAAC,CAAC,CAAC;QAC5D;QAEA,MAAMQ,uBAAuB,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,QAAQ,CAAC;QAC5DlL,MAAM,CAACC,OAAO,CAACkL,WAAW,CACxB;UACEC,MAAM,EAAE,8BAA8B;UACtCC,YAAY,EAAEH,uBAAuB,CAACI,MAAM,CACzCX,MAAM,IAAK,CAACD,eAAe,CAACO,QAAQ,CAACN,MAAM,CAC9C,CAAC;UACDY,cAAc,EAAEvK,SAAS,CAAC6C,GAAG,CAAC,uBAAuB;QACvD,CAAC,EACD2H,gBACF,CAAC;QAEDxK,SAAS,CAACkD,GAAG,CAAC,iBAAiB,EAAEwG,eAAe,CAAC;QAEjDnK,CAAC,CAAC,wBAAwB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAC/C,uBACF,CAAC;QACDtD,CAAC,CAAC,wBAAwB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAC/C,uBACF,CAAC;QACD4G,qBAAqB,CAACC,eAAe,CAAC;MACxC,CAAC;MACDnK,CAAC,CAACuK,MAAM,CAACD,QAAQ,CAAC,CAAC9C,OAAO,GACxB/G,SAAS,CAAC6C,GAAG,CAAC,iBAAiB,CAAC,CAACa,OAAO,CAACoG,MAAM,CAACH,MAAM,CAAC,KAAK,CAAC,CAAC,GAC1D,KAAK,GACL,IAAI;MAEVF,qBAAqB,CAACzJ,SAAS,CAAC6C,GAAG,CAAC,iBAAiB,CAAC,CAAC;IACzD,CAAC,CAAC;EACJ;;EAEA;EACAtD,CAAC,CAAC,yBAAyB,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IAC5C,IAAI6K,OAAO,CAAC5L,OAAO,CAACC,UAAU,CAAC,mCAAmC,CAAC,CAAC,EAAE;MACpEE,MAAM,CAACC,OAAO,CAACkL,WAAW,CACxB;QACEC,MAAM,EAAE,wBAAwB;QAChChH,MAAM,EAAE;MACV,CAAC,EACDoH,gBACF,CAAC;IACH;EACF,CAAC;EAEDjL,CAAC,CAAC,kBAAkB,CAAC,CAACiH,OAAO,GAAI5G,CAAC,IAAK;IACrCI,SAAS,CAACkD,GAAG,CAAC,iBAAiB,EAAE3D,CAAC,CAAC,kBAAkB,CAAC,CAACC,KAAK,CAAC;EAC/D,CAAC;EACDD,CAAC,CAAC,kBAAkB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,iBAAiB,CAAC;EAE9DtD,CAAC,CAAC,eAAe,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IAClC,MAAM8K,UAAU,GAAG1K,SAAS,CAAC2K,MAAM,CAAC,CAAC;IAErC,MAAMnJ,OAAO,GAAG/C,QAAQ,CAACkC,aAAa,CAAC,GAAG,CAAC;IAC3Ca,OAAO,CAACuC,YAAY,CAClB,MAAM,EACN,gCAAgC,GAAG6G,kBAAkB,CAACF,UAAU,CAClE,CAAC;IACDlJ,OAAO,CAACuC,YAAY,CAClB,UAAU,EACV,aAAa,GACX,IAAI8G,IAAI,CAAC,CAAC,CACPC,WAAW,CAAC,CAAC,CACb/L,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CACjBA,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CACnBA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,GACtB,MACJ,CAAC;IAEDyC,OAAO,CAAC/B,KAAK,CAACC,OAAO,GAAG,MAAM;IAC9BjB,QAAQ,CAACsM,IAAI,CAAClK,WAAW,CAACW,OAAO,CAAC;IAElCA,OAAO,CAACwJ,KAAK,CAAC,CAAC;IAEfvM,QAAQ,CAACsM,IAAI,CAACE,WAAW,CAACzJ,OAAO,CAAC;EACpC,CAAC;EACDjC,CAAC,CAAC,kBAAkB,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IACrC,MAAM4B,OAAO,GAAG/C,QAAQ,CAACkC,aAAa,CAAC,OAAO,CAAC;IAC/Ca,OAAO,CAACuC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC;IACpCvC,OAAO,CAACuC,YAAY,CAAC,QAAQ,EAAE,YAAY,CAAC;IAE5CvC,OAAO,CAAC/B,KAAK,CAACC,OAAO,GAAG,MAAM;IAC9BjB,QAAQ,CAACsM,IAAI,CAAClK,WAAW,CAACW,OAAO,CAAC;IAElCA,OAAO,CAACgF,OAAO,GAAI5G,CAAC,IAAK;MACvB,MAAMiH,KAAK,GAAGjH,CAAC,CAACC,MAAM;MAEtB,MAAMqL,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAG,YAAY;QAC1B,IAAI;UACF,IAAIX,OAAO,CAAC5L,OAAO,CAACC,UAAU,CAAC,+BAA+B,CAAC,CAAC,EAAE;YAChEkB,SAAS,CAACqL,MAAM,CAACH,MAAM,CAAC/C,MAAM,CAAC;UACjC;QACF,CAAC,CAAC,OAAOvI,CAAC,EAAE;UACV0L,KAAK,CAACzM,OAAO,CAACC,UAAU,CAAC,iBAAiB,CAAC,CAAC;UAC5CyM,OAAO,CAAC1D,KAAK,CAACjI,CAAC,CAAC;QAClB;MACF,CAAC;MAEDsL,MAAM,CAACM,UAAU,CAAC3E,KAAK,CAAC4E,KAAK,CAAC,CAAC,CAAC,CAAC;IACnC,CAAC;IAEDjK,OAAO,CAACwJ,KAAK,CAAC,CAAC;IAEfvM,QAAQ,CAACsM,IAAI,CAACE,WAAW,CAACzJ,OAAO,CAAC;EACpC,CAAC;EACDjC,CAAC,CAAC,iBAAiB,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IACpC,IAAI6K,OAAO,CAAC5L,OAAO,CAACC,UAAU,CAAC,0BAA0B,CAAC,CAAC,EAAE;MAC3DkB,SAAS,CAAC0L,gBAAgB,CAAC,CAAC;IAC9B;EACF,CAAC;;EAED;EACAnM,CAAC,CAAC,mBAAmB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACvCI,SAAS,CAACkD,GAAG,CAAC,kBAAkB,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EACnD,CAAC;EACDD,CAAC,CAAC,mBAAmB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,kBAAkB,CAAC;EAEhEtD,CAAC,CAAC,kBAAkB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACtCI,SAAS,CAACkD,GAAG,CAAC,iBAAiB,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EAClD,CAAC;EACDD,CAAC,CAAC,kBAAkB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,iBAAiB,CAAC;EAE9DtD,CAAC,CAAC,+BAA+B,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACnDI,SAAS,CAACkD,GAAG,CAAC,8BAA8B,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EAC/D,CAAC;EACDD,CAAC,CAAC,+BAA+B,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CACtD,8BACF,CAAC;EAEDtD,CAAC,CAAC,mCAAmC,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IACvDI,SAAS,CAACkD,GAAG,CAAC,kCAAkC,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EACnE,CAAC;EACDD,CAAC,CAAC,mCAAmC,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAC1D,kCACF,CAAC;EAEDtD,CAAC,CAAC,4BAA4B,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAChDI,SAAS,CAACkD,GAAG,CAAC,2BAA2B,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EAC5D,CAAC;EACDD,CAAC,CAAC,4BAA4B,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CACnD,2BACF,CAAC;EAEDtD,CAAC,CAAC,wBAAwB,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAC5CI,SAAS,CAACkD,GAAG,CAAC,uBAAuB,EAAEtD,CAAC,CAACC,MAAM,CAACL,KAAK,CAAC;EACxD,CAAC;EACDD,CAAC,CAAC,wBAAwB,CAAC,CAACC,KAAK,GAAGQ,SAAS,CAAC6C,GAAG,CAAC,uBAAuB,CAAC;EAE1EtD,CAAC,CAAC,sBAAsB,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,cAAc;EACxDH,CAAC,CAAC,cAAc,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;EACxCH,CAAC,CAAC,sBAAsB,CAAC,CAACyB,OAAO,GAAIpB,CAAC,IAAK;IACzCL,CAAC,CAAC,sBAAsB,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;IAEhDV,MAAM,CAACC,OAAO,CAACkL,WAAW,CACxB;MACEC,MAAM,EAAE;IACV,CAAC,EACAjC,MAAM,IAAK;MACVqC,gBAAgB,CAAC,CAAC;MAElBjL,CAAC,CAAC,cAAc,CAAC,CAACX,WAAW,GAAGuJ,MAAM;MACtC5I,CAAC,CAAC,cAAc,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,cAAc;IAClD,CACF,CAAC;EACH,CAAC;;EAED;EACAH,CAAC,CAAC,WAAW,CAAC,CAACyB,OAAO,GAAG,MAAM;IAC7B,MAAM2K,KAAK,GAAG;MACZxM,IAAI,EAAE,OAAO;MACbyM,GAAG,EAAErM,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK;MACzBqM,MAAM,EAAEtM,CAAC,CAAC,WAAW,CAAC,CAACC;IACzB,CAAC;IACD,IAAI;MACF,IAAIsM,GAAG,CAACH,KAAK,CAACC,GAAG,CAAC;MAClB,IAAID,KAAK,CAACE,MAAM,CAAC7F,MAAM,GAAG,EAAE,EAAE;QAC5B,MAAM,IAAI+F,KAAK,CAAC,qBAAqB,CAAC;MACxC;MAEA,MAAMC,cAAc,GAAGhM,SAAS,CAAC6C,GAAG,CAAC,gBAAgB,CAAC;MAEtD,MAAMoJ,KAAK,GAAGD,cAAc,CAACE,SAAS,CAAEC,EAAE,IAAKA,EAAE,CAAChN,IAAI,KAAK,OAAO,CAAC;MACnE,IAAI8M,KAAK,KAAK,CAAC,CAAC,EAAE;QAChBD,cAAc,CAACI,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;MACjC;MAEAD,cAAc,CAACzJ,IAAI,CAACoJ,KAAK,CAAC;MAC1B3L,SAAS,CAACkD,GAAG,CAAC,gBAAgB,EAAE8I,cAAc,CAAC;MAC/ChN,MAAM,CAACC,OAAO,CAACkL,WAAW,CAAC;QAAEC,MAAM,EAAE,oBAAoB;QAAEuB;MAAM,CAAC,CAAC;IACrE,CAAC,CAAC,OAAO/L,CAAC,EAAE;MACV0L,KAAK,CAAC1L,CAAC,CAAC;IACV;EACF,CAAC;EAEDL,CAAC,CAAC,cAAc,CAAC,CAACyB,OAAO,GAAG,MAAM;IAChC,MAAMgL,cAAc,GAAGhM,SAAS,CAAC6C,GAAG,CAAC,gBAAgB,CAAC;IACtD,MAAMoJ,KAAK,GAAGD,cAAc,CAACE,SAAS,CAAEC,EAAE,IAAKA,EAAE,CAAChN,IAAI,KAAK,OAAO,CAAC;IAEnE,IAAI8M,KAAK,KAAK,CAAC,CAAC,EAAE;MAChBD,cAAc,CAACI,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;MAC/BjM,SAAS,CAACkD,GAAG,CAAC,gBAAgB,EAAE8I,cAAc,CAAC;MAC/ChN,MAAM,CAACC,OAAO,CAACkL,WAAW,CACxB;QAAEC,MAAM,EAAE;MAAqB,CAAC,EAChCI,gBACF,CAAC;IACH;IAEA,IAAIxK,SAAS,CAAC6C,GAAG,CAAC,uBAAuB,CAAC,KAAK,OAAO,EAAE;MACtD7C,SAAS,CAACkD,GAAG,CACX,uBAAuB,EACvBlD,SAAS,CAAC6C,GAAG,CAAC,uBAAuB,CACvC,CAAC;IACH;IAEAtD,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAG,EAAE;IACzBD,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAG,EAAE;EAC3B,CAAC;EAED,MAAMmM,KAAK,GAAG3L,SAAS,CACpB6C,GAAG,CAAC,gBAAgB,CAAC,CACrBwJ,IAAI,CAAEF,EAAE,IAAKA,EAAE,CAAChN,IAAI,KAAK,OAAO,CAAC;EACpC,IAAIwM,KAAK,EAAE;IACTpM,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAGmM,KAAK,CAACC,GAAG;IAChCrM,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAGmM,KAAK,CAACE,MAAM;EACrC;EAEA,eAAeS,mBAAmBA,CAACT,MAAM,EAAE;IACzC,OAAO,MAAM,IAAIU,OAAO,CAAEC,OAAO,IAAK;MACpC,MAAMC,KAAK,GAAG,IAAIC,cAAc,CAAC,CAAC;MAClCD,KAAK,CAACE,IAAI,CAAC,KAAK,EAAE,qCAAqC,CAAC;MACxDF,KAAK,CAACG,YAAY,GAAG,MAAM;MAC3BH,KAAK,CAACI,gBAAgB,CAAC,eAAe,EAAE,iBAAiB,GAAGhB,MAAM,CAAC;MACnEY,KAAK,CAACrB,MAAM,GAAG,MAAM;QACnBoB,OAAO,CAACC,KAAK,CAACrO,QAAQ,CAAC;MACzB,CAAC;MACDqO,KAAK,CAACK,IAAI,CAAC,CAAC;IACd,CAAC,CAAC;EACJ;EAEAvN,CAAC,CAAC,WAAW,CAAC,CAACyB,OAAO,GAAG,YAAY;IACnC,MAAM+L,aAAa,GAAG;MACpB5N,IAAI,EAAE,eAAe;MACrB0M,MAAM,EAAEtM,CAAC,CAAC,WAAW,CAAC,CAACC;IACzB,CAAC;IACD,IAAI;MACF,MAAMpB,QAAQ,GAAG,MAAMkO,mBAAmB,CAACS,aAAa,CAAClB,MAAM,CAAC;MAChEtM,CAAC,CAAC,mBAAmB,CAAC,CAACX,WAAW,GAAGoO,IAAI,CAACC,SAAS,CAAC7O,QAAQ,CAAC;MAC7D,IAAIA,QAAQ,EAAE;QACZ,MAAM4N,cAAc,GAAGhM,SAAS,CAAC6C,GAAG,CAAC,gBAAgB,CAAC;QAEtD,MAAMoJ,KAAK,GAAGD,cAAc,CAACE,SAAS,CACnCC,EAAE,IAAKA,EAAE,CAAChN,IAAI,KAAK,eACtB,CAAC;QACD,IAAI8M,KAAK,KAAK,CAAC,CAAC,EAAE;UAChBD,cAAc,CAACI,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;QACjC;QAEAD,cAAc,CAACzJ,IAAI,CAACwK,aAAa,CAAC;QAClC/M,SAAS,CAACkD,GAAG,CAAC,gBAAgB,EAAE8I,cAAc,CAAC;QAC/ChN,MAAM,CAACC,OAAO,CAACkL,WAAW,CAAC;UACzBC,MAAM,EAAE,2BAA2B;UACnC2C;QACF,CAAC,CAAC;MACJ,CAAC,MAAM;QACLzB,KAAK,CAAC,iBAAiB,CAAC;MAC1B;IACF,CAAC,CAAC,OAAO1L,CAAC,EAAE;MACV0L,KAAK,CAAC1L,CAAC,CAAC;IACV;EACF,CAAC;EAEDL,CAAC,CAAC,cAAc,CAAC,CAACyB,OAAO,GAAG,MAAM;IAChC,MAAMgL,cAAc,GAAGhM,SAAS,CAAC6C,GAAG,CAAC,gBAAgB,CAAC;IACtD,MAAMoJ,KAAK,GAAGD,cAAc,CAACE,SAAS,CACnCC,EAAE,IAAKA,EAAE,CAAChN,IAAI,KAAK,eACtB,CAAC;IACD,IAAI8M,KAAK,KAAK,CAAC,CAAC,EAAE;MAChBD,cAAc,CAACI,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;MAC/BjM,SAAS,CAACkD,GAAG,CAAC,gBAAgB,EAAE8I,cAAc,CAAC;MAC/ChN,MAAM,CAACC,OAAO,CAACkL,WAAW,CACxB;QAAEC,MAAM,EAAE;MAA4B,CAAC,EACvCI,gBACF,CAAC;IACH;IACAjL,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAG,EAAE;IACzBD,CAAC,CAAC,mBAAmB,CAAC,CAACX,WAAW,GAAG,EAAE;EACzC,CAAC;EAED,MAAMmO,aAAa,GAAG/M,SAAS,CAC5B6C,GAAG,CAAC,gBAAgB,CAAC,CACrBwJ,IAAI,CAAEF,EAAE,IAAKA,EAAE,CAAChN,IAAI,KAAK,eAAe,CAAC;EAC5C,IAAI4N,aAAa,EAAE;IACjBxN,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAGuN,aAAa,CAAClB,MAAM;IAC3CS,mBAAmB,CAACS,aAAa,CAAClB,MAAM,CAAC,CAAC1N,IAAI,CAAEC,QAAQ,IAAK;MAC3DmB,CAAC,CAAC,mBAAmB,CAAC,CAACX,WAAW,GAAGoO,IAAI,CAACC,SAAS,CAAC7O,QAAQ,CAAC;IAC/D,CAAC,CAAC;EACJ;;EAEA;EACA,IAAIiB,SAAS,CAACC,QAAQ,KAAK,OAAO,EAAE;IAClCC,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAG,KAAK;IAC5BD,CAAC,CAAC,cAAc,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;EAC1C,CAAC,MAAM;IACLH,CAAC,CAAC,WAAW,CAAC,CAACC,KAAK,GAAG,KAAK;IAC5BD,CAAC,CAAC,cAAc,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;EAC1C;EAEAH,CAAC,CAAC,WAAW,CAAC,CAACI,QAAQ,GAAIC,CAAC,IAAK;IAC/B,IAAIA,CAAC,CAACC,MAAM,CAACL,KAAK,KAAK,KAAK,EAAE;MAC5BD,CAAC,CAAC,cAAc,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;MACxCH,CAAC,CAAC,cAAc,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,OAAO;IAC3C,CAAC,MAAM;MACLH,CAAC,CAAC,cAAc,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,OAAO;MACzCH,CAAC,CAAC,cAAc,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;IAC1C;EACF,CAAC;AACH,CAAC,CAAC;AAEJnB,MAAM,CAACC,QAAQ,CAAC;EACd0O,GAAG,EAAE;AACP,CAAC,CAAC"}