{"version":3,"file":"../../lib/i18n.js","names":["getMessage","messageName","substitutions","chrome","i18n","translateAttributes","root","attributeName","element","querySelectorAll","text","getAttribute","setAttribute","translateDocument","document","textContent","tabs"],"sources":["i18n.js"],"sourcesContent":["\"use strict\";\r\n\r\nvoid (function () {\r\n  /**\r\n   * Gets the localized string for the specified message\r\n   * @example\r\n   * getMessage(\"lblAlwaysTranslate\", \"German\")\r\n   * // returns \"Always translate from German\"\r\n   * getMessage(\"lblAlwaysTranslate\", [\"German\"])\r\n   * // returns \"Always translate from German\"\r\n   * @param {string} messageName\r\n   * @param {string | string[]} substitutions\r\n   * @returns {string} localizedString\r\n   */\r\n  function getMessage(messageName, substitutions) {\r\n    return chrome.i18n.getMessage(messageName, substitutions);\r\n  }\r\n\r\n  /**\r\n   * translate attribute in all childNodes\r\n   * @param {Document | HTMLElement} root\r\n   * @param {string} attributeName\r\n   */\r\n  function translateAttributes(root, attributeName) {\r\n    for (const element of root.querySelectorAll(\r\n      `[data-i18n-${attributeName}]`\r\n    )) {\r\n      let text = getMessage(\r\n        element.getAttribute(`data-i18n-${attributeName}`),\r\n        element.getAttribute(\"data-i18n-ph-value\")\r\n      );\r\n      if (!text) {\r\n        continue;\r\n      }\r\n\r\n      element.setAttribute(attributeName, text);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * translate innerText and attributes for a Document or HTMLElement\r\n   * @param {Document | HTMLElement} root\r\n   */\r\n  //@ts-ignore\r\n  chrome.i18n.translateDocument = function (root = document) {\r\n    for (const element of root.querySelectorAll(\"[data-i18n]\")) {\r\n      let text = getMessage(\r\n        element.getAttribute(\"data-i18n\"),\r\n        element.getAttribute(\"data-i18n-ph-value\")\r\n      );\r\n      if (!text) {\r\n        continue;\r\n      }\r\n      element.textContent = text;\r\n    }\r\n\r\n    translateAttributes(root, \"title\");\r\n    translateAttributes(root, \"placeholder\");\r\n    translateAttributes(root, \"label\");\r\n  };\r\n\r\n  // detects if this script is not a contentScript and then call i18n.translateDocument\r\n  if (typeof chrome.tabs !== \"undefined\") {\r\n    //@ts-ignore\r\n    chrome.i18n.translateDocument();\r\n  }\r\n})();\r\n"],"mappings":"AAAA,YAAY;;AAEZ,KAAM,YAAY;EAChB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE,SAASA,UAAU,CAACC,WAAW,EAAEC,aAAa,EAAE;IAC9C,OAAOC,MAAM,CAACC,IAAI,CAACJ,UAAU,CAACC,WAAW,EAAEC,aAAa,CAAC;EAC3D;;EAEA;AACF;AACA;AACA;AACA;EACE,SAASG,mBAAmB,CAACC,IAAI,EAAEC,aAAa,EAAE;IAChD,KAAK,MAAMC,OAAO,IAAIF,IAAI,CAACG,gBAAgB,CACxC,cAAaF,aAAc,GAAE,CAC/B,EAAE;MACD,IAAIG,IAAI,GAAGV,UAAU,CACnBQ,OAAO,CAACG,YAAY,CAAE,aAAYJ,aAAc,EAAC,CAAC,EAClDC,OAAO,CAACG,YAAY,CAAC,oBAAoB,CAAC,CAC3C;MACD,IAAI,CAACD,IAAI,EAAE;QACT;MACF;MAEAF,OAAO,CAACI,YAAY,CAACL,aAAa,EAAEG,IAAI,CAAC;IAC3C;EACF;;EAEA;AACF;AACA;AACA;EACE;EACAP,MAAM,CAACC,IAAI,CAACS,iBAAiB,GAAG,UAAUP,IAAI,GAAGQ,QAAQ,EAAE;IACzD,KAAK,MAAMN,OAAO,IAAIF,IAAI,CAACG,gBAAgB,CAAC,aAAa,CAAC,EAAE;MAC1D,IAAIC,IAAI,GAAGV,UAAU,CACnBQ,OAAO,CAACG,YAAY,CAAC,WAAW,CAAC,EACjCH,OAAO,CAACG,YAAY,CAAC,oBAAoB,CAAC,CAC3C;MACD,IAAI,CAACD,IAAI,EAAE;QACT;MACF;MACAF,OAAO,CAACO,WAAW,GAAGL,IAAI;IAC5B;IAEAL,mBAAmB,CAACC,IAAI,EAAE,OAAO,CAAC;IAClCD,mBAAmB,CAACC,IAAI,EAAE,aAAa,CAAC;IACxCD,mBAAmB,CAACC,IAAI,EAAE,OAAO,CAAC;EACpC,CAAC;;EAED;EACA,IAAI,OAAOH,MAAM,CAACa,IAAI,KAAK,WAAW,EAAE;IACtC;IACAb,MAAM,CAACC,IAAI,CAACS,iBAAiB,EAAE;EACjC;AACF,CAAC,EAAG"}