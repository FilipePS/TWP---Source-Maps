{"version":3,"file":"../../popup/popup-translate-text.js","names":["$","document","querySelector","bind","twpConfig","onReady","backgroundTranslateSingleText","translationService","targetLanguage","source","Promise","resolve","reject","chrome","runtime","sendMessage","action","response","checkedLastError","currentTargetLanguages","get","currentTargetLanguage","currentTextTranslatorService","disableDarkMode","getElementById","el","createElement","setAttribute","textContent","body","appendChild","style","enableDarkMode","remove","matchMedia","matches","isPlayingAudio","playAudio","text","cbOnEnded","stopAudio","eOrigText","eOrigTextDiv","eTextTranslated","sGoogle","sYandex","sBing","sDeepL","eCopy","eListen","onclick","navigator","clipboard","writeText","then","backgroundColor","setTimeout","setCaretAtEnd","range","createRange","sel","window","getSelection","setStart","collapse","removeAllRanges","addRange","focus","translateNewInputTimerHandler","oninput","clearTimeout","translateText","set","classList","add","setTargetLanguage","e","target","getAttribute","langCode","twpLang","fixTLanguageCode","setTargetLanguageTextTranslation","querySelectorAll","forEach","li","msgListen","i18n","getMessage","msgStopListening","targetLanguageButtons","i","codeToLanguage","removeAttribute","onChanged","name","newvalue","result","isRtlLanguage","params","location","hash","substring","split","reduce","a","b","splited","decodeURIComponent"],"sources":["popup-translate-text.js"],"sourcesContent":["\"use strict\";\r\n\r\nlet $ = document.querySelector.bind(document);\r\n\r\ntwpConfig.onReady(function () {\r\n  function backgroundTranslateSingleText(\r\n    translationService,\r\n    targetLanguage,\r\n    source\r\n  ) {\r\n    return new Promise((resolve, reject) => {\r\n      chrome.runtime.sendMessage(\r\n        {\r\n          action: \"translateSingleText\",\r\n          translationService,\r\n          targetLanguage,\r\n          source,\r\n        },\r\n        (response) => {\r\n          checkedLastError();\r\n          resolve(response);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  let currentTargetLanguages = twpConfig.get(\"targetLanguages\");\r\n  let currentTargetLanguage = twpConfig.get(\"targetLanguageTextTranslation\");\r\n  let currentTextTranslatorService = twpConfig.get(\"textTranslatorService\");\r\n\r\n  function disableDarkMode() {\r\n    if (!document.getElementById(\"lightModeElement\")) {\r\n      const el = document.createElement(\"style\");\r\n      el.setAttribute(\"id\", \"lightModeElement\");\r\n      el.setAttribute(\"rel\", \"stylesheet\");\r\n      el.textContent = `\r\n            body {\r\n                color: rgb(0, 0, 0) !important;\r\n                background-color: rgb(215, 215, 215) !important;\r\n            }\r\n            .selected {\r\n                background-color: rgba(0, 0, 0, 0.6) !important;\r\n            }\r\n            hr {\r\n                width: 95%;\r\n                border: 1px rgba(0, 0, 0, 0.75) solid;\r\n            }\r\n            `;\r\n      document.body.appendChild(el);\r\n      document.querySelector(\"#listen svg\").style = \"fill: rgb(0, 0, 0)\";\r\n    }\r\n  }\r\n\r\n  function enableDarkMode() {\r\n    if (document.getElementById(\"#lightModeElement\")) {\r\n      document.getElementById(\"#lightModeElement\").remove();\r\n      document.querySelector(\"#listen svg\").style = \"fill: black\";\r\n    }\r\n  }\r\n\r\n  switch (twpConfig.get(\"darkMode\")) {\r\n    case \"auto\":\r\n      if (matchMedia(\"(prefers-color-scheme: dark)\").matches) {\r\n        enableDarkMode();\r\n      } else {\r\n        disableDarkMode();\r\n      }\r\n      break;\r\n    case \"yes\":\r\n      enableDarkMode();\r\n      break;\r\n    case \"no\":\r\n      disableDarkMode();\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  let isPlayingAudio = false;\r\n\r\n  function playAudio(text, targetLanguage, cbOnEnded = () => {}) {\r\n    isPlayingAudio = true;\r\n    chrome.runtime.sendMessage(\r\n      {\r\n        action: \"textToSpeech\",\r\n        text,\r\n        targetLanguage,\r\n      },\r\n      () => {\r\n        checkedLastError();\r\n        isPlayingAudio = false;\r\n        cbOnEnded();\r\n      }\r\n    );\r\n  }\r\n\r\n  function stopAudio() {\r\n    if (isPlayingAudio) {\r\n      chrome.runtime.sendMessage(\r\n        {\r\n          action: \"stopAudio\",\r\n        },\r\n        checkedLastError\r\n      );\r\n    }\r\n    isPlayingAudio = false;\r\n  }\r\n\r\n  function stopAudio() {\r\n    if (isPlayingAudio) {\r\n      chrome.runtime.sendMessage(\r\n        {\r\n          action: \"stopAudio\",\r\n        },\r\n        checkedLastError\r\n      );\r\n    }\r\n    isPlayingAudio = false;\r\n  }\r\n\r\n  const eOrigText = document.getElementById(\"eOrigText\");\r\n  const eOrigTextDiv = document.getElementById(\"eOrigTextDiv\");\r\n  const eTextTranslated = document.getElementById(\"eTextTranslated\");\r\n\r\n  const sGoogle = document.getElementById(\"sGoogle\");\r\n  const sYandex = document.getElementById(\"sYandex\");\r\n  const sBing = document.getElementById(\"sBing\");\r\n  const sDeepL = document.getElementById(\"sDeepL\");\r\n  const eCopy = document.getElementById(\"copy\");\r\n  const eListen = document.getElementById(\"listen\");\r\n\r\n  eCopy.onclick = () => {\r\n    navigator.clipboard\r\n      .writeText(eTextTranslated.textContent)\r\n      .then(async () => {\r\n        eCopy.style.backgroundColor = \"rgba(0, 255, 0, 0.4)\";\r\n        setTimeout(() => {\r\n          eCopy.style.backgroundColor = \"rgba(0, 0, 0, 0.4)\";\r\n        }, 500);\r\n      });\r\n  };\r\n\r\n  function setCaretAtEnd() {\r\n    const el = eOrigText;\r\n    const range = document.createRange();\r\n    const sel = window.getSelection();\r\n    range.setStart(el, 1);\r\n    range.collapse(true);\r\n    sel.removeAllRanges();\r\n    sel.addRange(range);\r\n    el.focus();\r\n  }\r\n\r\n  let translateNewInputTimerHandler;\r\n  eOrigText.oninput = () => {\r\n    clearTimeout(translateNewInputTimerHandler);\r\n    translateNewInputTimerHandler = setTimeout(translateText, 800);\r\n  };\r\n\r\n  sGoogle.onclick = () => {\r\n    currentTextTranslatorService = \"google\";\r\n    twpConfig.set(\"textTranslatorService\", \"google\");\r\n    translateText();\r\n\r\n    sGoogle.classList.remove(\"selected\");\r\n    sYandex.classList.remove(\"selected\");\r\n    sBing.classList.remove(\"selected\");\r\n    sDeepL.classList.remove(\"selected\");\r\n\r\n    sGoogle.classList.add(\"selected\");\r\n  };\r\n  sYandex.onclick = () => {\r\n    currentTextTranslatorService = \"yandex\";\r\n    twpConfig.set(\"textTranslatorService\", \"yandex\");\r\n    translateText();\r\n\r\n    sGoogle.classList.remove(\"selected\");\r\n    sYandex.classList.remove(\"selected\");\r\n    sBing.classList.remove(\"selected\");\r\n    sDeepL.classList.remove(\"selected\");\r\n\r\n    sYandex.classList.add(\"selected\");\r\n  };\r\n  sBing.onclick = () => {\r\n    currentTextTranslatorService = \"bing\";\r\n    twpConfig.set(\"textTranslatorService\", \"bing\");\r\n    translateText();\r\n\r\n    sGoogle.classList.remove(\"selected\");\r\n    sYandex.classList.remove(\"selected\");\r\n    sBing.classList.remove(\"selected\");\r\n    sDeepL.classList.remove(\"selected\");\r\n\r\n    sBing.classList.add(\"selected\");\r\n  };\r\n  sDeepL.onclick = () => {\r\n    currentTextTranslatorService = \"deepl\";\r\n    twpConfig.set(\"textTranslatorService\", \"deepl\");\r\n    translateText();\r\n\r\n    sGoogle.classList.remove(\"selected\");\r\n    sYandex.classList.remove(\"selected\");\r\n    sBing.classList.remove(\"selected\");\r\n    sDeepL.classList.remove(\"selected\");\r\n\r\n    sDeepL.classList.add(\"selected\");\r\n  };\r\n\r\n  const setTargetLanguage = document.getElementById(\"setTargetLanguage\");\r\n  setTargetLanguage.onclick = (e) => {\r\n    if (e.target.getAttribute(\"value\")) {\r\n      const langCode = twpLang.fixTLanguageCode(e.target.getAttribute(\"value\"));\r\n      if (langCode) {\r\n        currentTargetLanguage = langCode;\r\n        twpConfig.setTargetLanguageTextTranslation(langCode);\r\n        translateText();\r\n      }\r\n\r\n      document.querySelectorAll(\"#setTargetLanguage li\").forEach((li) => {\r\n        li.classList.remove(\"selected\");\r\n      });\r\n\r\n      e.target.classList.add(\"selected\");\r\n    }\r\n  };\r\n\r\n  eListen.classList.remove(\"selected\");\r\n  eListen.onclick = () => {\r\n    const msgListen = chrome.i18n.getMessage(\"btnListen\");\r\n    const msgStopListening = chrome.i18n.getMessage(\"btnStopListening\");\r\n\r\n    eListen.classList.remove(\"selected\");\r\n    eListen.setAttribute(\"title\", msgStopListening);\r\n\r\n    if (isPlayingAudio) {\r\n      stopAudio();\r\n      eListen.classList.remove(\"selected\");\r\n    } else {\r\n      playAudio(eTextTranslated.textContent, currentTargetLanguage, () => {\r\n        eListen.classList.remove(\"selected\");\r\n        eListen.setAttribute(\"title\", msgListen);\r\n      });\r\n      eListen.classList.add(\"selected\");\r\n    }\r\n  };\r\n\r\n  const targetLanguageButtons = document.querySelectorAll(\r\n    \"#setTargetLanguage li\"\r\n  );\r\n\r\n  for (let i = 0; i < 3; i++) {\r\n    if (currentTargetLanguages[i] == currentTargetLanguage) {\r\n      targetLanguageButtons[i].classList.add(\"selected\");\r\n    }\r\n    targetLanguageButtons[i].textContent = currentTargetLanguages[i];\r\n    targetLanguageButtons[i].setAttribute(\"value\", currentTargetLanguages[i]);\r\n    targetLanguageButtons[i].setAttribute(\r\n      \"title\",\r\n      twpLang.codeToLanguage(currentTargetLanguages[i])\r\n    );\r\n  }\r\n\r\n  switch (currentTextTranslatorService) {\r\n    case \"yandex\":\r\n      sYandex.classList.add(\"selected\");\r\n      break;\r\n    case \"deepl\":\r\n      sDeepL.classList.add(\"selected\");\r\n      break;\r\n    case \"bing\":\r\n      sBing.classList.add(\"selected\");\r\n      break;\r\n    case \"google\":\r\n      sGoogle.classList.add(\"selected\");\r\n      break;\r\n    default:\r\n      sGoogle.classList.add(\"selected\");\r\n      break;\r\n  }\r\n\r\n  if (twpConfig.get(\"enableDeepL\") === \"yes\") {\r\n    sDeepL.removeAttribute(\"hidden\");\r\n  } else {\r\n    sDeepL.setAttribute(\"hidden\", \"\");\r\n  }\r\n  twpConfig.onChanged((name, newvalue) => {\r\n    switch (name) {\r\n      case \"enableDeepL\":\r\n        if (newvalue === \"yes\") {\r\n          sDeepL.removeAttribute(\"hidden\");\r\n        } else {\r\n          sDeepL.setAttribute(\"hidden\", \"\");\r\n        }\r\n        break;\r\n    }\r\n  });\r\n\r\n  function translateText() {\r\n    stopAudio();\r\n\r\n    backgroundTranslateSingleText(\r\n      currentTextTranslatorService,\r\n      currentTargetLanguage,\r\n      eOrigText.textContent\r\n    ).then((result) => {\r\n      if (twpLang.isRtlLanguage(currentTargetLanguage)) {\r\n        eTextTranslated.setAttribute(\"dir\", \"rtl\");\r\n      } else {\r\n        eTextTranslated.setAttribute(\"dir\", \"ltr\");\r\n      }\r\n      eTextTranslated.textContent = result;\r\n    });\r\n  }\r\n\r\n  let params = location.hash\r\n    .substring(1)\r\n    .split(\"&\")\r\n    .reduce((a, b) => {\r\n      const splited = b.split(\"=\");\r\n      a[decodeURIComponent(splited[0])] = decodeURIComponent(splited[1]);\r\n      return a;\r\n    }, {});\r\n\r\n  if (params[\"text\"]) {\r\n    eOrigText.textContent = params[\"text\"];\r\n    setCaretAtEnd();\r\n    translateText();\r\n  }\r\n});\r\n"],"mappings":"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"}