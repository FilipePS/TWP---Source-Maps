{"version":3,"file":"../../popup/popup-change-language.js","names":["$","document","querySelector","bind","selectTargetLanguage","addEventListener","window","location","twpConfig","setTargetLanguage","value","onReady","then","twpI18n","updateUiMessages","translateDocument","langs","twpLang","getLanguageList","langsSorted","i","push","sort","a","b","localeCompare","eAllLangs","forEach","option","createElement","textContent","appendChild","eRecentsLangs","get","disableDarkMode","el","setAttribute","head","enableDarkMode","remove","matchMedia","matches"],"sources":["popup-change-language.js"],"sourcesContent":["\"use strict\";\r\n\r\nlet $ = document.querySelector.bind(document);\r\n\r\nconst selectTargetLanguage = $(\"select\");\r\n\r\n$(\"#btnClose\").addEventListener(\"click\", () => {\r\n  window.location = \"popup.html\";\r\n});\r\n\r\n$(\"#btnApply\").addEventListener(\"click\", () => {\r\n  twpConfig.setTargetLanguage(selectTargetLanguage.value, true);\r\n  window.location = \"popup.html\";\r\n});\r\n\r\ntwpConfig.onReady().then(() => twpI18n.updateUiMessages()).then(() => {\r\n  twpI18n.translateDocument();\r\n\r\n  let langs = twpLang.getLanguageList();\r\n\r\n  const langsSorted = [];\r\n\r\n  for (const i in langs) {\r\n    langsSorted.push([i, langs[i]]);\r\n  }\r\n\r\n  langsSorted.sort(function (a, b) {\r\n    return a[1].localeCompare(b[1]);\r\n  });\r\n\r\n  const eAllLangs = selectTargetLanguage.querySelector('[name=\"all\"]');\r\n  langsSorted.forEach((value) => {\r\n    const option = document.createElement(\"option\");\r\n    option.value = value[0];\r\n    option.textContent = value[1];\r\n    eAllLangs.appendChild(option);\r\n  });\r\n\r\n  const eRecentsLangs = selectTargetLanguage.querySelector('[name=\"targets\"]');\r\n  for (const value of twpConfig.get(\"targetLanguages\")) {\r\n    const option = document.createElement(\"option\");\r\n    option.value = value;\r\n    option.textContent = langs[value];\r\n    eRecentsLangs.appendChild(option);\r\n  }\r\n  selectTargetLanguage.value = twpConfig.get(\"targetLanguages\")[0];\r\n\r\n  function disableDarkMode() {\r\n    if (!$(\"#lightModeElement\")) {\r\n      const el = document.createElement(\"style\");\r\n      el.setAttribute(\"id\", \"lightModeElement\");\r\n      el.setAttribute(\"rel\", \"stylesheet\");\r\n      el.textContent = `\r\n            body {\r\n                color: rgb(0, 0, 0);\r\n                background-color: rgb(224, 224, 224);\r\n            }\r\n\r\n            .select, #btnApply {\r\n                color: black;\r\n                background-color: rgba(0, 0, 0, 0.2);\r\n            }\r\n            \r\n            .select:hover, #btnApply:hover {\r\n                background-color: rgba(0, 0, 0, 0.4);\r\n            }\r\n\r\n            .mdiv, .md {\r\n                background-color: rgb(0, 0, 0);\r\n            }\r\n            `;\r\n      document.head.appendChild(el);\r\n    }\r\n  }\r\n\r\n  function enableDarkMode() {\r\n    if ($(\"#lightModeElement\")) {\r\n      $(\"#lightModeElement\").remove();\r\n    }\r\n  }\r\n\r\n  switch (twpConfig.get(\"darkMode\")) {\r\n    case \"auto\":\r\n      if (matchMedia(\"(prefers-color-scheme: dark)\").matches) {\r\n        enableDarkMode();\r\n      } else {\r\n        disableDarkMode();\r\n      }\r\n      break;\r\n    case \"yes\":\r\n      enableDarkMode();\r\n      break;\r\n    case \"no\":\r\n      disableDarkMode();\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n});\r\n"],"mappings":"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"}