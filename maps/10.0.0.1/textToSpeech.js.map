{"version":3,"file":"../../background/textToSpeech.js","names":["_classStaticPrivateFieldSpecSet","receiver","classConstructor","descriptor","value","_classCheckPrivateStaticAccess","_classCheckPrivateStaticFieldDescriptor","_classApplyDescriptorSet","set","call","writable","TypeError","_classStaticPrivateFieldSpecGet","_classApplyDescriptorGet","action","undefined","get","textToSpeech","BingHelper","IG","_IG","IID","_IID","key","_key","token","_token","findAuth","_promise","Promise","resolve","updateBingAuth","_lastRequestTime","date","Date","setMinutes","getMinutes","_notFound","getTime","now","http","XMLHttpRequest","open","send","onload","e","responseText","length","Error","match","abhStartText","abhStartIndex","indexOf","abhEndIndex","abhText","slice","abh","JSON","parse","onerror","onabort","ontimeout","console","error","finally","getLanguageData","language","replacements","search","replace","forEach","r","languageData","locale","gender","voice","data","find","AudioAmplifier","constructor","sources","window","audioCtx","AudioContext","gainNode","createGain","gain","connect","destination","addAudio","audio","source","createMediaElementSource","push","setVolume","volume","Service","serviceName","baseURL","xhrMethod","cbGetExtraParameters","cbGetRequestBody","audios","Map","audioSpeed","audioAmplifier","getRequests","fullText","fullTextSplitted","trim","split","word","requests","requestString","text","makeRequest","targetLanguage","reject","xhr","reader","FileReader","onloadend","result","readAsDataURL","response","responseType","setRequestHeader","promises","requestText","audioKey","join","then","Audio","catch","all","play","map","stopAll","Array","playAll","currentIndex","playbackRate","onended","HTMLAudioElement","setAudioSpeed","speed","setAudioVolume","pause","currentTime","googleService","getExtraParameters","encodeURIComponent","bingService","getRequestBody","domParser","DOMParser","doc","parseFromString","querySelector","setAttribute","textContent","params","URLSearchParams","append","XMLSerializer","serializeToString","toString","chrome","runtime","onMessage","addListener","request","sender","sendResponse","twpConfig","onReady","onChanged","name","newvalue","google"],"sources":["textToSpeech.js"],"sourcesContent":["\"use strict\";\r\n\r\nconst textToSpeech = (function () {\r\n  const textToSpeech = {};\r\n\r\n  class BingHelper {\r\n    /** @type {number} */\r\n    static #lastRequestTime = null;\r\n    /** @type {string} */\r\n    static #IG = null;\r\n    /** @type {string} */\r\n    static #IID = null;\r\n    /** @type {number} */\r\n    static #key = null;\r\n    /** @type {string} */\r\n    static #token = null;\r\n    /** @type {boolean} */\r\n    static #notFound = false;\r\n    /** @type {Promise<void>} */\r\n    static #promise = null;\r\n\r\n    static get IG() {\r\n      return BingHelper.#IG;\r\n    }\r\n    static get IID() {\r\n      return BingHelper.#IID;\r\n    }\r\n    static get key() {\r\n      return BingHelper.#key;\r\n    }\r\n    static get token() {\r\n      return BingHelper.#token;\r\n    }\r\n\r\n    /**\r\n     * Find the SID (IID and IG) of Bing Translator. The SID value is used in translation requests.\r\n     * @returns {Promise<void>}\r\n     */\r\n    static async findAuth() {\r\n      if (BingHelper.#promise) return await BingHelper.#promise;\r\n\r\n      BingHelper.#promise = new Promise((resolve) => {\r\n        let updateBingAuth = false;\r\n        if (BingHelper.#lastRequestTime) {\r\n          const date = new Date();\r\n          if (BingHelper.#IG) {\r\n            date.setMinutes(date.getMinutes() - 30);\r\n          } else if (BingHelper.#notFound) {\r\n            date.setMinutes(date.getMinutes() - 5);\r\n          } else {\r\n            date.setMinutes(date.getMinutes() - 2);\r\n          }\r\n          if (date.getTime() > BingHelper.#lastRequestTime) {\r\n            updateBingAuth = true;\r\n          }\r\n        } else {\r\n          updateBingAuth = true;\r\n        }\r\n\r\n        if (updateBingAuth) {\r\n          BingHelper.#lastRequestTime = Date.now();\r\n\r\n          const http = new XMLHttpRequest();\r\n          http.open(\"GET\", \"https://www.bing.com/translator\");\r\n          http.send();\r\n          http.onload = (e) => {\r\n            try {\r\n              if (!(http.responseText && http.responseText.length > 1)) {\r\n                throw new Error(\"Not found\");\r\n              }\r\n\r\n              const responseText = http.responseText;\r\n              const IG = responseText.match(/IG:\"([^\"]+)\"/)[1];\r\n              const IID = responseText.match(/data\\-iid\\=\"([^\"]+)\"/)[1];\r\n\r\n              const abhStartText = \"params_AbusePreventionHelper = [\";\r\n              const abhStartIndex = responseText.indexOf(abhStartText);\r\n              if (abhStartIndex === -1) {\r\n                throw new Error(\"Not found 2\");\r\n              }\r\n              const abhEndIndex = responseText.indexOf(\"]\", abhStartIndex);\r\n              if (abhEndIndex === -1) {\r\n                throw new Error(\"Not found 3\");\r\n              }\r\n              const abhText = responseText.slice(\r\n                abhStartIndex + abhStartText.length - 1,\r\n                abhEndIndex + 1\r\n              );\r\n              const abh = JSON.parse(abhText);\r\n              const key = abh[0];\r\n              const token = abh[1];\r\n\r\n              BingHelper.#IG = IG;\r\n              BingHelper.#IID = IID;\r\n              BingHelper.#key = key;\r\n              BingHelper.#token = token;\r\n              BingHelper.#notFound = false;\r\n            } catch (e) {\r\n              BingHelper.#notFound = true;\r\n            } finally {\r\n              resolve();\r\n            }\r\n          };\r\n          http.onerror =\r\n            http.onabort =\r\n            http.ontimeout =\r\n              (e) => {\r\n                console.error(e);\r\n                resolve();\r\n              };\r\n        } else {\r\n          resolve();\r\n        }\r\n      });\r\n\r\n      BingHelper.#promise.finally(() => {\r\n        BingHelper.#promise = null;\r\n      });\r\n\r\n      return await BingHelper.#promise;\r\n    }\r\n\r\n    /**\r\n     * @typedef {Object} LanguageData\r\n     * @property {String} language\r\n     * @property {String} locale\r\n     * @property {String} gender\r\n     * @property {String} voice\r\n     */\r\n\r\n    /**\r\n     * Get the language data for the language.\r\n     * @param {string} language\r\n     * @returns {LanguageData} languageData\r\n     */\r\n    static getLanguageData(language) {\r\n      /** @type {{search: string, replace: string}[]} */\r\n      // prettier-ignore\r\n      const replacements = [\r\n        { search: \"zh-CN\", replace: \"zh-Hans\", },\r\n        { search: \"zh-TW\", replace: \"zh-Hant\", },\r\n        { search: \"tl\", replace: \"fil\", },\r\n        { search: \"hmn\", replace: \"mww\", },\r\n        { search: \"ku\", replace: \"kmr\", },\r\n        { search: \"ckb\", replace: \"ku\", },\r\n        { search: \"mn\", replace: \"mn-Cyrl\", },\r\n        { search: \"no\", replace: \"nb\", },\r\n        { search: \"lg\", replace: \"lug\", },\r\n        { search: \"sr\", replace: \"sr-Cyrl\", },\r\n      ];\r\n      replacements.forEach((r) => {\r\n        if (language === r.search) {\r\n          language = r.replace;\r\n        }\r\n      });\r\n\r\n      // prettier-ignore\r\n      const languageData = [\r\n        { language: 'af', locale: 'af-ZA', gender: 'Female', voice: 'af-ZA-AdriNeural' },\r\n        { language: 'am', locale: 'am-ET', gender: 'Female', voice: 'am-ET-MekdesNeural' },\r\n        { language: 'ar', locale: 'ar-SA', gender: 'Male', voice: 'ar-SA-HamedNeural' },\r\n        { language: 'bn', locale: 'bn-IN', gender: 'Female', voice: 'bn-IN-TanishaaNeural' },\r\n        { language: 'bg', locale: 'bg-BG', gender: 'Male', voice: 'bg-BG-BorislavNeural' },\r\n        { language: 'ca', locale: 'ca-ES', gender: 'Female', voice: 'ca-ES-JoanaNeural' },\r\n        { language: 'cs', locale: 'cs-CZ', gender: 'Male', voice: 'cs-CZ-AntoninNeural' },\r\n        { language: 'cy', locale: 'cy-GB', gender: 'Female', voice: 'cy-GB-NiaNeural' },\r\n        { language: 'da', locale: 'da-DK', gender: 'Female', voice: 'da-DK-ChristelNeural' },\r\n        { language: 'de', locale: 'de-DE', gender: 'Female', voice: 'de-DE-KatjaNeural' },\r\n        { language: 'el', locale: 'el-GR', gender: 'Male', voice: 'el-GR-NestorasNeural' },\r\n        { language: 'en', locale: 'en-US', gender: 'Female', voice: 'en-US-AriaNeural' },\r\n        { language: 'es', locale: 'es-ES', gender: 'Female', voice: 'es-ES-ElviraNeural' },\r\n        { language: 'et', locale: 'et-EE', gender: 'Female', voice: 'et-EE-AnuNeural' },\r\n        { language: 'fa', locale: 'fa-IR', gender: 'Female', voice: 'fa-IR-DilaraNeural' },\r\n        { language: 'fi', locale: 'fi-FI', gender: 'Female', voice: 'fi-FI-NooraNeural' },\r\n        { language: 'fr', locale: 'fr-FR', gender: 'Female', voice: 'fr-FR-DeniseNeural' },\r\n        { language: 'fr-CA', locale: 'fr-CA', gender: 'Female', voice: 'fr-CA-SylvieNeural' },\r\n        { language: 'ga', locale: 'ga-IE', gender: 'Female', voice: 'ga-IE-OrlaNeural' },\r\n        { language: 'gu', locale: 'gu-IN', gender: 'Female', voice: 'gu-IN-DhwaniNeural' },\r\n        { language: 'he', locale: 'he-IL', gender: 'Male', voice: 'he-IL-AvriNeural' },\r\n        { language: 'hi', locale: 'hi-IN', gender: 'Female', voice: 'hi-IN-SwaraNeural' },\r\n        { language: 'hr', locale: 'hr-HR', gender: 'Male', voice: 'hr-HR-SreckoNeural' },\r\n        { language: 'hu', locale: 'hu-HU', gender: 'Male', voice: 'hu-HU-TamasNeural' },\r\n        { language: 'id', locale: 'id-ID', gender: 'Male', voice: 'id-ID-ArdiNeural' },\r\n        { language: 'is', locale: 'is-IS', gender: 'Female', voice: 'is-IS-GudrunNeural' },\r\n        { language: 'it', locale: 'it-IT', gender: 'Male', voice: 'it-IT-DiegoNeural' },\r\n        { language: 'ja', locale: 'ja-JP', gender: 'Female', voice: 'ja-JP-NanamiNeural' },\r\n        { language: 'kk', locale: 'kk-KZ', gender: 'Female', voice: 'kk-KZ-AigulNeural' },\r\n        { language: 'km', locale: 'km-KH', gender: 'Female', voice: 'km-KH-SreymomNeural' },\r\n        { language: 'kn', locale: 'kn-IN', gender: 'Female', voice: 'kn-IN-SapnaNeural' },\r\n        { language: 'ko', locale: 'ko-KR', gender: 'Female', voice: 'ko-KR-SunHiNeural' },\r\n        { language: 'lo', locale: 'lo-LA', gender: 'Female', voice: 'lo-LA-KeomanyNeural' },\r\n        { language: 'lv', locale: 'lv-LV', gender: 'Female', voice: 'lv-LV-EveritaNeural' },\r\n        { language: 'lt', locale: 'lt-LT', gender: 'Female', voice: 'lt-LT-OnaNeural' },\r\n        { language: 'mk', locale: 'mk-MK', gender: 'Female', voice: 'mk-MK-MarijaNeural' },\r\n        { language: 'ml', locale: 'ml-IN', gender: 'Female', voice: 'ml-IN-SobhanaNeural' },\r\n        { language: 'mr', locale: 'mr-IN', gender: 'Female', voice: 'mr-IN-AarohiNeural' },\r\n        { language: 'ms', locale: 'ms-MY', gender: 'Male', voice: 'ms-MY-OsmanNeural' },\r\n        { language: 'mt', locale: 'mt-MT', gender: 'Female', voice: 'mt-MT-GraceNeural' },\r\n        { language: 'my', locale: 'my-MM', gender: 'Female', voice: 'my-MM-NilarNeural' },\r\n        { language: 'nl', locale: 'nl-NL', gender: 'Female', voice: 'nl-NL-ColetteNeural' },\r\n        { language: 'nb', locale: 'nb-NO', gender: 'Female', voice: 'nb-NO-PernilleNeural' },\r\n        { language: 'pl', locale: 'pl-PL', gender: 'Female', voice: 'pl-PL-ZofiaNeural' },\r\n        { language: 'ps', locale: 'ps-AF', gender: 'Female', voice: 'ps-AF-LatifaNeural' },\r\n        { language: 'pt', locale: 'pt-BR', gender: 'Female', voice: 'pt-BR-FranciscaNeural' },\r\n        { language: 'pt-PT', locale: 'pt-PT', gender: 'Female', voice: 'pt-PT-FernandaNeural' },\r\n        { language: 'ro', locale: 'ro-RO', gender: 'Male', voice: 'ro-RO-EmilNeural' },\r\n        { language: 'ru', locale: 'ru-RU', gender: 'Female', voice: 'ru-RU-DariyaNeural' },\r\n        { language: 'sk', locale: 'sk-SK', gender: 'Male', voice: 'sk-SK-LukasNeural' },\r\n        { language: 'sl', locale: 'sl-SI', gender: 'Male', voice: 'sl-SI-RokNeural' },\r\n        { language: 'sr-Cyrl', locale: 'sr-RS', gender: 'Female', voice: 'sr-RS-SophieNeural' },\r\n        { language: 'sv', locale: 'sv-SE', gender: 'Female', voice: 'sv-SE-SofieNeural' },\r\n        { language: 'ta', locale: 'ta-IN', gender: 'Female', voice: 'ta-IN-PallaviNeural' },\r\n        { language: 'te', locale: 'te-IN', gender: 'Male', voice: 'te-IN-ShrutiNeural' },\r\n        { language: 'th', locale: 'th-TH', gender: 'Male', voice: 'th-TH-NiwatNeural' },\r\n        { language: 'tr', locale: 'tr-TR', gender: 'Female', voice: 'tr-TR-EmelNeural' },\r\n        { language: 'uk', locale: 'uk-UA', gender: 'Female', voice: 'uk-UA-PolinaNeural' },\r\n        { language: 'ur', locale: 'ur-IN', gender: 'Female', voice: 'ur-IN-GulNeural' },\r\n        { language: 'uz', locale: 'uz-UZ', gender: 'Female', voice: 'uz-UZ-MadinaNeural' },\r\n        { language: 'vi', locale: 'vi-VN', gender: 'Male', voice: 'vi-VN-NamMinhNeural' },\r\n        { language: 'zh-Hans', locale: 'zh-CN', gender: 'Female', voice: 'zh-CN-XiaoxiaoNeural' },\r\n        { language: 'zh-Hant', locale: 'zh-CN', gender: 'Female', voice: 'zh-CN-XiaoxiaoNeural' },\r\n        { language: 'yue', locale: 'zh-HK', gender: 'Female', voice: 'zh-HK-HiuGaaiNeural' }\r\n      ];\r\n\r\n      const data = languageData.find((data) => data.language === language);\r\n      return data;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @callback Callback_Speech_cbGetExtraParameters\r\n   * @param {string} text\r\n   * @param {string} targetLanguage\r\n   * @return {string} urlParamsString\r\n   */\r\n\r\n  /**\r\n   * @callback Callback_Speech_cbGetRequestBody\r\n   * @param {string} text\r\n   * @param {string} targetLanguage\r\n   * @return {string} requestBody\r\n   */\r\n\r\n  class AudioAmplifier {\r\n    /**\r\n     * Defines the Amplifier class for the text-to-speech service.\r\n     */\r\n    constructor() {\r\n      /** @type {MediaElementAudioSourceNode[]} */\r\n      this.sources = [];\r\n\r\n      if (\"AudioContext\" in window) {\r\n        this.audioCtx = new AudioContext();\r\n        this.gainNode = this.audioCtx.createGain();\r\n        this.gainNode.gain.value = 1;\r\n        this.gainNode.connect(this.audioCtx.destination);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add an audio to the amplifier.\r\n     * @param {HTMLAudioElement} audio\r\n     */\r\n    addAudio(audio) {\r\n      if (!this.audioCtx) return;\r\n      const source = this.audioCtx.createMediaElementSource(audio);\r\n      source.connect(this.gainNode);\r\n      this.sources.push(source);\r\n    }\r\n\r\n    /**\r\n     * Set the volume of the amplifier.\r\n     * @param {number} volume\r\n     */\r\n    setVolume(volume) {\r\n      if (!this.gainNode) return;\r\n      if (volume > 1) {\r\n        this.gainNode.gain.value = volume;\r\n      } else {\r\n        this.gainNode.gain.value = 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  class Service {\r\n    /**\r\n     * Defines the Service class for the text-to-speech service.\r\n     * @param {string} serviceName\r\n     * @param {string} baseURL\r\n     * @param {\"GET\" | \"POST\"} xhrMethod\r\n     * @param {Callback_Speech_cbGetExtraParameters} cbGetExtraParameters\r\n     * @param {Callback_Speech_cbGetRequestBody} cbGetRequestBody\r\n     */\r\n    constructor(\r\n      serviceName,\r\n      baseURL,\r\n      xhrMethod,\r\n      cbGetExtraParameters,\r\n      cbGetRequestBody = null\r\n    ) {\r\n      this.serviceName = serviceName;\r\n      this.baseURL = baseURL;\r\n      this.xhrMethod = xhrMethod;\r\n      this.cbGetExtraParameters = cbGetExtraParameters;\r\n      this.cbGetRequestBody = cbGetRequestBody;\r\n\r\n      /** @type {Map<string, HTMLAudioElement>} */\r\n      this.audios = new Map();\r\n      this.audioSpeed = 1.0;\r\n\r\n      this.audioAmplifier = new AudioAmplifier();\r\n    }\r\n\r\n    /**\r\n     * Takes a long text and splits the text into an array of strings. Each string will be less than 170 characters.\r\n     *\r\n     * The goal is not to exceed the quota for text-to-speech services.\r\n     * @param {string} fullText\r\n     * @returns {string[]} requestStrings\r\n     */\r\n    getRequests(fullText) {\r\n      /** @type {string[]} */\r\n      const fullTextSplitted = [];\r\n      fullText\r\n        .trim()\r\n        .split(\" \")\r\n        .forEach((word) => {\r\n          if (word.length > 160) {\r\n            while (word.length > 160) {\r\n              fullTextSplitted.push(word.slice(0, 160));\r\n              word = word.slice(160);\r\n            }\r\n            if (word.trim().length > 0) {\r\n              fullTextSplitted.push(word);\r\n            }\r\n          } else if (word.trim().length > 0) {\r\n            fullTextSplitted.push(word);\r\n          }\r\n        });\r\n\r\n      /** @type {string[]} */\r\n      const requests = [];\r\n      let requestString = \"\";\r\n      for (let text of fullTextSplitted) {\r\n        text += \" \";\r\n        if (requestString.length + text.length < 170) {\r\n          requestString += text;\r\n        } else {\r\n          requests.push(requestString);\r\n          requestString = text;\r\n        }\r\n      }\r\n      if (requestString.trim().length > 0) {\r\n        requests.push(requestString);\r\n        requestString = \"\";\r\n      }\r\n\r\n      return requests;\r\n    }\r\n\r\n    /**\r\n     * Makes the request to the text-to-speech service and returns a promise that resolves with the result of the request.\r\n     *\r\n     * The promise is rejected if there is an error.\r\n     * @param {string} text\r\n     * @param {string} targetLanguage\r\n     * @returns {Promise<any>} Promise\\<blob\\>\r\n     */\r\n    async makeRequest(text, targetLanguage) {\r\n      return await new Promise((resolve, reject) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.onload = (e) => {\r\n          const reader = new FileReader();\r\n          reader.onloadend = () => resolve(reader.result);\r\n          reader.onerror = () => reject();\r\n          reader.readAsDataURL(xhr.response);\r\n        };\r\n        xhr.onerror = (e) => {\r\n          console.error(e);\r\n          reject();\r\n        };\r\n        xhr.open(\r\n          this.xhrMethod,\r\n          this.baseURL + this.cbGetExtraParameters(text, targetLanguage)\r\n        );\r\n        xhr.responseType = \"blob\";\r\n        if (this.cbGetRequestBody) {\r\n          xhr.setRequestHeader(\r\n            \"Content-Type\",\r\n            \"application/x-www-form-urlencoded\"\r\n          );\r\n          xhr.send(this.cbGetRequestBody(text, targetLanguage));\r\n        } else {\r\n          xhr.send();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Transform text into audio and play then.\r\n     * @param {string} fullText\r\n     * @param {string} targetLanguage\r\n     * @returns {Promise<void>} Promise\\<void\\>\r\n     */\r\n    async textToSpeech(fullText, targetLanguage) {\r\n      if (this.serviceName === \"bing\") {\r\n        await BingHelper.findAuth();\r\n      }\r\n\r\n      const requests = this.getRequests(fullText);\r\n      const promises = [];\r\n\r\n      for (const requestText of requests) {\r\n        const audioKey = [targetLanguage, requestText].join(\", \");\r\n        if (!this.audios.get(audioKey)) {\r\n          promises.push(\r\n            this.makeRequest(requestText, targetLanguage)\r\n              .then(\r\n                /** @type {string} */ (response) => {\r\n                  const audio = new Audio(response);\r\n                  this.audioAmplifier.addAudio(audio);\r\n                  this.audios.set(audioKey, audio);\r\n                  return response;\r\n                }\r\n              )\r\n              .catch((e) => {\r\n                console.error(e);\r\n                return null;\r\n              })\r\n          );\r\n        }\r\n      }\r\n\r\n      await Promise.all(promises);\r\n      return await this.play(\r\n        requests.map((text) =>\r\n          this.audios.get([targetLanguage, text].join(\", \"))\r\n        )\r\n      );\r\n    }\r\n\r\n    /**\r\n     * Play the audio or all the audio in the array.\r\n     * @param {HTMLAudioElement | HTMLAudioElement[]} audios\r\n     */\r\n    async play(audios) {\r\n      this.stopAll();\r\n      return await new Promise((resolve) => {\r\n        try {\r\n          if (audios instanceof Array) {\r\n            const playAll = (/** @type {number} */ currentIndex) => {\r\n              this.stopAll();\r\n              const audio = audios[currentIndex];\r\n              if (audio) {\r\n                audio.playbackRate = this.audioSpeed;\r\n                audio.play();\r\n                audio.onended = () => {\r\n                  playAll(currentIndex + 1);\r\n                };\r\n              } else {\r\n                resolve();\r\n              }\r\n            };\r\n            playAll(0);\r\n          } else if (audios instanceof HTMLAudioElement) {\r\n            audios.playbackRate = this.audioSpeed;\r\n            audios.play();\r\n            audios.onended = () => {\r\n              resolve();\r\n            };\r\n          }\r\n        } catch (e) {\r\n          console.error(e);\r\n          resolve();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Sets the audio speed\r\n     * @param {number} speed\r\n     */\r\n    setAudioSpeed(speed) {\r\n      this.audioSpeed = speed;\r\n      this.audios.forEach((audio) => {\r\n        audio.playbackRate = this.audioSpeed;\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Sets the audio volume\r\n     * @param {number} volume\r\n     */\r\n    setAudioVolume(volume) {\r\n      this.audios.forEach((audio) => {\r\n        audio.volume = volume > 1 ? 1 : volume;\r\n      });\r\n      this.audioAmplifier.setVolume(volume < 1 ? 1 : volume);\r\n    }\r\n\r\n    /**\r\n     * Pause all audio and reset audio time to start\r\n     */\r\n    stopAll() {\r\n      this.audios.forEach((audio) => {\r\n        audio.pause();\r\n        audio.currentTime = 0;\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create a Service instance based on google's text-to-speech service.\r\n  const googleService = new Service(\r\n    \"google\",\r\n    \"https://translate.google.com/translate_tts?ie=UTF-8\",\r\n    \"GET\",\r\n    function getExtraParameters(text, targetLanguage) {\r\n      return `&tl=${targetLanguage}&client=dict-chrome-ex&ttsspeed=0.5&q=${encodeURIComponent(\r\n        text\r\n      )}`;\r\n    }\r\n  );\r\n\r\n  // Create a Service instance based on bings's text-to-speech service.\r\n  const bingService = new Service(\r\n    \"bing\",\r\n    \"https://www.bing.com/tfettts?isVertical=1\",\r\n    \"POST\",\r\n    function getExtraParameters(text, targetLanguage) {\r\n      return `&&IG=${encodeURIComponent(\r\n        BingHelper.IG\r\n      )}&IID=${encodeURIComponent(BingHelper.IID)}.${\"1\"}`;\r\n    },\r\n    function getRequestBody(text, targetLanguage) {\r\n      const languageData = BingHelper.getLanguageData(targetLanguage);\r\n\r\n      const domParser = new DOMParser();\r\n      const doc = domParser.parseFromString(\r\n        `<speak version='1.0' xml:lang=''><voice xml:lang='' xml:gender='' name=''><prosody rate='-20.00%'></prosody></voice></speak>`,\r\n        \"text/xml\"\r\n      );\r\n      doc.querySelector(\"speak\").setAttribute(\"xml:lang\", languageData.locale);\r\n      doc.querySelector(\"voice\").setAttribute(\"xml:lang\", languageData.locale);\r\n      doc\r\n        .querySelector(\"voice\")\r\n        .setAttribute(\"xml:gender\", languageData.gender);\r\n      doc.querySelector(\"voice\").setAttribute(\"xml:name\", languageData.voice);\r\n      doc.querySelector(\"prosody\").textContent = text;\r\n\r\n      const params = new URLSearchParams();\r\n      params.append(\"ssml\", new XMLSerializer().serializeToString(doc));\r\n      params.append(\"token\", BingHelper.token);\r\n      params.append(\"key\", BingHelper.key.toString());\r\n      return params.toString();\r\n    }\r\n  );\r\n\r\n  // Listen for messages coming from contentScript or other scripts.\r\n  chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\r\n    if (request.action === \"textToSpeech\") {\r\n      if (twpConfig.get(\"textToSpeechService\") === \"bing\") {\r\n        bingService\r\n          .textToSpeech(request.text, request.targetLanguage)\r\n          .finally(() => {\r\n            sendResponse();\r\n          });\r\n      } else {\r\n        googleService\r\n          .textToSpeech(request.text, request.targetLanguage)\r\n          .finally(() => {\r\n            sendResponse();\r\n          });\r\n      }\r\n\r\n      return true;\r\n    } else if (request.action === \"stopAudio\") {\r\n      googleService.stopAll();\r\n      bingService.stopAll();\r\n    }\r\n  });\r\n\r\n  // Listen for changes to the audio speed setting and apply it immediately.\r\n  twpConfig.onReady(async () => {\r\n    twpConfig.onChanged((name, newvalue) => {\r\n      if (name === \"ttsSpeed\") {\r\n        googleService.setAudioSpeed(newvalue);\r\n        bingService.setAudioSpeed(newvalue);\r\n      } else if (name === \"ttsVolume\") {\r\n        googleService.setAudioVolume(newvalue);\r\n        bingService.setAudioVolume(newvalue);\r\n      }\r\n    });\r\n\r\n    googleService.setAudioSpeed(twpConfig.get(\"ttsSpeed\"));\r\n    bingService.setAudioSpeed(twpConfig.get(\"ttsSpeed\"));\r\n    googleService.setAudioVolume(twpConfig.get(\"ttsVolume\"));\r\n    bingService.setAudioVolume(twpConfig.get(\"ttsVolume\"));\r\n  });\r\n\r\n  textToSpeech.google = googleService;\r\n\r\n  return textToSpeech;\r\n})();\r\n"],"mappings":"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"}