{"version":3,"file":"../../contentScript/popupMobile.js","names":["getTabHostName","Promise","resolve","chrome","runtime","sendMessage","action","result","checkedLastError","twpConfig","onReady","platformInfo","isMobile","any","tabHostName","tabLanguage","pageLanguageState","htmlText","fetch","getURL","then","response","text","googleIcon","blob","yandexIcon","bingIcon","twpI18n","updateUiMessages","rootElement","document","createElement","style","cssText","classList","add","shadowRoot","attachShadow","mode","innerHTML","setInterval","popupElement","getElementById","menuOptions","setProperty","clientHeight","lastInteraction","Date","now","lastInteractionInterval","serviceSelectorIsOpen","showPopup","clearInterval","isConnected","documentElement","appendChild","menuContainer","display","hidePopup","updateInterface","mainElement","querySelector","animation","animate","transform","opacity","duration","iterations","onfinish","remove","twpLang","isRtlLanguage","get","fixUILanguageCode","i18n","getUILanguage","setAttribute","translateDocument","onpointerdown","e","target","stopImmediatePropagation","pointerId","startPoint","x","clientX","y","clientY","onpointermove","offset","Math","abs","window","innerWidth","releasePointerCapture","transition","ontransitionend","setPointerCapture","onpointerup","onpointercancel","serviceIconElement","updateServiceIcon","service","src","URL","createObjectURL","onload","revokeObjectURL","serviceSelector","onclick","scale","rotate","onchange","value","set","pageTranslator","swapTranslationService","onblur","gearButton","menuBg","closeMenu","onMenuOptionClick","dataset","onanimationend","fixTLanguageCode","indexOf","addLangToAlwaysTranslate","translatePage","removeLangFromAlwaysTranslate","addLangToNeverTranslate","restorePage","removeLangFromNeverTranslate","addSiteToNeverTranslate","removeSiteFromNeverTranslate","generateRandomHash","length","characters","hash","i","charAt","floor","random","authorizationToOpenOptions","open","questionElement","btnTranslate","textContent","getMessage","from_to_element","codeToLanguage","onPageLanguageStateChange","_pageLanguageState","langs","getLanguageList","langsSorted","push","sort","a","b","localeCompare","menuSelectLanguage","eAllLangs","forEach","option","eRecentsLangs","buildRecentsLanguages","oninput","setTargetLanguage","addEventListener","touches","onMessage","addListener","request","sender","sendResponse","onGetOriginalTabLanguage","_tabLanguage","updateTheme","darkMode","matchMedia","matches","lightModeElement","id","onChanged","name","newValue"],"sources":["popupMobile.js"],"sourcesContent":["\"use strict\";\r\n\r\nfunction getTabHostName() {\r\n  return new Promise((resolve) =>\r\n    chrome.runtime.sendMessage({ action: \"getTabHostName\" }, (result) => {\r\n      checkedLastError();\r\n      resolve(result);\r\n    })\r\n  );\r\n}\r\n\r\nvoid (async function () {\r\n  await twpConfig.onReady();\r\n  if (!platformInfo.isMobile.any) return;\r\n\r\n  const tabHostName = await getTabHostName();\r\n  let tabLanguage = \"und\";\r\n  let pageLanguageState = \"original\";\r\n\r\n  // load html and icons\r\n  const htmlText = await fetch(\r\n    chrome.runtime.getURL(\"/contentScript/html/popupMobile.html\")\r\n  ).then((response) => response.text());\r\n  const googleIcon = await fetch(\r\n    chrome.runtime.getURL(\"/icons/google-translate-32.png\")\r\n  ).then((response) => response.blob());\r\n  const yandexIcon = await fetch(\r\n    chrome.runtime.getURL(\"/icons/yandex-translate-32.png\")\r\n  ).then((response) => response.blob());\r\n  const bingIcon = await fetch(\r\n    chrome.runtime.getURL(\"/icons/bing-translate-32.png\")\r\n  ).then((response) => response.blob());\r\n\r\n  // Load i18n messages based on your language preference\r\n  await twpI18n.updateUiMessages();\r\n\r\n  // creates shadow root, root element and append to document\r\n  const rootElement = document.createElement(\"div\");\r\n  rootElement.style.cssText = \"all: initial\";\r\n  rootElement.classList.add(\"notranslate\");\r\n\r\n  const shadowRoot = rootElement.attachShadow({ mode: \"closed\" });\r\n  shadowRoot.innerHTML = htmlText;\r\n\r\n  // update css property --popup-height\r\n  setInterval(() => {\r\n    const popupElement = shadowRoot.getElementById(\"popup\");\r\n    const menuOptions = shadowRoot.getElementById(\"menu-options\");\r\n    menuOptions.style.setProperty(\r\n      \"--popup-height\",\r\n      `${popupElement.clientHeight}px`\r\n    );\r\n  }, 1000);\r\n\r\n  // remove popup after 8 seconds of inactivity\r\n  let lastInteraction = Date.now();\r\n  let lastInteractionInterval = null;\r\n  let serviceSelectorIsOpen = false;\r\n\r\n  function showPopup() {\r\n    lastInteraction = Date.now();\r\n    clearInterval(lastInteractionInterval);\r\n\r\n    if (!rootElement.isConnected) {\r\n      document.documentElement.appendChild(rootElement);\r\n      lastInteractionInterval = setInterval(() => {\r\n        const menuContainer = shadowRoot.getElementById(\"menu-container\");\r\n        if (\r\n          Date.now() - lastInteraction > 1000 * 8 &&\r\n          menuContainer.style.display !== \"block\" &&\r\n          serviceSelectorIsOpen === false\r\n        ) {\r\n          hidePopup();\r\n        }\r\n      }, 1000);\r\n\r\n      updateInterface();\r\n    }\r\n  }\r\n\r\n  function hidePopup() {\r\n    clearInterval(lastInteractionInterval);\r\n    if (rootElement.isConnected) {\r\n      const mainElement = shadowRoot.querySelector(\"main\");\r\n      const animation = mainElement.animate(\r\n        [\r\n          { transform: \"translateY(0px)\", opacity: \"1\" },\r\n          { transform: \"translateY(-50px)\", opacity: \"0\" },\r\n        ],\r\n        {\r\n          duration: 200,\r\n          iterations: 1,\r\n        }\r\n      );\r\n      animation.onfinish = () => {\r\n        rootElement.remove();\r\n      };\r\n      const menuContainer = shadowRoot.getElementById(\"menu-container\");\r\n      menuContainer.style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  // set text direction\r\n  if (\r\n    twpLang.isRtlLanguage(\r\n      twpConfig.get(\"uiLanguage\") ||\r\n        twpLang.fixUILanguageCode(chrome.i18n.getUILanguage())\r\n    )\r\n  ) {\r\n    shadowRoot.querySelector(\"main\").setAttribute(\"dir\", \"rtl\");\r\n  }\r\n\r\n  // translate shadow root\r\n  twpI18n.translateDocument(shadowRoot);\r\n\r\n  // close popup\r\n  const popupElement = shadowRoot.getElementById(\"popup\");\r\n  popupElement.onpointerdown = (e) => {\r\n    if (e.target !== popupElement) return;\r\n    lastInteraction = Date.now();\r\n\r\n    e.stopImmediatePropagation();\r\n    const pointerId = e.pointerId;\r\n\r\n    const startPoint = { x: e.clientX, y: e.clientY };\r\n    popupElement.onpointermove = (e) => {\r\n      lastInteraction = Date.now();\r\n\r\n      e.stopImmediatePropagation();\r\n      const offset = e.clientX - startPoint.x;\r\n      popupElement.style.transform = `translateX(${offset}px)`;\r\n\r\n      if (Math.abs(offset) > window.innerWidth / 10) {\r\n        popupElement.releasePointerCapture(pointerId);\r\n        popupElement.onpointermove = null;\r\n        popupElement.style.transition = `transform 0.3s ease-in-out`;\r\n        if (offset > 0) {\r\n          popupElement.style.transform = `translateX(100%)`;\r\n        } else {\r\n          popupElement.style.transform = `translateX(-100%)`;\r\n        }\r\n        popupElement.ontransitionend = () => {\r\n          popupElement.ontransitionend = null;\r\n          rootElement.remove();\r\n        };\r\n      }\r\n    };\r\n    popupElement.setPointerCapture(pointerId);\r\n  };\r\n  popupElement.onpointerup = (e) => {\r\n    lastInteraction = Date.now();\r\n\r\n    e.stopImmediatePropagation();\r\n    popupElement.onpointermove = null;\r\n    popupElement.style.transform = `translateX(0px)`;\r\n    popupElement.releasePointerCapture(e.pointerId);\r\n  };\r\n  popupElement.onpointercancel = (e) => {\r\n    lastInteraction = Date.now();\r\n\r\n    e.stopImmediatePropagation();\r\n    popupElement.onpointermove = null;\r\n    popupElement.style.transform = `translateX(0px)`;\r\n    popupElement.releasePointerCapture(e.pointerId);\r\n  };\r\n\r\n  // update service icon\r\n  const serviceIconElement = /** @type {HTMLImageElement} */ (\r\n    shadowRoot.getElementById(\"serviceIcon\")\r\n  );\r\n  const updateServiceIcon = () => {\r\n    const service = twpConfig.get(\"pageTranslatorService\");\r\n    if (service === \"google\") {\r\n      serviceIconElement.src = URL.createObjectURL(googleIcon);\r\n    } else if (service === \"yandex\") {\r\n      serviceIconElement.src = URL.createObjectURL(yandexIcon);\r\n    } else if (service === \"bing\") {\r\n      serviceIconElement.src = URL.createObjectURL(bingIcon);\r\n    }\r\n    serviceIconElement.onload = () => {\r\n      serviceIconElement.onload = null;\r\n      URL.revokeObjectURL(serviceIconElement.src);\r\n    };\r\n  };\r\n  updateServiceIcon();\r\n\r\n  // select translation service\r\n  const serviceSelector = /** @type {HTMLSelectElement} */ (\r\n    shadowRoot.getElementById(\"serviceSelector\")\r\n  );\r\n  serviceSelector.onclick = () => {\r\n    serviceSelectorIsOpen = true;\r\n    lastInteraction = Date.now();\r\n\r\n    serviceIconElement.style.scale = \"1.5\";\r\n    serviceIconElement.style.rotate = \"180deg\";\r\n  };\r\n  serviceSelector.onchange = () => {\r\n    serviceSelectorIsOpen = false;\r\n    lastInteraction = Date.now();\r\n\r\n    const service = serviceSelector.value;\r\n    twpConfig.set(\"pageTranslatorService\", service);\r\n    updateServiceIcon();\r\n\r\n    serviceIconElement.style.scale = null;\r\n    serviceIconElement.style.rotate = null;\r\n\r\n    pageTranslator.swapTranslationService(service);\r\n  };\r\n  serviceSelector.onblur = () => {\r\n    serviceSelectorIsOpen = false;\r\n    lastInteraction = Date.now();\r\n\r\n    serviceIconElement.style.scale = null;\r\n    serviceIconElement.style.rotate = null;\r\n  };\r\n  serviceSelector.value = twpConfig.get(\"pageTranslatorService\");\r\n\r\n  // gear button\r\n  const gearButton = shadowRoot.getElementById(\"gear\");\r\n  gearButton.onclick = () => {\r\n    lastInteraction = Date.now();\r\n\r\n    gearButton.classList.add(\"rotate\");\r\n    const menuContainer = shadowRoot.getElementById(\"menu-container\");\r\n    menuContainer.style.display = \"block\";\r\n\r\n    const menuBg = shadowRoot.getElementById(\"menu-bg\");\r\n    menuBg.onclick = (e) => {\r\n      lastInteraction = Date.now();\r\n\r\n      e.stopImmediatePropagation();\r\n      closeMenu();\r\n    };\r\n\r\n    const menuOptions = shadowRoot.getElementById(\"menu-options\");\r\n    menuOptions.onclick = (e) => {\r\n      lastInteraction = Date.now();\r\n\r\n      const target = /** @type {HTMLElement} */ (e.target);\r\n      e.stopImmediatePropagation();\r\n      onMenuOptionClick(target.dataset.value);\r\n    };\r\n  };\r\n\r\n  // close menu\r\n  function closeMenu() {\r\n    const gearButton = shadowRoot.getElementById(\"gear\");\r\n    const menuContainer = shadowRoot.getElementById(\"menu-container\");\r\n\r\n    gearButton.classList.remove(\"rotate\");\r\n    menuContainer.style.animation = \"expand 0.3s ease-out reverse\";\r\n    menuContainer.onanimationend = () => {\r\n      menuContainer.onanimationend = null;\r\n      menuContainer.style.display = \"none\";\r\n      menuContainer.style.animation = null;\r\n    };\r\n  }\r\n\r\n  // menu options\r\n  /**\r\n   * @param {string} action\r\n   * @returns\r\n   */\r\n  function onMenuOptionClick(action) {\r\n    if (!action) return;\r\n\r\n    if (action === \"choose-another-language\") {\r\n      return;\r\n    } else if (action === \"always-translate-from\") {\r\n      tabLanguage = twpLang.fixTLanguageCode(tabLanguage);\r\n      if (twpConfig.get(\"alwaysTranslateLangs\").indexOf(tabLanguage) === -1) {\r\n        twpConfig.addLangToAlwaysTranslate(tabLanguage);\r\n        pageTranslator.translatePage();\r\n      } else {\r\n        twpConfig.removeLangFromAlwaysTranslate(tabLanguage);\r\n      }\r\n    } else if (action === \"never-translate-from\") {\r\n      tabLanguage = twpLang.fixTLanguageCode(tabLanguage);\r\n      if (twpConfig.get(\"neverTranslateLangs\").indexOf(tabLanguage) === -1) {\r\n        twpConfig.addLangToNeverTranslate(tabLanguage);\r\n        pageTranslator.restorePage();\r\n      } else {\r\n        twpConfig.removeLangFromNeverTranslate(tabLanguage);\r\n      }\r\n    } else if (action === \"never-translate-this-site\") {\r\n      if (twpConfig.get(\"neverTranslateSites\").indexOf(tabHostName) === -1) {\r\n        twpConfig.addSiteToNeverTranslate(tabHostName);\r\n        pageTranslator.restorePage();\r\n      } else {\r\n        twpConfig.removeSiteFromNeverTranslate(tabHostName);\r\n      }\r\n    } else if (action === \"show-translate-selected-button\") {\r\n      twpConfig.set(\r\n        \"showTranslateSelectedButton\",\r\n        twpConfig.get(\"showTranslateSelectedButton\") === \"yes\" ? \"no\" : \"yes\"\r\n      );\r\n    } else if (action === \"more-options\") {\r\n      const generateRandomHash = (length) => {\r\n        const characters =\r\n          \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n        let hash = \"\";\r\n        for (let i = 0; i < length; i++) {\r\n          hash += characters.charAt(\r\n            Math.floor(Math.random() * characters.length)\r\n          );\r\n        }\r\n        return hash;\r\n      };\r\n      const authorizationToOpenOptions = generateRandomHash(32);\r\n      chrome.runtime.sendMessage({\r\n        action: \"authorizationToOpenOptions\",\r\n        authorizationToOpenOptions,\r\n      });\r\n      window.open(\r\n        chrome.runtime.getURL(\"/options/open-options.html\") +\r\n          `#!authorizationToOpenOptions=${authorizationToOpenOptions}`,\r\n        \"blank\"\r\n      );\r\n    }\r\n\r\n    closeMenu();\r\n\r\n    updateInterface();\r\n  }\r\n\r\n  // update interface\r\n  function updateInterface() {\r\n    // update the question text\r\n    const questionElement = shadowRoot.getElementById(\"question\");\r\n    const btnTranslate = shadowRoot.getElementById(\"btnTranslate\");\r\n    if (pageLanguageState === \"original\") {\r\n      questionElement.textContent = twpI18n.getMessage(\"msgTranslatePage\");\r\n      btnTranslate.textContent = twpI18n.getMessage(\"btnTranslate\");\r\n    } else {\r\n      questionElement.textContent = twpI18n.getMessage(\"msgPageTranslated\");\r\n      btnTranslate.textContent = twpI18n.getMessage(\"btnUndoTranslation\");\r\n    }\r\n\r\n    // update show-translate-selected-button checkicon\r\n    if (twpConfig.get(\"showTranslateSelectedButton\") === \"yes\") {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"show-translate-selected-button\"] [checkicon]`\r\n      ).textContent = \"笨能";\r\n    } else {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"show-translate-selected-button\"] [checkicon]`\r\n      ).textContent = \"\";\r\n    }\r\n\r\n    // update never-translate-this-site checkicon\r\n    if (twpConfig.get(\"neverTranslateSites\").indexOf(tabHostName) !== -1) {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"never-translate-this-site\"] [checkicon]`\r\n      ).textContent = \"笨能";\r\n    } else {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"never-translate-this-site\"] [checkicon]`\r\n      ).textContent = \"\";\r\n    }\r\n\r\n    tabLanguage = twpLang.fixTLanguageCode(tabLanguage) || \"und\";\r\n\r\n    // update from-to text when original tab is detected\r\n    const from_to_element = shadowRoot.getElementById(\"from-to\");\r\n    from_to_element.textContent = twpI18n.getMessage(\"msgTranslateFromTo\", [\r\n      twpLang.codeToLanguage(tabLanguage),\r\n      twpLang.codeToLanguage(twpConfig.get(\"targetLanguage\")),\r\n    ]);\r\n\r\n    // show or hide always-translate-from and never-translate-from\r\n    if (\r\n      tabLanguage === \"und\" ||\r\n      tabLanguage == twpConfig.get(\"targetLanguage\")\r\n    ) {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"always-translate-from\"]`\r\n      ).style.display = \"none\";\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"never-translate-from\"]`\r\n      ).style.display = \"none\";\r\n    } else {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"always-translate-from\"]`\r\n      ).style.display = \"flex\";\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"never-translate-from\"]`\r\n      ).style.display = \"flex\";\r\n    }\r\n\r\n    // update always-translate-from text\r\n    shadowRoot.querySelector(\r\n      `#menu-options [data-value=\"always-translate-from\"] [data-i18n]`\r\n    ).textContent = twpI18n.getMessage(\"lblAlwaysTranslate\", [\r\n      twpLang.codeToLanguage(tabLanguage),\r\n    ]);\r\n\r\n    // update always-translate-from checkicon\r\n    if (twpConfig.get(\"alwaysTranslateLangs\").indexOf(tabLanguage) !== -1) {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"always-translate-from\"] [checkicon]`\r\n      ).textContent = \"笨能";\r\n    } else {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"always-translate-from\"] [checkicon]`\r\n      ).textContent = \"\";\r\n    }\r\n\r\n    // update never-translate-from checkicon\r\n    if (twpConfig.get(\"neverTranslateLangs\").indexOf(tabLanguage) !== -1) {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"never-translate-from\"] [checkicon]`\r\n      ).textContent = \"笨能";\r\n    } else {\r\n      shadowRoot.querySelector(\r\n        `#menu-options [data-value=\"never-translate-from\"] [checkicon]`\r\n      ).textContent = \"\";\r\n    }\r\n  }\r\n  updateInterface();\r\n\r\n  pageTranslator.onPageLanguageStateChange((_pageLanguageState) => {\r\n    pageLanguageState = _pageLanguageState;\r\n    updateInterface();\r\n  });\r\n\r\n  // translate or restore page\r\n  const btnTranslate = shadowRoot.getElementById(\"btnTranslate\");\r\n  btnTranslate.onclick = () => {\r\n    if (pageLanguageState === \"original\") {\r\n      pageTranslator.translatePage();\r\n    } else {\r\n      pageTranslator.restorePage();\r\n    }\r\n  };\r\n\r\n  // fill language list\r\n  (function () {\r\n    let langs = twpLang.getLanguageList();\r\n\r\n    const langsSorted = [];\r\n\r\n    for (const i in langs) {\r\n      langsSorted.push([i, langs[i]]);\r\n    }\r\n\r\n    langsSorted.sort(function (a, b) {\r\n      return a[1].localeCompare(b[1]);\r\n    });\r\n\r\n    const menuSelectLanguage = /** @type {HTMLSelectElement} */ (\r\n      shadowRoot.getElementById(\"language-selector\")\r\n    );\r\n\r\n    const eAllLangs = menuSelectLanguage.querySelector('[name=\"all\"]');\r\n    langsSorted.forEach((value) => {\r\n      const option = document.createElement(\"option\");\r\n      option.value = value[0];\r\n      option.textContent = value[1];\r\n      eAllLangs.appendChild(option);\r\n    });\r\n\r\n    const eRecentsLangs = menuSelectLanguage.querySelector('[name=\"targets\"]');\r\n\r\n    const buildRecentsLanguages = () => {\r\n      eRecentsLangs.innerHTML = \"\";\r\n      for (const value of twpConfig.get(\"targetLanguages\")) {\r\n        const option = document.createElement(\"option\");\r\n        option.value = value;\r\n        option.textContent = langs[value];\r\n        eRecentsLangs.appendChild(option);\r\n      }\r\n      menuSelectLanguage.value = twpConfig.get(\"targetLanguages\")[0];\r\n    };\r\n    buildRecentsLanguages();\r\n\r\n    menuSelectLanguage.oninput = () => {\r\n      twpConfig.setTargetLanguage(menuSelectLanguage.value, true);\r\n      pageTranslator.translatePage(menuSelectLanguage.value);\r\n      buildRecentsLanguages();\r\n      updateInterface();\r\n\r\n      closeMenu();\r\n    };\r\n  })();\r\n\r\n  // show/hide popup on 3 finger tap\r\n  if (twpConfig.get(\"showPopupMobile\") !== \"no\") {\r\n    window.addEventListener(\"touchstart\", (e) => {\r\n      if (e.touches.length == 3) {\r\n        if (rootElement.isConnected) {\r\n          hidePopup();\r\n        } else {\r\n          showPopup();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // show popup when clicked on the extension icon on the extension manager\r\n  chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\r\n    if (request.action === \"showPopupMobile\") {\r\n      showPopup();\r\n    }\r\n  });\r\n\r\n  pageTranslator.onGetOriginalTabLanguage(function (_tabLanguage) {\r\n    tabLanguage = _tabLanguage || \"und\";\r\n    if (tabLanguage !== \"und\") {\r\n      tabLanguage = twpLang.fixTLanguageCode(tabLanguage);\r\n    }\r\n    if (\r\n      tabLanguage !== \"und\" &&\r\n      twpConfig.get(\"neverTranslateLangs\").indexOf(tabLanguage) === -1 &&\r\n      twpConfig.get(\"neverTranslateSites\").indexOf(tabHostName) === -1 &&\r\n      twpConfig.get(\"targetLanguage\") !== tabLanguage\r\n    ) {\r\n      showPopup();\r\n    }\r\n  });\r\n\r\n  // dark/light mode\r\n  function updateTheme() {\r\n    let darkMode = false;\r\n    if (twpConfig.get(\"darkMode\") === \"auto\") {\r\n      darkMode = window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n        ? true\r\n        : false;\r\n    } else {\r\n      darkMode = twpConfig.get(\"darkMode\") === \"yes\" ? true : false;\r\n    }\r\n\r\n    if (darkMode) {\r\n      const lightModeElement = shadowRoot.getElementById(\"light-mode\");\r\n      if (lightModeElement) lightModeElement.remove();\r\n    } else {\r\n      let lightModeElement = shadowRoot.getElementById(\"light-mode\");\r\n      if (!lightModeElement) {\r\n        lightModeElement = document.createElement(\"style\");\r\n        lightModeElement.id = \"light-mode\";\r\n        lightModeElement.textContent = `\r\n          * {\r\n            --primary-text-color: rgb(36, 34, 34);\r\n            --secondary-text-color: rgb(68, 67, 67);\r\n            --background-color: rgb(238, 236, 236);\r\n            --shadow-color: rgb(115, 148, 211);\r\n            --translate-button-text-color: rgb(91, 153, 247);\r\n            --hover-color: rgb(67, 78, 95);\r\n          }\r\n        `;\r\n        shadowRoot.appendChild(lightModeElement);\r\n      }\r\n    }\r\n  }\r\n  updateTheme();\r\n\r\n  matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\", () => {\r\n    updateTheme();\r\n  });\r\n\r\n  twpConfig.onChanged((name, newValue) => {\r\n    if (name == \"darkMode\") {\r\n      updateTheme();\r\n    }\r\n  });\r\n})();\r\n"],"mappings":"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"}