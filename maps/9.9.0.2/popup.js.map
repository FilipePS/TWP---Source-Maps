{"version":3,"file":"../../popup/popup.js","names":["$","document","querySelector","bind","twpConfig","onReady","then","twpI18n","updateUiMessages","translateDocument","popupSectionCount","onclick","window","location","popupPanelSection","get","updatePopupSection","querySelectorAll","forEach","node","nodePopupPanelSection","parseInt","getAttribute","isNaN","style","display","nodePopupPanelSection2","e","set","originalTabLanguage","currentPageLanguage","currentPageLanguageState","currentPageTranslatorService","twpButtons","button","addEventListener","event","classList","remove","target","add","value","setTargetLanguage","chrome","tabs","query","active","currentWindow","sendMessage","id","action","targetLanguage","checkedLastError","targetLanguages","i","textContent","twpLang","codeToLanguage","frameId","tabLanguage","fixTLanguageCode","childNodes","pageLanguage","updateInterface","pageLanguageState","pageTranslatorService","getMessage","setAttribute","checked","indexOf","removeAttribute","translatedWhenHoveringThisLangText","neverTranslateLangText","enableDarkMode","el","createElement","head","appendChild","disableDarkMode","matchMedia","matches","open","swapPageTranslationService","newServiceName","hostname","URL","url","addLangToAlwaysTranslate","removeLangFromAlwaysTranslate","addSiteToAlwaysTranslate","removeSiteFromAlwaysTranslate","addSiteToTranslateWhenHovering","removeSiteFromTranslateWhenHovering","addLangToTranslateWhenHovering","removeLangFromTranslateWhenHovering","text","btnOptions","runtime","getURL","close","addSiteToNeverTranslate","removeSiteFromNeverTranslate","addLangToNeverTranslate","removeLangFromNeverTranslate","tabsCreate","encodeURIComponent","split","textNever","textAlways","innerHTML"],"sources":["popup.js"],"sourcesContent":["\"use strict\";\r\n\r\nvar $ = document.querySelector.bind(document);\r\n\r\ntwpConfig\r\n  .onReady()\r\n  .then(() => twpI18n.updateUiMessages())\r\n  .then(() => {\r\n    twpI18n.translateDocument();\r\n    const popupSectionCount = 6;\r\n\r\n    $(\"#btnImproveTranslation\").onclick = () => {\r\n      window.location = \"improve-translation.html\";\r\n    };\r\n\r\n    let popupPanelSection = twpConfig.get(\"popupPanelSection\");\r\n\r\n    function updatePopupSection() {\r\n      document.querySelectorAll(\"[data-popupPanelSection]\").forEach((node) => {\r\n        const nodePopupPanelSection = parseInt(\r\n          node.getAttribute(\"data-popupPanelSection\")\r\n        );\r\n        if (isNaN(nodePopupPanelSection)) return;\r\n\r\n        if (nodePopupPanelSection > popupPanelSection) {\r\n          node.style.display = \"none\";\r\n        } else {\r\n          node.style.display = \"block\";\r\n        }\r\n      });\r\n\r\n      document.querySelectorAll(\"[data-popupPanelSection2]\").forEach((node) => {\r\n        const nodePopupPanelSection2 = parseInt(\r\n          node.getAttribute(\"data-popupPanelSection2\")\r\n        );\r\n        if (isNaN(nodePopupPanelSection2)) return;\r\n\r\n        if (nodePopupPanelSection2 <= popupPanelSection) {\r\n          node.style.display = \"none\";\r\n        } else {\r\n          node.style.display = \"block\";\r\n        }\r\n      });\r\n\r\n      $(\"#more\").style.display = \"block\";\r\n      $(\"#less\").style.display = \"block\";\r\n\r\n      if (popupPanelSection >= popupSectionCount) {\r\n        $(\"#more\").style.display = \"none\";\r\n      } else if (popupPanelSection <= 0) {\r\n        $(\"#less\").style.display = \"none\";\r\n      }\r\n    }\r\n    updatePopupSection();\r\n\r\n    $(\"#more\").onclick = (e) => {\r\n      if (popupPanelSection < popupSectionCount) {\r\n        popupPanelSection++;\r\n        updatePopupSection();\r\n      }\r\n      twpConfig.set(\"popupPanelSection\", popupPanelSection);\r\n    };\r\n    $(\"#less\").onclick = (e) => {\r\n      if (popupPanelSection > 0) {\r\n        popupPanelSection--;\r\n        updatePopupSection();\r\n      }\r\n      twpConfig.set(\"popupPanelSection\", popupPanelSection);\r\n    };\r\n\r\n    let originalTabLanguage = \"und\";\r\n    let currentPageLanguage = \"und\";\r\n    let currentPageLanguageState = \"original\";\r\n    let currentPageTranslatorService = twpConfig.get(\"pageTranslatorService\");\r\n\r\n    const twpButtons = document.querySelectorAll(\"button\");\r\n\r\n    twpButtons.forEach((button) => {\r\n      button.addEventListener(\"click\", (event) => {\r\n        twpButtons.forEach((button) => {\r\n          button.classList.remove(\"w3-buttonSelected\");\r\n        });\r\n        event.target.classList.add(\"w3-buttonSelected\");\r\n\r\n        currentPageLanguage = event.target.value;\r\n        if (currentPageLanguage === \"original\") {\r\n          currentPageLanguageState = \"original\";\r\n        } else {\r\n          currentPageLanguageState = \"translated\";\r\n          twpConfig.setTargetLanguage(event.target.value);\r\n        }\r\n\r\n        chrome.tabs.query(\r\n          {\r\n            active: true,\r\n            currentWindow: true,\r\n          },\r\n          (tabs) => {\r\n            chrome.tabs.sendMessage(\r\n              tabs[0].id,\r\n              {\r\n                action: \"translatePage\",\r\n                targetLanguage: event.target.value || \"original\",\r\n              },\r\n              checkedLastError\r\n            );\r\n          }\r\n        );\r\n      });\r\n    });\r\n\r\n    let targetLanguages = twpConfig.get(\"targetLanguages\");\r\n    for (let i = 1; i < 4; i++) {\r\n      const button = twpButtons[i];\r\n      button.value = targetLanguages[i - 1];\r\n      button.textContent = twpLang.codeToLanguage(targetLanguages[i - 1]);\r\n    }\r\n\r\n    chrome.tabs.query(\r\n      {\r\n        active: true,\r\n        currentWindow: true,\r\n      },\r\n      (tabs) => {\r\n        chrome.tabs.sendMessage(\r\n          tabs[0].id,\r\n          {\r\n            action: \"getOriginalTabLanguage\",\r\n          },\r\n          {\r\n            frameId: 0,\r\n          },\r\n          (tabLanguage) => {\r\n            checkedLastError();\r\n            if (\r\n              !tabLanguage ||\r\n              (tabLanguage = twpLang.fixTLanguageCode(tabLanguage))\r\n            ) {\r\n              originalTabLanguage = tabLanguage || \"und\";\r\n              twpButtons[0].childNodes[1].textContent =\r\n                twpLang.codeToLanguage(originalTabLanguage);\r\n            }\r\n          }\r\n        );\r\n\r\n        chrome.tabs.sendMessage(\r\n          tabs[0].id,\r\n          {\r\n            action: \"getCurrentPageLanguage\",\r\n          },\r\n          {\r\n            frameId: 0,\r\n          },\r\n          (pageLanguage) => {\r\n            checkedLastError();\r\n            if (pageLanguage) {\r\n              currentPageLanguage = pageLanguage;\r\n              updateInterface();\r\n            }\r\n          }\r\n        );\r\n\r\n        chrome.tabs.sendMessage(\r\n          tabs[0].id,\r\n          {\r\n            action: \"getCurrentPageLanguageState\",\r\n          },\r\n          {\r\n            frameId: 0,\r\n          },\r\n          (pageLanguageState) => {\r\n            checkedLastError();\r\n            if (pageLanguageState) {\r\n              currentPageLanguageState = pageLanguageState;\r\n              updateInterface();\r\n            }\r\n          }\r\n        );\r\n\r\n        chrome.tabs.sendMessage(\r\n          tabs[0].id,\r\n          {\r\n            action: \"getCurrentPageTranslatorService\",\r\n          },\r\n          {\r\n            frameId: 0,\r\n          },\r\n          (pageTranslatorService) => {\r\n            checkedLastError();\r\n            if (pageTranslatorService) {\r\n              currentPageTranslatorService = pageTranslatorService;\r\n              updateInterface();\r\n            }\r\n          }\r\n        );\r\n      }\r\n    );\r\n\r\n    function updateInterface() {\r\n      if (currentPageTranslatorService == \"yandex\") {\r\n        $(\"#btnOptions option[value='translateInExternalSite']\").textContent =\r\n          twpI18n.getMessage(\"msgOpenOnYandexTranslator\");\r\n        $(\"#iconTranslate\").setAttribute(\r\n          \"src\",\r\n          \"/icons/yandex-translate-32.png\"\r\n        );\r\n      } else if (currentPageTranslatorService == \"bing\") {\r\n        $(\"#btnOptions option[value='translateInExternalSite']\").textContent =\r\n          twpI18n.getMessage(\"btnOpenOnGoogleTranslate\");\r\n        $(\"#iconTranslate\").setAttribute(\"src\", \"/icons/bing-translate-32.png\");\r\n      } else {\r\n        // google\r\n        $(\"#btnOptions option[value='translateInExternalSite']\").textContent =\r\n          twpI18n.getMessage(\"btnOpenOnGoogleTranslate\");\r\n        $(\"#iconTranslate\").setAttribute(\r\n          \"src\",\r\n          \"/icons/google-translate-32.png\"\r\n        );\r\n      }\r\n\r\n      twpButtons.forEach((button) => {\r\n        button.classList.remove(\"w3-buttonSelected\");\r\n        if (\r\n          (currentPageLanguageState !== \"translated\" &&\r\n            button.value === \"original\") ||\r\n          (currentPageLanguageState === \"translated\" &&\r\n            button.value === currentPageLanguage)\r\n        ) {\r\n          button.classList.add(\"w3-buttonSelected\");\r\n        }\r\n      });\r\n\r\n      if (originalTabLanguage !== \"und\") {\r\n        $(\"#cbAlwaysTranslateThisLang\").checked =\r\n          twpConfig.get(\"alwaysTranslateLangs\").indexOf(originalTabLanguage) !==\r\n          -1;\r\n        $(\"#lblAlwaysTranslateThisLang\").textContent = twpI18n.getMessage(\r\n          \"lblAlwaysTranslate\",\r\n          twpLang.codeToLanguage(originalTabLanguage)\r\n        );\r\n        $(\"#cbAlwaysTranslateThisLang\").removeAttribute(\"disabled\");\r\n\r\n        const translatedWhenHoveringThisLangText = twpI18n.getMessage(\r\n          \"lblShowTranslatedWhenHoveringThisLang\",\r\n          twpLang.codeToLanguage(originalTabLanguage)\r\n        );\r\n        $(\"#cbShowTranslatedWhenHoveringThisLang\").checked =\r\n          twpConfig\r\n            .get(\"langsToTranslateWhenHovering\")\r\n            .indexOf(originalTabLanguage) !== -1;\r\n        $(\"#lblShowTranslatedWhenHoveringThisLang\").textContent =\r\n          translatedWhenHoveringThisLangText;\r\n        $(\"#cbShowTranslatedWhenHoveringThisLang\").removeAttribute(\"disabled\");\r\n\r\n        if (\r\n          twpConfig\r\n            .get(\"langsToTranslateWhenHovering\")\r\n            .indexOf(originalTabLanguage) === -1\r\n        ) {\r\n          $(\r\n            \"option[data-i18n=lblShowTranslatedWhenHoveringThisLang]\"\r\n          ).textContent = translatedWhenHoveringThisLangText;\r\n        } else {\r\n          $(\r\n            \"option[data-i18n=lblShowTranslatedWhenHoveringThisLang]\"\r\n          ).textContent = \"✔ \" + translatedWhenHoveringThisLangText;\r\n        }\r\n        $(\r\n          \"option[data-i18n=lblShowTranslatedWhenHoveringThisLang]\"\r\n        ).removeAttribute(\"hidden\");\r\n\r\n        const neverTranslateLangText = twpI18n.getMessage(\r\n          \"btnNeverTranslateThisLanguage\"\r\n        );\r\n        if (\r\n          twpConfig.get(\"neverTranslateLangs\").indexOf(originalTabLanguage) ===\r\n          -1\r\n        ) {\r\n          $(\"option[data-i18n=btnNeverTranslateThisLanguage]\").textContent =\r\n            neverTranslateLangText;\r\n        } else {\r\n          $(\"option[data-i18n=btnNeverTranslateThisLanguage]\").textContent =\r\n            \"✔ \" + neverTranslateLangText;\r\n        }\r\n        $(\"option[data-i18n=btnNeverTranslateThisLanguage]\").style.display =\r\n          \"block\";\r\n      }\r\n    }\r\n    updateInterface();\r\n\r\n    function enableDarkMode() {\r\n      if (!$(\"#darkModeElement\")) {\r\n        const el = document.createElement(\"style\");\r\n        el.setAttribute(\"id\", \"darkModeElement\");\r\n        el.setAttribute(\"rel\", \"stylesheet\");\r\n        el.textContent = `\r\n            body {\r\n                color: rgb(231, 230, 228) !important;\r\n                background-color: #181a1b !important;\r\n            }\r\n            \r\n            .mdiv, .md, {\r\n                background-color: rgb(231, 230, 228);\r\n            }\r\n\r\n            .menuDot {\r\n                background-image:\r\n                    radial-gradient(rgb(231, 230, 228) 2px, transparent 2px),\r\n                    radial-gradient(rgb(231, 230, 228) 2px, transparent 2px),\r\n                    radial-gradient(rgb(231, 230, 228) 2px, transparent 2px);\r\n            }\r\n\r\n            #btnSwitchInterfaces:hover, #divMenu:hover {\r\n                background-color: #454a4d !important;\r\n                color: rgb(231, 230, 228) !important;\r\n            }\r\n            \r\n            select {\r\n                color: rgb(231, 230, 228) !important;\r\n                background-color: #181a1b !important;\r\n            }\r\n\r\n            hr {\r\n                border-color: #666;\r\n            }\r\n\r\n            .arrow {\r\n                border-color: rgb(231, 230, 228);\r\n            }\r\n\r\n            #btnImproveTranslation {\r\n              color: rgb(231, 230, 228) !important;\r\n              background-color: #181a1b !important;\r\n              border: 1px solid #454a4d !important;\r\n            }\r\n            `;\r\n        document.head.appendChild(el);\r\n      }\r\n    }\r\n\r\n    function disableDarkMode() {\r\n      if ($(\"#darkModeElement\")) {\r\n        $(\"#darkModeElement\").remove();\r\n      }\r\n    }\r\n\r\n    switch (twpConfig.get(\"darkMode\")) {\r\n      case \"auto\":\r\n        if (matchMedia(\"(prefers-color-scheme: dark)\").matches) {\r\n          enableDarkMode();\r\n        } else {\r\n          disableDarkMode();\r\n        }\r\n        break;\r\n      case \"yes\":\r\n        enableDarkMode();\r\n        break;\r\n      case \"no\":\r\n        disableDarkMode();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    $(\"#btnPatreon\").onclick = (e) => {\r\n      window.open(\"https://www.patreon.com/filipeps\", \"_blank\");\r\n    };\r\n\r\n    $(\"#btnSwitchInterfaces\").addEventListener(\"click\", () => {\r\n      twpConfig.set(\"useOldPopup\", \"yes\");\r\n      window.location = \"old-popup.html\";\r\n    });\r\n\r\n    $(\"#divIconTranslate\").addEventListener(\"click\", () => {\r\n      currentPageTranslatorService = twpConfig.swapPageTranslationService();\r\n\r\n      chrome.tabs.query(\r\n        {\r\n          active: true,\r\n          currentWindow: true,\r\n        },\r\n        (tabs) => {\r\n          chrome.tabs.sendMessage(\r\n            tabs[0].id,\r\n            {\r\n              action: \"swapTranslationService\",\r\n              newServiceName: currentPageTranslatorService,\r\n            },\r\n            checkedLastError\r\n          );\r\n        }\r\n      );\r\n\r\n      updateInterface();\r\n    });\r\n\r\n    chrome.tabs.query(\r\n      {\r\n        active: true,\r\n        currentWindow: true,\r\n      },\r\n      (tabs) => {\r\n        $(\"#cbAlwaysTranslateThisLang\").addEventListener(\"change\", (e) => {\r\n          const hostname = new URL(tabs[0].url).hostname;\r\n          if (e.target.checked) {\r\n            twpConfig.addLangToAlwaysTranslate(originalTabLanguage, hostname);\r\n          } else {\r\n            twpConfig.removeLangFromAlwaysTranslate(originalTabLanguage);\r\n          }\r\n        });\r\n\r\n        $(\"#cbAlwaysTranslateThisSite\").addEventListener(\"change\", (e) => {\r\n          const hostname = new URL(tabs[0].url).hostname;\r\n          if (e.target.checked) {\r\n            twpConfig.addSiteToAlwaysTranslate(hostname);\r\n          } else {\r\n            twpConfig.removeSiteFromAlwaysTranslate(hostname);\r\n          }\r\n        });\r\n\r\n        $(\"#cbShowTranslateSelectedButton\").addEventListener(\"change\", (e) => {\r\n          if (e.target.checked) {\r\n            twpConfig.set(\"showTranslateSelectedButton\", \"yes\");\r\n          } else {\r\n            twpConfig.set(\"showTranslateSelectedButton\", \"no\");\r\n          }\r\n        });\r\n\r\n        $(\"#cbShowOriginalWhenHovering\").addEventListener(\"change\", (e) => {\r\n          if (e.target.checked) {\r\n            twpConfig.set(\"showOriginalTextWhenHovering\", \"yes\");\r\n          } else {\r\n            twpConfig.set(\"showOriginalTextWhenHovering\", \"no\");\r\n          }\r\n        });\r\n\r\n        $(\"#cbShowTranslatedWhenHoveringThisSite\").addEventListener(\r\n          \"change\",\r\n          (e) => {\r\n            const hostname = new URL(tabs[0].url).hostname;\r\n            if (e.target.checked) {\r\n              twpConfig.addSiteToTranslateWhenHovering(hostname);\r\n            } else {\r\n              twpConfig.removeSiteFromTranslateWhenHovering(hostname);\r\n            }\r\n          }\r\n        );\r\n\r\n        $(\"#cbShowTranslatedWhenHoveringThisLang\").addEventListener(\r\n          \"change\",\r\n          (e) => {\r\n            if (e.target.checked) {\r\n              twpConfig.addLangToTranslateWhenHovering(originalTabLanguage);\r\n            } else {\r\n              twpConfig.removeLangFromTranslateWhenHovering(\r\n                originalTabLanguage\r\n              );\r\n            }\r\n          }\r\n        );\r\n\r\n        $(\"#cbShowTranslateSelectedButton\").checked =\r\n          twpConfig.get(\"showTranslateSelectedButton\") == \"yes\" ? true : false;\r\n        $(\"#cbShowOriginalWhenHovering\").checked =\r\n          twpConfig.get(\"showOriginalTextWhenHovering\") == \"yes\" ? true : false;\r\n\r\n        const hostname = new URL(tabs[0].url).hostname;\r\n        $(\"#cbAlwaysTranslateThisSite\").checked =\r\n          twpConfig.get(\"alwaysTranslateSites\").indexOf(hostname) !== -1;\r\n        $(\"#cbShowTranslatedWhenHoveringThisSite\").checked =\r\n          twpConfig.get(\"sitesToTranslateWhenHovering\").indexOf(hostname) !==\r\n          -1;\r\n\r\n        {\r\n          const text = twpI18n.getMessage(\"lblShowTranslateSelectedButton\");\r\n          if (twpConfig.get(\"showTranslateSelectedButton\") !== \"yes\") {\r\n            $(\"option[data-i18n=lblShowTranslateSelectedButton]\").textContent =\r\n              text;\r\n          } else {\r\n            $(\"option[data-i18n=lblShowTranslateSelectedButton]\").textContent =\r\n              \"✔ \" + text;\r\n          }\r\n        }\r\n        {\r\n          const text = twpI18n.getMessage(\"lblShowOriginalTextWhenHovering\");\r\n          if (twpConfig.get(\"showOriginalTextWhenHovering\") !== \"yes\") {\r\n            $(\"option[data-i18n=lblShowOriginalTextWhenHovering]\").textContent =\r\n              text;\r\n          } else {\r\n            $(\"option[data-i18n=lblShowOriginalTextWhenHovering]\").textContent =\r\n              \"✔ \" + text;\r\n          }\r\n        }\r\n        {\r\n          const text = twpI18n.getMessage(\r\n            \"lblShowTranslatedWhenHoveringThisSite\"\r\n          );\r\n          if (\r\n            twpConfig.get(\"sitesToTranslateWhenHovering\").indexOf(hostname) ===\r\n            -1\r\n          ) {\r\n            $(\r\n              \"option[data-i18n=lblShowTranslatedWhenHoveringThisSite]\"\r\n            ).textContent = text;\r\n          } else {\r\n            $(\r\n              \"option[data-i18n=lblShowTranslatedWhenHoveringThisSite]\"\r\n            ).textContent = \"✔ \" + text;\r\n          }\r\n        }\r\n      }\r\n    );\r\n\r\n    $(\"#btnOptions\").addEventListener(\"change\", (event) => {\r\n      const btnOptions = event.target;\r\n\r\n      chrome.tabs.query(\r\n        {\r\n          active: true,\r\n          currentWindow: true,\r\n        },\r\n        (tabs) => {\r\n          const hostname = new URL(tabs[0].url).hostname;\r\n          switch (btnOptions.value) {\r\n            case \"changeLanguage\":\r\n              location = chrome.runtime.getURL(\r\n                \"/popup/improve-translation.html\"\r\n              );\r\n              break;\r\n            case \"alwaysTranslateThisSite\":\r\n              if (\r\n                twpConfig.get(\"alwaysTranslateSites\").indexOf(hostname) === -1\r\n              ) {\r\n                twpConfig.addSiteToAlwaysTranslate(hostname);\r\n              } else {\r\n                twpConfig.removeSiteFromAlwaysTranslate(hostname);\r\n              }\r\n              window.close();\r\n              break;\r\n            case \"neverTranslateThisSite\":\r\n              if (\r\n                twpConfig.get(\"neverTranslateSites\").indexOf(hostname) === -1\r\n              ) {\r\n                twpConfig.addSiteToNeverTranslate(hostname);\r\n              } else {\r\n                twpConfig.removeSiteFromNeverTranslate(hostname);\r\n              }\r\n              window.close();\r\n              break;\r\n            case \"alwaysTranslateThisLanguage\":\r\n              if (\r\n                twpConfig\r\n                  .get(\"alwaysTranslateLangs\")\r\n                  .indexOf(originalTabLanguage) === -1\r\n              ) {\r\n                twpConfig.addLangToAlwaysTranslate(\r\n                  originalTabLanguage,\r\n                  hostname\r\n                );\r\n              } else {\r\n                twpConfig.removeLangFromAlwaysTranslate(originalTabLanguage);\r\n              }\r\n              window.close();\r\n              break;\r\n            case \"neverTranslateThisLanguage\":\r\n              if (\r\n                twpConfig\r\n                  .get(\"neverTranslateLangs\")\r\n                  .indexOf(originalTabLanguage) === -1\r\n              ) {\r\n                twpConfig.addLangToNeverTranslate(\r\n                  originalTabLanguage,\r\n                  hostname\r\n                );\r\n              } else {\r\n                twpConfig.removeLangFromNeverTranslate(originalTabLanguage);\r\n              }\r\n              window.close();\r\n              break;\r\n            case \"showTranslateSelectedButton\":\r\n              if (twpConfig.get(\"showTranslateSelectedButton\") === \"yes\") {\r\n                twpConfig.set(\"showTranslateSelectedButton\", \"no\");\r\n              } else {\r\n                twpConfig.set(\"showTranslateSelectedButton\", \"yes\");\r\n              }\r\n              window.close();\r\n              break;\r\n            case \"showOriginalTextWhenHovering\":\r\n              if (twpConfig.get(\"showOriginalTextWhenHovering\") === \"yes\") {\r\n                twpConfig.set(\"showOriginalTextWhenHovering\", \"no\");\r\n              } else {\r\n                twpConfig.set(\"showOriginalTextWhenHovering\", \"yes\");\r\n              }\r\n              window.close();\r\n              break;\r\n            case \"showTranslatedWhenHoveringThisSite\":\r\n              if (\r\n                twpConfig\r\n                  .get(\"sitesToTranslateWhenHovering\")\r\n                  .indexOf(hostname) === -1\r\n              ) {\r\n                twpConfig.addSiteToTranslateWhenHovering(hostname);\r\n              } else {\r\n                twpConfig.removeSiteFromTranslateWhenHovering(hostname);\r\n              }\r\n              window.close();\r\n              break;\r\n            case \"showTranslatedWhenHoveringThisLang\":\r\n              if (\r\n                twpConfig\r\n                  .get(\"langsToTranslateWhenHovering\")\r\n                  .indexOf(originalTabLanguage) === -1\r\n              ) {\r\n                twpConfig.addLangToTranslateWhenHovering(originalTabLanguage);\r\n              } else {\r\n                twpConfig.removeLangFromTranslateWhenHovering(\r\n                  originalTabLanguage\r\n                );\r\n              }\r\n              window.close();\r\n              break;\r\n            case \"translateInExternalSite\":\r\n              chrome.tabs.query(\r\n                {\r\n                  active: true,\r\n                  currentWindow: true,\r\n                },\r\n                (tabs) => {\r\n                  if (currentPageTranslatorService === \"yandex\") {\r\n                    tabsCreate(\r\n                      `https://translate.yandex.com/translate?view=compact&url=${encodeURIComponent(\r\n                        tabs[0].url\r\n                      )}&lang=${twpConfig.get(\"targetLanguage\").split(\"-\")[0]}`\r\n                    );\r\n                  } else {\r\n                    // google\r\n                    tabsCreate(\r\n                      `https://translate.google.com/translate?tl=${twpConfig.get(\r\n                        \"targetLanguage\"\r\n                      )}&u=${encodeURIComponent(tabs[0].url)}`\r\n                    );\r\n                  }\r\n                }\r\n              );\r\n              break;\r\n            case \"moreOptions\":\r\n              tabsCreate(chrome.runtime.getURL(\"/options/options.html\"));\r\n              break;\r\n            case \"donate\":\r\n              tabsCreate(\r\n                chrome.runtime.getURL(\"/options/options.html#donation\")\r\n              );\r\n              break;\r\n            case \"translatePDF\":\r\n              tabsCreate(\"https://pdf.translatewebpages.org/\");\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          btnOptions.value = \"options\";\r\n        }\r\n      );\r\n    });\r\n\r\n    chrome.tabs.query(\r\n      {\r\n        active: true,\r\n        currentWindow: true,\r\n      },\r\n      (tabs) => {\r\n        const hostname = new URL(tabs[0].url).hostname;\r\n        const textNever = twpI18n.getMessage(\"btnNeverTranslate\");\r\n        if (twpConfig.get(\"neverTranslateSites\").indexOf(hostname) === -1) {\r\n          $(\"option[data-i18n=btnNeverTranslate]\").textContent = textNever;\r\n        } else {\r\n          $(\"option[data-i18n=btnNeverTranslate]\").textContent =\r\n            \"✔ \" + textNever;\r\n        }\r\n\r\n        const textAlways = twpI18n.getMessage(\"btnAlwaysTranslate\");\r\n        if (twpConfig.get(\"alwaysTranslateSites\").indexOf(hostname) === -1) {\r\n          $(\"option[data-i18n=btnAlwaysTranslate]\").textContent = textAlways;\r\n        } else {\r\n          $(\"option[data-i18n=btnAlwaysTranslate]\").textContent =\r\n            \"✔ \" + textAlways;\r\n        }\r\n\r\n        $(\"option[data-i18n=btnDonate]\").innerHTML += \" &#10084;\";\r\n      }\r\n    );\r\n  });\r\n"],"mappings":"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"}