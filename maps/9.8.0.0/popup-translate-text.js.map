{"version":3,"file":"../../popup/popup-translate-text.js","names":["$","document","querySelector","bind","twpConfig","onReady","backgroundTranslateSingleText","translationService","sourceLanguage","targetLanguage","source","Promise","resolve","reject","chrome","runtime","sendMessage","action","response","checkedLastError","currentTargetLanguages","get","currentTargetLanguage","currentTextTranslatorService","disableDarkMode","getElementById","el","createElement","setAttribute","textContent","body","appendChild","style","enableDarkMode","remove","matchMedia","matches","isPlayingAudio","playAudio","text","cbOnEnded","stopAudio","eOrigText","eOrigTextDiv","eTextTranslated","sGoogle","sYandex","sBing","sDeepL","sLibre","eCopy","eListen","onclick","navigator","clipboard","writeText","then","backgroundColor","setTimeout","setCaretAtEnd","range","createRange","sel","window","getSelection","setStart","collapse","removeAllRanges","addRange","focus","translateNewInputTimerHandler","oninput","clearTimeout","translateText","set","classList","add","setTargetLanguage","e","target","getAttribute","langCode","twpLang","fixTLanguageCode","setTargetLanguageTextTranslation","querySelectorAll","forEach","li","msgListen","i18n","getMessage","msgStopListening","targetLanguageButtons","i","codeToLanguage","enabledServices","includes","removeAttribute","find","cs","name","onChanged","newvalue","result","isRtlLanguage","params","location","hash","substring","split","reduce","a","b","splited","decodeURIComponent"],"sources":["popup-translate-text.js"],"sourcesContent":["\"use strict\";\r\n\r\nlet $ = document.querySelector.bind(document);\r\n\r\ntwpConfig.onReady(function () {\r\n  function backgroundTranslateSingleText(\r\n    translationService,\r\n    sourceLanguage,\r\n    targetLanguage,\r\n    source\r\n  ) {\r\n    return new Promise((resolve, reject) => {\r\n      chrome.runtime.sendMessage(\r\n        {\r\n          action: \"translateSingleText\",\r\n          translationService,\r\n          sourceLanguage,\r\n          targetLanguage,\r\n          source,\r\n        },\r\n        (response) => {\r\n          checkedLastError();\r\n          resolve(response);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  let currentTargetLanguages = twpConfig.get(\"targetLanguages\");\r\n  let currentTargetLanguage = twpConfig.get(\"targetLanguageTextTranslation\");\r\n  let currentTextTranslatorService = twpConfig.get(\"textTranslatorService\");\r\n\r\n  function disableDarkMode() {\r\n    if (!document.getElementById(\"lightModeElement\")) {\r\n      const el = document.createElement(\"style\");\r\n      el.setAttribute(\"id\", \"lightModeElement\");\r\n      el.setAttribute(\"rel\", \"stylesheet\");\r\n      el.textContent = `\r\n            body {\r\n                color: rgb(0, 0, 0) !important;\r\n                background-color: rgb(215, 215, 215) !important;\r\n            }\r\n            .selected {\r\n                background-color: rgba(0, 0, 0, 0.6) !important;\r\n            }\r\n            hr {\r\n                width: 95%;\r\n                border: 1px rgba(0, 0, 0, 0.75) solid;\r\n            }\r\n            `;\r\n      document.body.appendChild(el);\r\n      document.querySelector(\"#listen svg\").style = \"fill: rgb(0, 0, 0)\";\r\n    }\r\n  }\r\n\r\n  function enableDarkMode() {\r\n    if (document.getElementById(\"#lightModeElement\")) {\r\n      document.getElementById(\"#lightModeElement\").remove();\r\n      document.querySelector(\"#listen svg\").style = \"fill: black\";\r\n    }\r\n  }\r\n\r\n  switch (twpConfig.get(\"darkMode\")) {\r\n    case \"auto\":\r\n      if (matchMedia(\"(prefers-color-scheme: dark)\").matches) {\r\n        enableDarkMode();\r\n      } else {\r\n        disableDarkMode();\r\n      }\r\n      break;\r\n    case \"yes\":\r\n      enableDarkMode();\r\n      break;\r\n    case \"no\":\r\n      disableDarkMode();\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  let isPlayingAudio = false;\r\n\r\n  function playAudio(text, targetLanguage, cbOnEnded = () => {}) {\r\n    isPlayingAudio = true;\r\n    chrome.runtime.sendMessage(\r\n      {\r\n        action: \"textToSpeech\",\r\n        text,\r\n        targetLanguage,\r\n      },\r\n      () => {\r\n        checkedLastError();\r\n        isPlayingAudio = false;\r\n        cbOnEnded();\r\n      }\r\n    );\r\n  }\r\n\r\n  function stopAudio() {\r\n    if (isPlayingAudio) {\r\n      chrome.runtime.sendMessage(\r\n        {\r\n          action: \"stopAudio\",\r\n        },\r\n        checkedLastError\r\n      );\r\n    }\r\n    isPlayingAudio = false;\r\n  }\r\n\r\n  function stopAudio() {\r\n    if (isPlayingAudio) {\r\n      chrome.runtime.sendMessage(\r\n        {\r\n          action: \"stopAudio\",\r\n        },\r\n        checkedLastError\r\n      );\r\n    }\r\n    isPlayingAudio = false;\r\n  }\r\n\r\n  const eOrigText = document.getElementById(\"eOrigText\");\r\n  const eOrigTextDiv = document.getElementById(\"eOrigTextDiv\");\r\n  const eTextTranslated = document.getElementById(\"eTextTranslated\");\r\n\r\n  const sGoogle = document.getElementById(\"sGoogle\");\r\n  const sYandex = document.getElementById(\"sYandex\");\r\n  const sBing = document.getElementById(\"sBing\");\r\n  const sDeepL = document.getElementById(\"sDeepL\");\r\n  const sLibre = document.getElementById(\"sLibre\");\r\n  const eCopy = document.getElementById(\"copy\");\r\n  const eListen = document.getElementById(\"listen\");\r\n\r\n  eCopy.onclick = () => {\r\n    navigator.clipboard\r\n      .writeText(eTextTranslated.textContent)\r\n      .then(async () => {\r\n        eCopy.style.backgroundColor = \"rgba(0, 255, 0, 0.4)\";\r\n        setTimeout(() => {\r\n          eCopy.style.backgroundColor = \"rgba(0, 0, 0, 0.4)\";\r\n        }, 500);\r\n      });\r\n  };\r\n\r\n  function setCaretAtEnd() {\r\n    const el = eOrigText;\r\n    const range = document.createRange();\r\n    const sel = window.getSelection();\r\n    range.setStart(el, 1);\r\n    range.collapse(true);\r\n    sel.removeAllRanges();\r\n    sel.addRange(range);\r\n    el.focus();\r\n  }\r\n\r\n  let translateNewInputTimerHandler;\r\n  eOrigText.oninput = () => {\r\n    clearTimeout(translateNewInputTimerHandler);\r\n    translateNewInputTimerHandler = setTimeout(translateText, 600);\r\n  };\r\n\r\n  sGoogle.onclick = () => {\r\n    currentTextTranslatorService = \"google\";\r\n    twpConfig.set(\"textTranslatorService\", \"google\");\r\n    translateText();\r\n\r\n    sGoogle.classList.remove(\"selected\");\r\n    sYandex.classList.remove(\"selected\");\r\n    sBing.classList.remove(\"selected\");\r\n    sDeepL.classList.remove(\"selected\");\r\n    sLibre.classList.remove(\"selected\");\r\n\r\n    sGoogle.classList.add(\"selected\");\r\n  };\r\n  sYandex.onclick = () => {\r\n    currentTextTranslatorService = \"yandex\";\r\n    twpConfig.set(\"textTranslatorService\", \"yandex\");\r\n    translateText();\r\n\r\n    sGoogle.classList.remove(\"selected\");\r\n    sYandex.classList.remove(\"selected\");\r\n    sBing.classList.remove(\"selected\");\r\n    sDeepL.classList.remove(\"selected\");\r\n    sLibre.classList.remove(\"selected\");\r\n\r\n    sYandex.classList.add(\"selected\");\r\n  };\r\n  sBing.onclick = () => {\r\n    currentTextTranslatorService = \"bing\";\r\n    twpConfig.set(\"textTranslatorService\", \"bing\");\r\n    translateText();\r\n\r\n    sGoogle.classList.remove(\"selected\");\r\n    sYandex.classList.remove(\"selected\");\r\n    sBing.classList.remove(\"selected\");\r\n    sDeepL.classList.remove(\"selected\");\r\n    sLibre.classList.remove(\"selected\");\r\n\r\n    sBing.classList.add(\"selected\");\r\n  };\r\n  sDeepL.onclick = () => {\r\n    currentTextTranslatorService = \"deepl\";\r\n    twpConfig.set(\"textTranslatorService\", \"deepl\");\r\n    translateText();\r\n\r\n    sGoogle.classList.remove(\"selected\");\r\n    sYandex.classList.remove(\"selected\");\r\n    sBing.classList.remove(\"selected\");\r\n    sDeepL.classList.remove(\"selected\");\r\n    sLibre.classList.remove(\"selected\");\r\n\r\n    sDeepL.classList.add(\"selected\");\r\n  };\r\n  sLibre.onclick = () => {\r\n    currentTextTranslatorService = \"libre\";\r\n    twpConfig.set(\"textTranslatorService\", \"libre\");\r\n    translateText();\r\n\r\n    sGoogle.classList.remove(\"selected\");\r\n    sYandex.classList.remove(\"selected\");\r\n    sBing.classList.remove(\"selected\");\r\n    sDeepL.classList.remove(\"selected\");\r\n    sLibre.classList.remove(\"selected\");\r\n\r\n    sLibre.classList.add(\"selected\");\r\n  };\r\n\r\n  const setTargetLanguage = document.getElementById(\"setTargetLanguage\");\r\n  setTargetLanguage.onclick = (e) => {\r\n    if (e.target.getAttribute(\"value\")) {\r\n      const langCode = twpLang.fixTLanguageCode(e.target.getAttribute(\"value\"));\r\n      if (langCode) {\r\n        currentTargetLanguage = langCode;\r\n        twpConfig.setTargetLanguageTextTranslation(langCode);\r\n        translateText();\r\n      }\r\n\r\n      document.querySelectorAll(\"#setTargetLanguage li\").forEach((li) => {\r\n        li.classList.remove(\"selected\");\r\n      });\r\n\r\n      e.target.classList.add(\"selected\");\r\n    }\r\n  };\r\n\r\n  eListen.classList.remove(\"selected\");\r\n  eListen.onclick = () => {\r\n    const msgListen = chrome.i18n.getMessage(\"btnListen\");\r\n    const msgStopListening = chrome.i18n.getMessage(\"btnStopListening\");\r\n\r\n    eListen.classList.remove(\"selected\");\r\n    eListen.setAttribute(\"title\", msgStopListening);\r\n\r\n    if (isPlayingAudio) {\r\n      stopAudio();\r\n      eListen.classList.remove(\"selected\");\r\n    } else {\r\n      playAudio(eTextTranslated.textContent, currentTargetLanguage, () => {\r\n        eListen.classList.remove(\"selected\");\r\n        eListen.setAttribute(\"title\", msgListen);\r\n      });\r\n      eListen.classList.add(\"selected\");\r\n    }\r\n  };\r\n\r\n  const targetLanguageButtons = document.querySelectorAll(\r\n    \"#setTargetLanguage li\"\r\n  );\r\n\r\n  for (let i = 0; i < 3; i++) {\r\n    if (currentTargetLanguages[i] == currentTargetLanguage) {\r\n      targetLanguageButtons[i].classList.add(\"selected\");\r\n    }\r\n    targetLanguageButtons[i].textContent = currentTargetLanguages[i];\r\n    targetLanguageButtons[i].setAttribute(\"value\", currentTargetLanguages[i]);\r\n    targetLanguageButtons[i].setAttribute(\r\n      \"title\",\r\n      twpLang.codeToLanguage(currentTargetLanguages[i])\r\n    );\r\n  }\r\n\r\n  switch (currentTextTranslatorService) {\r\n    case \"yandex\":\r\n      sYandex.classList.add(\"selected\");\r\n      break;\r\n    case \"deepl\":\r\n      sDeepL.classList.add(\"selected\");\r\n      break;\r\n    case \"bing\":\r\n      sBing.classList.add(\"selected\");\r\n      break;\r\n    case \"google\":\r\n      sGoogle.classList.add(\"selected\");\r\n      break;\r\n    case \"libre\":\r\n      sLibre.classList.add(\"selected\");\r\n    default:\r\n      sGoogle.classList.add(\"selected\");\r\n      break;\r\n  }\r\n\r\n  const enabledServices = twpConfig.get(\"enabledServices\");\r\n  if (enabledServices.includes(\"google\")) {\r\n    sGoogle.removeAttribute(\"hidden\");\r\n  } else {\r\n    sGoogle.setAttribute(\"hidden\", \"\");\r\n  }\r\n  if (enabledServices.includes(\"bing\")) {\r\n    sBing.removeAttribute(\"hidden\");\r\n  } else {\r\n    sBing.setAttribute(\"hidden\", \"\");\r\n  }\r\n  if (enabledServices.includes(\"yandex\")) {\r\n    sYandex.removeAttribute(\"hidden\");\r\n  } else {\r\n    sYandex.setAttribute(\"hidden\", \"\");\r\n  }\r\n  if (enabledServices.includes(\"deepl\")) {\r\n    sDeepL.removeAttribute(\"hidden\");\r\n  } else {\r\n    sDeepL.setAttribute(\"hidden\", \"\");\r\n  }\r\n  if (twpConfig.get(\"customServices\").find((cs) => cs.name === \"libre\")) {\r\n    sLibre.removeAttribute(\"hidden\");\r\n  } else {\r\n    sLibre.setAttribute(\"hidden\", \"\");\r\n  }\r\n\r\n  twpConfig.onChanged((name, newvalue) => {\r\n    switch (name) {\r\n      case \"enabledServices\": {\r\n        const enabledServices = newvalue;\r\n        if (enabledServices.includes(\"google\")) {\r\n          sGoogle.removeAttribute(\"hidden\");\r\n        } else {\r\n          sGoogle.setAttribute(\"hidden\", \"\");\r\n        }\r\n        if (enabledServices.includes(\"bing\")) {\r\n          sBing.removeAttribute(\"hidden\");\r\n        } else {\r\n          sBing.setAttribute(\"hidden\", \"\");\r\n        }\r\n        if (enabledServices.includes(\"yandex\")) {\r\n          sYandex.removeAttribute(\"hidden\");\r\n        } else {\r\n          sYandex.setAttribute(\"hidden\", \"\");\r\n        }\r\n        if (enabledServices.includes(\"deepl\")) {\r\n          sDeepL.removeAttribute(\"hidden\");\r\n        } else {\r\n          sDeepL.setAttribute(\"hidden\", \"\");\r\n        }\r\n        break;\r\n      }\r\n      case \"customServices\": {\r\n        if (newvalue.find((cs) => cs.name === \"libre\")) {\r\n          sLibre.removeAttribute(\"hidden\");\r\n        } else {\r\n          sLibre.setAttribute(\"hidden\", \"\");\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  });\r\n\r\n  function translateText() {\r\n    stopAudio();\r\n\r\n    backgroundTranslateSingleText(\r\n      currentTextTranslatorService,\r\n      \"auto\",\r\n      currentTargetLanguage,\r\n      eOrigText.textContent\r\n    ).then((result) => {\r\n      if (twpLang.isRtlLanguage(currentTargetLanguage)) {\r\n        eTextTranslated.setAttribute(\"dir\", \"rtl\");\r\n      } else {\r\n        eTextTranslated.setAttribute(\"dir\", \"ltr\");\r\n      }\r\n      eTextTranslated.textContent = result;\r\n    });\r\n  }\r\n\r\n  let params = location.hash\r\n    .substring(1)\r\n    .split(\"&\")\r\n    .reduce((a, b) => {\r\n      const splited = b.split(\"=\");\r\n      a[decodeURIComponent(splited[0])] = decodeURIComponent(splited[1]);\r\n      return a;\r\n    }, {});\r\n\r\n  if (params[\"text\"]) {\r\n    eOrigText.textContent = params[\"text\"];\r\n    setCaretAtEnd();\r\n    translateText();\r\n  }\r\n});\r\n"],"mappings":"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"}