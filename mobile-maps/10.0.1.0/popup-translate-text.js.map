{"version":3,"file":"../../popup/popup-translate-text.js","names":["$","document","querySelector","bind","twpConfig","onReady","then","twpI18n","updateUiMessages","translateDocument","backgroundTranslateSingleText","translationService","sourceLanguage","targetLanguage","source","Promise","resolve","reject","chrome","runtime","sendMessage","action","response","checkedLastError","currentTargetLanguages","get","currentTargetLanguage","currentTextTranslatorService","disableDarkMode","getElementById","el","createElement","setAttribute","textContent","body","appendChild","style","enableDarkMode","remove","matchMedia","matches","detectTextLanguage","text","i18n","detectLanguage","result","lang","isReliable","langInfo","languages","langCode","twpLang","fixTLanguageCode","language","originalTabLanguage","tabs","query","active","currentWindow","id","isPlayingAudio","playAudio","cbOnEnded","stopAudio","eOrigText","eOrigTextDiv","eTextTranslated","sGoogle","sYandex","sBing","sDeepL","sLibre","eCopy","eListenOriginal","eListenTranslated","onclick","navigator","clipboard","writeText","backgroundColor","setTimeout","setCaretAtEnd","range","createRange","sel","window","getSelection","setStart","collapse","removeAllRanges","addRange","focus","translateNewInputTimerHandler","oninput","clearTimeout","translateText","set","classList","add","setTargetLanguage","e","target","getAttribute","setTargetLanguageTextTranslation","querySelectorAll","forEach","li","onListenClick","type","element","msgListen","getMessage","msgStopListening","lastListenAudioType","targetLanguageButtons","i","codeToLanguage","enabledServices","includes","removeAttribute","find","cs","name","onChanged","newvalue","isRtlLanguage","params","location","hash","substring","split","reduce","a","b","splited","decodeURIComponent"],"sources":["popup-translate-text.js"],"sourcesContent":["\"use strict\";\r\n\r\nlet $ = document.querySelector.bind(document);\r\n\r\ntwpConfig\r\n  .onReady()\r\n  .then(() => twpI18n.updateUiMessages())\r\n  .then(() => {\r\n    twpI18n.translateDocument();\r\n\r\n    function backgroundTranslateSingleText(\r\n      translationService,\r\n      sourceLanguage,\r\n      targetLanguage,\r\n      source\r\n    ) {\r\n      return new Promise((resolve, reject) => {\r\n        chrome.runtime.sendMessage(\r\n          {\r\n            action: \"translateSingleText\",\r\n            translationService,\r\n            sourceLanguage,\r\n            targetLanguage,\r\n            source,\r\n          },\r\n          (response) => {\r\n            checkedLastError();\r\n            resolve(response);\r\n          }\r\n        );\r\n      });\r\n    }\r\n\r\n    let currentTargetLanguages = twpConfig.get(\"targetLanguages\");\r\n    let currentTargetLanguage = twpConfig.get(\"targetLanguageTextTranslation\");\r\n    let currentTextTranslatorService = twpConfig.get(\"textTranslatorService\");\r\n\r\n    function disableDarkMode() {\r\n      if (!document.getElementById(\"lightModeElement\")) {\r\n        const el = document.createElement(\"style\");\r\n        el.setAttribute(\"id\", \"lightModeElement\");\r\n        el.setAttribute(\"rel\", \"stylesheet\");\r\n        el.textContent = `\r\n            body {\r\n                color: rgb(0, 0, 0) !important;\r\n                background-color: rgb(215, 215, 215) !important;\r\n            }\r\n            .selected {\r\n                background-color: rgba(0, 0, 0, 0.6) !important;\r\n            }\r\n            hr {\r\n                width: 95%;\r\n                border: 1px rgba(0, 0, 0, 0.75) solid;\r\n            }\r\n            `;\r\n        document.body.appendChild(el);\r\n        document.querySelector(\"#listenTranslated svg\").style =\r\n          \"fill: rgb(0, 0, 0)\";\r\n        document.querySelector(\"#listenOriginal svg\").style =\r\n          \"fill: rgb(0, 0, 0)\";\r\n      }\r\n    }\r\n\r\n    function enableDarkMode() {\r\n      if (document.getElementById(\"#lightModeElement\")) {\r\n        document.getElementById(\"#lightModeElement\").remove();\r\n        document.querySelector(\"#listenTranslated svg\").style = \"fill: black\";\r\n        document.querySelector(\"#listenOriginal svg\").style = \"fill: black\";\r\n      }\r\n    }\r\n\r\n    switch (twpConfig.get(\"darkMode\")) {\r\n      case \"auto\":\r\n        if (matchMedia(\"(prefers-color-scheme: dark)\").matches) {\r\n          enableDarkMode();\r\n        } else {\r\n          disableDarkMode();\r\n        }\r\n        break;\r\n      case \"yes\":\r\n        enableDarkMode();\r\n        break;\r\n      case \"no\":\r\n        disableDarkMode();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    async function detectTextLanguage(text) {\r\n      if (!chrome.i18n.detectLanguage) return \"und\";\r\n\r\n      return await new Promise((resolve) => {\r\n        chrome.i18n.detectLanguage(text, (result) => {\r\n          if (!result) return resolve({ lang: \"und\", isReliable: false });\r\n\r\n          for (const langInfo of result.languages) {\r\n            const langCode = twpLang.fixTLanguageCode(langInfo.language);\r\n            if (langCode) {\r\n              return resolve({ lang: langCode, isReliable: result.isReliable });\r\n            }\r\n          }\r\n\r\n          return resolve({ lang: \"und\", isReliable: false });\r\n        });\r\n      });\r\n    }\r\n\r\n    let originalTabLanguage = \"und\";\r\n    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\r\n      chrome.tabs.detectLanguage(tabs[0].id, (lang) =>\r\n        lang ? (originalTabLanguage = lang) : void 0\r\n      );\r\n    });\r\n\r\n    let isPlayingAudio = false;\r\n\r\n    function playAudio(text, targetLanguage, cbOnEnded = () => {}) {\r\n      isPlayingAudio = true;\r\n      chrome.runtime.sendMessage(\r\n        {\r\n          action: \"textToSpeech\",\r\n          text,\r\n          targetLanguage,\r\n        },\r\n        () => {\r\n          checkedLastError();\r\n          isPlayingAudio = false;\r\n          cbOnEnded();\r\n        }\r\n      );\r\n    }\r\n\r\n    function stopAudio() {\r\n      if (isPlayingAudio) {\r\n        chrome.runtime.sendMessage(\r\n          {\r\n            action: \"stopAudio\",\r\n          },\r\n          checkedLastError\r\n        );\r\n      }\r\n      isPlayingAudio = false;\r\n    }\r\n\r\n    const eOrigText = document.getElementById(\"eOrigText\");\r\n    const eOrigTextDiv = document.getElementById(\"eOrigTextDiv\");\r\n    const eTextTranslated = document.getElementById(\"eTextTranslated\");\r\n\r\n    const sGoogle = document.getElementById(\"sGoogle\");\r\n    const sYandex = document.getElementById(\"sYandex\");\r\n    const sBing = document.getElementById(\"sBing\");\r\n    const sDeepL = document.getElementById(\"sDeepL\");\r\n    const sLibre = document.getElementById(\"sLibre\");\r\n    const eCopy = document.getElementById(\"copy\");\r\n    const eListenOriginal = document.getElementById(\"listenOriginal\");\r\n    const eListenTranslated = document.getElementById(\"listenTranslated\");\r\n\r\n    eCopy.onclick = () => {\r\n      navigator.clipboard\r\n        .writeText(eTextTranslated.textContent)\r\n        .then(async () => {\r\n          eCopy.style.backgroundColor = \"rgba(0, 255, 0, 0.4)\";\r\n          setTimeout(() => {\r\n            eCopy.style.backgroundColor = \"rgba(0, 0, 0, 0.4)\";\r\n          }, 500);\r\n        });\r\n    };\r\n\r\n    function setCaretAtEnd() {\r\n      const el = eOrigText;\r\n      const range = document.createRange();\r\n      const sel = window.getSelection();\r\n      range.setStart(el, 1);\r\n      range.collapse(true);\r\n      sel.removeAllRanges();\r\n      sel.addRange(range);\r\n      el.focus();\r\n    }\r\n\r\n    let translateNewInputTimerHandler;\r\n    eOrigText.oninput = () => {\r\n      clearTimeout(translateNewInputTimerHandler);\r\n      translateNewInputTimerHandler = setTimeout(translateText, 600);\r\n    };\r\n\r\n    sGoogle.onclick = () => {\r\n      currentTextTranslatorService = \"google\";\r\n      twpConfig.set(\"textTranslatorService\", \"google\");\r\n      translateText();\r\n\r\n      sGoogle.classList.remove(\"selected\");\r\n      sYandex.classList.remove(\"selected\");\r\n      sBing.classList.remove(\"selected\");\r\n      sDeepL.classList.remove(\"selected\");\r\n      sLibre.classList.remove(\"selected\");\r\n\r\n      sGoogle.classList.add(\"selected\");\r\n    };\r\n    sYandex.onclick = () => {\r\n      currentTextTranslatorService = \"yandex\";\r\n      twpConfig.set(\"textTranslatorService\", \"yandex\");\r\n      translateText();\r\n\r\n      sGoogle.classList.remove(\"selected\");\r\n      sYandex.classList.remove(\"selected\");\r\n      sBing.classList.remove(\"selected\");\r\n      sDeepL.classList.remove(\"selected\");\r\n      sLibre.classList.remove(\"selected\");\r\n\r\n      sYandex.classList.add(\"selected\");\r\n    };\r\n    sBing.onclick = () => {\r\n      currentTextTranslatorService = \"bing\";\r\n      twpConfig.set(\"textTranslatorService\", \"bing\");\r\n      translateText();\r\n\r\n      sGoogle.classList.remove(\"selected\");\r\n      sYandex.classList.remove(\"selected\");\r\n      sBing.classList.remove(\"selected\");\r\n      sDeepL.classList.remove(\"selected\");\r\n      sLibre.classList.remove(\"selected\");\r\n\r\n      sBing.classList.add(\"selected\");\r\n    };\r\n    sDeepL.onclick = () => {\r\n      currentTextTranslatorService = \"deepl\";\r\n      twpConfig.set(\"textTranslatorService\", \"deepl\");\r\n      translateText();\r\n\r\n      sGoogle.classList.remove(\"selected\");\r\n      sYandex.classList.remove(\"selected\");\r\n      sBing.classList.remove(\"selected\");\r\n      sDeepL.classList.remove(\"selected\");\r\n      sLibre.classList.remove(\"selected\");\r\n\r\n      sDeepL.classList.add(\"selected\");\r\n    };\r\n    sLibre.onclick = () => {\r\n      currentTextTranslatorService = \"libre\";\r\n      twpConfig.set(\"textTranslatorService\", \"libre\");\r\n      translateText();\r\n\r\n      sGoogle.classList.remove(\"selected\");\r\n      sYandex.classList.remove(\"selected\");\r\n      sBing.classList.remove(\"selected\");\r\n      sDeepL.classList.remove(\"selected\");\r\n      sLibre.classList.remove(\"selected\");\r\n\r\n      sLibre.classList.add(\"selected\");\r\n    };\r\n\r\n    const setTargetLanguage = document.getElementById(\"setTargetLanguage\");\r\n    setTargetLanguage.onclick = (e) => {\r\n      if (e.target.getAttribute(\"value\")) {\r\n        const langCode = twpLang.fixTLanguageCode(\r\n          e.target.getAttribute(\"value\")\r\n        );\r\n        if (langCode) {\r\n          currentTargetLanguage = langCode;\r\n          twpConfig.setTargetLanguageTextTranslation(langCode);\r\n          translateText();\r\n        }\r\n\r\n        document.querySelectorAll(\"#setTargetLanguage li\").forEach((li) => {\r\n          li.classList.remove(\"selected\");\r\n        });\r\n\r\n        e.target.classList.add(\"selected\");\r\n      }\r\n    };\r\n\r\n    function onListenClick(type, element, text, language) {\r\n      const msgListen = twpI18n.getMessage(\"btnListen\");\r\n      const msgStopListening = twpI18n.getMessage(\"btnStopListening\");\r\n\r\n      eListenOriginal.classList.remove(\"selected\");\r\n      eListenTranslated.classList.remove(\"selected\");\r\n      eListenOriginal.setAttribute(\"title\", msgStopListening);\r\n      eListenTranslated.setAttribute(\"title\", msgStopListening);\r\n\r\n      if (isPlayingAudio) {\r\n        stopAudio();\r\n        element.classList.remove(\"selected\");\r\n      } else {\r\n        playAudio(text, language, () => {\r\n          element.classList.remove(\"selected\");\r\n          element.setAttribute(\"title\", msgListen);\r\n        });\r\n        element.classList.add(\"selected\");\r\n      }\r\n    }\r\n\r\n    let lastListenAudioType = null;\r\n    eListenOriginal.onclick = async () => {\r\n      let { lang, isReliable } = await detectTextLanguage(\r\n        eOrigText.textContent\r\n      );\r\n      if (!isReliable && originalTabLanguage !== \"und\") {\r\n        lang = originalTabLanguage;\r\n      }\r\n      if (lastListenAudioType !== \"original\") {\r\n        stopAudio();\r\n      }\r\n      lastListenAudioType = \"original\";\r\n      onListenClick(\"original\", eListenOriginal, eOrigText.textContent, lang);\r\n    };\r\n\r\n    eListenTranslated.onclick = () => {\r\n      if (lastListenAudioType !== \"translated\") {\r\n        stopAudio();\r\n      }\r\n      lastListenAudioType = \"translated\";\r\n      onListenClick(\r\n        \"translated\",\r\n        eListenTranslated,\r\n        eTextTranslated.textContent,\r\n        currentTargetLanguage\r\n      );\r\n    };\r\n\r\n    const targetLanguageButtons = document.querySelectorAll(\r\n      \"#setTargetLanguage li\"\r\n    );\r\n\r\n    for (let i = 0; i < 3; i++) {\r\n      if (currentTargetLanguages[i] == currentTargetLanguage) {\r\n        targetLanguageButtons[i].classList.add(\"selected\");\r\n      }\r\n      targetLanguageButtons[i].textContent = currentTargetLanguages[i];\r\n      targetLanguageButtons[i].setAttribute(\"value\", currentTargetLanguages[i]);\r\n      targetLanguageButtons[i].setAttribute(\r\n        \"title\",\r\n        twpLang.codeToLanguage(currentTargetLanguages[i])\r\n      );\r\n    }\r\n\r\n    switch (currentTextTranslatorService) {\r\n      case \"yandex\":\r\n        sYandex.classList.add(\"selected\");\r\n        break;\r\n      case \"deepl\":\r\n        sDeepL.classList.add(\"selected\");\r\n        break;\r\n      case \"bing\":\r\n        sBing.classList.add(\"selected\");\r\n        break;\r\n      case \"google\":\r\n        sGoogle.classList.add(\"selected\");\r\n        break;\r\n      case \"libre\":\r\n        sLibre.classList.add(\"selected\");\r\n      default:\r\n        sGoogle.classList.add(\"selected\");\r\n        break;\r\n    }\r\n\r\n    const enabledServices = twpConfig.get(\"enabledServices\");\r\n    if (enabledServices.includes(\"google\")) {\r\n      sGoogle.removeAttribute(\"hidden\");\r\n    } else {\r\n      sGoogle.setAttribute(\"hidden\", \"\");\r\n    }\r\n    if (enabledServices.includes(\"bing\")) {\r\n      sBing.removeAttribute(\"hidden\");\r\n    } else {\r\n      sBing.setAttribute(\"hidden\", \"\");\r\n    }\r\n    if (enabledServices.includes(\"yandex\")) {\r\n      sYandex.removeAttribute(\"hidden\");\r\n    } else {\r\n      sYandex.setAttribute(\"hidden\", \"\");\r\n    }\r\n    if (enabledServices.includes(\"deepl\")) {\r\n      sDeepL.removeAttribute(\"hidden\");\r\n    } else {\r\n      sDeepL.setAttribute(\"hidden\", \"\");\r\n    }\r\n    if (twpConfig.get(\"customServices\").find((cs) => cs.name === \"libre\")) {\r\n      sLibre.removeAttribute(\"hidden\");\r\n    } else {\r\n      sLibre.setAttribute(\"hidden\", \"\");\r\n    }\r\n\r\n    twpConfig.onChanged((name, newvalue) => {\r\n      switch (name) {\r\n        case \"enabledServices\": {\r\n          const enabledServices = newvalue;\r\n          if (enabledServices.includes(\"google\")) {\r\n            sGoogle.removeAttribute(\"hidden\");\r\n          } else {\r\n            sGoogle.setAttribute(\"hidden\", \"\");\r\n          }\r\n          if (enabledServices.includes(\"bing\")) {\r\n            sBing.removeAttribute(\"hidden\");\r\n          } else {\r\n            sBing.setAttribute(\"hidden\", \"\");\r\n          }\r\n          if (enabledServices.includes(\"yandex\")) {\r\n            sYandex.removeAttribute(\"hidden\");\r\n          } else {\r\n            sYandex.setAttribute(\"hidden\", \"\");\r\n          }\r\n          if (enabledServices.includes(\"deepl\")) {\r\n            sDeepL.removeAttribute(\"hidden\");\r\n          } else {\r\n            sDeepL.setAttribute(\"hidden\", \"\");\r\n          }\r\n          break;\r\n        }\r\n        case \"customServices\": {\r\n          if (newvalue.find((cs) => cs.name === \"libre\")) {\r\n            sLibre.removeAttribute(\"hidden\");\r\n          } else {\r\n            sLibre.setAttribute(\"hidden\", \"\");\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    });\r\n\r\n    function translateText() {\r\n      stopAudio();\r\n\r\n      backgroundTranslateSingleText(\r\n        currentTextTranslatorService,\r\n        \"auto\",\r\n        currentTargetLanguage,\r\n        eOrigText.textContent\r\n      ).then((result) => {\r\n        if (twpLang.isRtlLanguage(currentTargetLanguage)) {\r\n          eTextTranslated.setAttribute(\"dir\", \"rtl\");\r\n        } else {\r\n          eTextTranslated.setAttribute(\"dir\", \"ltr\");\r\n        }\r\n        eTextTranslated.textContent = result;\r\n      });\r\n    }\r\n\r\n    let params = location.hash\r\n      .substring(1)\r\n      .split(\"&\")\r\n      .reduce((a, b) => {\r\n        const splited = b.split(\"=\");\r\n        a[decodeURIComponent(splited[0])] = decodeURIComponent(splited[1]);\r\n        return a;\r\n      }, {});\r\n\r\n    if (params[\"text\"]) {\r\n      eOrigText.textContent = params[\"text\"];\r\n      setCaretAtEnd();\r\n      translateText();\r\n    }\r\n  });\r\n"],"mappings":"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","ignoreList":[]}